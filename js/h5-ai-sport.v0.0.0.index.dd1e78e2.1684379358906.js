var T=(e,s,t)=>new Promise((o,i)=>{var h=c=>{try{u(t.next(c))}catch(m){i(m)}},n=c=>{try{u(t.throw(c))}catch(m){i(m)}},u=c=>c.done?o(c.value):Promise.resolve(c.value).then(h,n);u((t=t.apply(e,s)).next())});import{a as D,_ as q}from"./h5-ai-sport.v0.0.0.GameCounter.37fff7f2.1684379358906.js";import{_ as G,c as r,e as d,C as O,z as f,A as w,R as _,S as y,P as g,T as W,H as N,U as b,O as H,v as a,L as k,j,E as Q,G as F}from"./h5-ai-sport.v0.0.0.index.eb36d521.1684379358906.js";import{l as z,v as U,c as V,d as X,e as Y,b as K,s as Z,a as B}from"./h5-ai-sport.v0.0.0.bgAudio.9e45de03.1684379358906.js";import{G as J}from"./h5-ai-sport.v0.0.0.gamescorebg.5d0d81a3.1684379358906.js";import"./h5-ai-sport.v0.0.0.index.1a7b6993.1684379358906.js";const $={props:{ballShow:Boolean,normalTouchPoint:Object,specialTouchPoint:Object,choiceRight:Boolean,choiceError:Boolean,choiceOut:Boolean,showImg:Boolean},data(){return{ballList:["touchRightBall","touchErrorBall"],ballObj:{touchRightBall:"",touchErrorBall:""}}},mounted(){this.download()},methods:{download(){this.ballList.forEach(e=>{this.ballObj[e]="https://go-ran-pic.lovedabai.com/static/"+e+".png"})}}},ee={key:0,class:"skinBg"},te=["src"],ie=["src"],se=["src"],oe=["src"];function he(e,s,t,o,i,h){return t.ballShow?(r(),d("div",ee,[t.showImg?(r(),d(O,{key:0},[t.choiceRight?(r(),d("img",{key:1,class:"rightPotit",style:f("width:"+(t.normalTouchPoint.w+"px")+";height:"+(t.normalTouchPoint.w+"px")+";left:"+(t.normalTouchPoint.x+"px")+";top:"+(t.normalTouchPoint.y+"px")+";"),src:i.ballObj.touchRightBall},null,12,te)):(r(),d("div",{key:0,class:"touchPoint normal",style:f("width:"+(t.normalTouchPoint.w+"px")+";height:"+(t.normalTouchPoint.w+"px")+";left:"+(t.normalTouchPoint.x+"px")+";top:"+(t.normalTouchPoint.y+"px")+";font-size:"+t.normalTouchPoint.w*.71+"px;line-height:"+(t.normalTouchPoint.w+"px")+";background:"+(t.choiceError||t.choiceOut?"#1AAA52":"rgba(0, 0, 0, .5)"))},w(t.normalTouchPoint.number),5)),t.choiceError?(r(),d("img",{key:3,class:"rightPotit",style:f("width:"+(t.specialTouchPoint.w+"px")+";height:"+(t.specialTouchPoint.w+"px")+";left:"+(t.specialTouchPoint.x+"px")+";top:"+(t.specialTouchPoint.y+"px")+";"),src:i.ballObj.touchErrorBall},null,12,ie)):_((r(),d("div",{key:2,class:"touchPoint",style:f("width:"+(t.specialTouchPoint.w+"px")+";height:"+(t.specialTouchPoint.w+"px")+";left:"+(t.specialTouchPoint.x+"px")+";top:"+(t.specialTouchPoint.y+"px")+";line-height:"+(t.specialTouchPoint.w+"px")+";font-size:"+t.specialTouchPoint.w*.71+"px")},w(t.specialTouchPoint.number),5)),[[y,!t.choiceRight||!t.choiceOut]])],64)):g("",!0),t.showImg?g("",!0):(r(),d(O,{key:1},[t.choiceRight?(r(),d("img",{key:1,class:"rightPotit",style:f("width:"+(t.normalTouchPoint.w+"px")+";height:"+(t.normalTouchPoint.w+"px")+";right:"+(t.normalTouchPoint.x+"px")+";top:"+(t.normalTouchPoint.y+"px")+";"),src:i.ballObj.touchRightBall},null,12,se)):(r(),d("div",{key:0,class:"touchPoint normal",style:f("width:"+(t.normalTouchPoint.w+"px")+";height:"+(t.normalTouchPoint.w+"px")+";right:"+(t.normalTouchPoint.x+"px")+";top:"+(t.normalTouchPoint.y+"px")+";font-size:"+t.normalTouchPoint.w*.71+"px;line-height:"+(t.normalTouchPoint.w+"px")+";background:"+(t.choiceError||t.choiceOut?"#1AAA52":"rgba(0, 0, 0, .5)"))},w(t.normalTouchPoint.number),5)),t.choiceError?(r(),d("img",{key:3,class:"rightPotit",style:f("width:"+(t.specialTouchPoint.w+"px")+";height:"+(t.specialTouchPoint.w+"px")+";right:"+(t.specialTouchPoint.x+"px")+";top:"+(t.specialTouchPoint.y+"px")+";"),src:i.ballObj.touchErrorBall},null,12,oe)):_((r(),d("div",{key:2,class:"touchPoint",style:f("width:"+(t.specialTouchPoint.w+"px")+";height:"+(t.specialTouchPoint.w+"px")+";right:"+(t.specialTouchPoint.x+"px")+";top:"+(t.specialTouchPoint.y+"px")+";line-height:"+(t.specialTouchPoint.w+"px")+";font-size:"+t.specialTouchPoint.w*.71+"px")},w(t.specialTouchPoint.number),5)),[[y,!t.choiceRight||!t.choiceOut]])],64))])):g("",!0)}const ne=G($,[["render",he]]);function A(e,s,t){let o=e,i=s,h=t;var n=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),u=Math.sqrt(Math.pow(o.x-h.x,2)+Math.pow(o.y-h.y,2)),c=Math.sqrt(Math.pow(i.x-h.x,2)+Math.pow(i.y-h.y,2)),m=(Math.pow(n,2)+Math.pow(u,2)-Math.pow(c,2))/(2*n*u),p=Math.round(Math.acos(m)*180/Math.PI);return p}let S=0;function le(e){const s=A(e[13],e[11],e[15]);return A(e[14],e[12],e[16])>160&&s>160?S++:S=0,S>2?(S=0,!0):!1}function l(e,s){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(s-e+1)+e,10);default:return 0}}function v(e,s,t){let o=l(s,t);return o==e?e+1:o}function ae(e){var s="",t="",o="";let i="",h=1;switch(e){case 1:h=l(1,2),h==1?(t=l(2,9),s=l(1,t-1),o=v(t,2,9)):(t=l(1,8),s=l(t+1,9),o=v(t,1,8));break;case 2:t=l(10,19),s=l(1,t-1),o=v(t,10,19);break;case 3:h=l(1,2),h==1?(t=l(10,19),s=l(1,t-1),o=v(t,10,19)):(t=l(10,18),s=l(t+1,19),o=v(t,10,18));break;case 4:h=l(1,2),h==1?(t=l(20,49),s=l(1,t-1),o=v(t,20,48)):(t=l(20,48),s=l(t+1,49),o=v(t,20,48));break;case 5:h=l(1,2),h==1?(t=l(50,99),s=l(1,t-1),o=v(t,50,99)):(t=l(50,98),s=l(t+1,99),o=v(t,50,98));break}return i=t-s,{result:t,eResult:o,first:s,second:Math.abs(i),operator:h==1?"+":"-"}}function I(e){switch(e){case 1:return 1;case 2:return 1.5;case 3:return 2;case 4:return 2.5;case 5:return 3}}function R(e,s){if(s<=50&&e<=1)return 1;if(s>50&&s<=125&&e<=2)return 2;if(s>125&&s<=225&&e<=3)return 3;if(s>225&&s<=350&&e<=4)return 4;if(s>350&&s<=500&&e<=5)return 5}const L=(e,s)=>{const t={x:e.x,y:e.y},o={x:e.x+e.width,y:e.y+e.height},i={x:s.x,y:s.y},h={x:s.x+s.width,y:s.y+s.height};return!(t.x>h.x||i.x>o.x||t.y>h.y||i.y>o.y)};function E(e,s,t,o){let i=e-t,h=s-o;return Math.round(Math.abs(Math.sqrt(Math.pow(i,2)+Math.pow(h,2)))*100)/100}function ce(e,s){for(var t=e[0],o=e[1],i=!1,h=0,n=s.length-1;h<s.length;n=h++){var u=s[h][0],c=s[h][1],m=s[n][0],p=s[n][1],M=c>o!=p>o&&t<(m-u)*(o-c)/(p-c)+u;M&&(i=!i)}return i}function re(e,s,t,o){let i=[{x:s.left,y:s.top},{x:s.left+s.width,y:s.top},{x:s.left+s.width,y:s.top+s.height},{x:s.left,y:s.top+s.height}];e.beginPath(),e.lineWidth=10,e.strokeStyle="#07c160",e.moveTo(i[0].x,i[0].y),o<=t*.25?e.lineTo((i[1].x-i[0].x)*o/(t*.25)+i[0].x,i[0].y):o<=t*.5?(e.lineTo(i[1].x,i[1].y),e.lineTo(i[2].x,(i[2].y-i[1].y)*(o-t*.25)/(t*.25)+i[1].y)):o<=t*.75?(e.lineTo(i[1].x,i[1].y),e.lineTo(i[2].x,i[2].y),e.lineTo(i[2].x-Math.abs(i[3].x-i[2].x)*(o-t*.5)/(t*.25),i[3].y)):(e.lineTo(i[1].x,i[1].y),e.lineTo(i[2].x,i[2].y),e.lineTo(i[3].x,i[3].y),e.lineTo(i[0].x,i[3].y-Math.abs(i[0].y-i[3].y)*(o-t*.75)/(t*.25))),e.stroke()}function ue(e,s,t){s.width<2*t&&(t=s.width/2),s.height<2*t&&(t=s.height/2),e.lineWidth=4,e.strokeStyle="#fff",e.beginPath(),e.moveTo(s.left+t,s.top),e.arcTo(s.left+s.width,s.top,s.left+s.width,s.top+s.height,t),e.arcTo(s.left+s.width,s.top+s.height,s.left,s.top+s.height,t),e.arcTo(s.left,s.top+s.height,s.left,s.top,t),e.arcTo(s.left,s.top,s.left+s.width,s.top,t),e.closePath(),e.stroke()}const P=40,de=["1","2","3","start","tipsOpenCloseAudio","tipsInArea","Sport_Ball_appear","Sport_Ball_Beng","Sport_Ball_getScore","levelUp","dida"];let C;const me={data(){return{GameSoreBg:J,videoWidth:"",videoHeight:"",frameNum:0,base64Data:"",frameArea:{width:"",height:"",left:"",top:""},classifier:null,ctx:null,canvasImg:"",frameCtx:null,audioCtx:null,voicesObj:{},startBtn:null,startNum:4,score:0,ballShowTime:3e3,touchTime:0,ballShowInterval:null,specialBallShowInterval:null,ballShowInter:null,aniCanvas:null,poseStorage:[],maxFrameArr:500,useframeLength:30,minConfidence:.1,needPoseInd:[0,1,2,13,14],showQuestionTimer:null,exceedRate:0,videoArea:null,rightAnkle:null,leftEye:null,falseTime:0,setPointTimeOut:null,cameraListener:null,keepOCtime:3e3,showLevelTime:null,choiceRight:!1,choiceError:!1,choiceOut:!1,qLevel:1,predicting:!1,questionInfo:null,ballShow:!1,showLevel:!1,startRegionShow:!1,normalTouchPoint:null,gameTime:0,specialTouchPoint:null,gameStart:!1,mapping:{size:0,x:0,y:0,angle:""},gameDuration:P,tipsShow:!1,tips:"",guide:1,touchesCount:0,integral:0,startCountDown:"hide",challengeGameRecordId:"",homeUserId:"",hideCamera:!0,userInfo:{skinCode:""},scoreNum:"",inGameGoout:!1,suspendOC:!1,challengerInfo:{},homeUserInfo:"",homeTouchesCound:"",myGameRecordShow:!1,challengePageShow:!1,finishPageShow:!1,preparationBoxShow:!1,showQuestion:!1,suspendOC_play:!1,showImg:!0,callbackUrl:"",code:"",showDialog:!1}},created(){return T(this,null,function*(){C=yield z(),this.downloadVoice()})},mounted(){return T(this,null,function*(){W("模型加载中..."),this.showImg=!1,yield this.getDom(),yield this.setupCamera(),this.challengeGameRecordId="",this.ctx=document.getElementById("stage").getContext("2d"),this.frameCtx=document.getElementById("frameCanvas").getContext("2d"),this.aniCanvas=document.getElementById("aniCanvas").getContext("2d"),yield this.initClassifier(),setTimeout(()=>{this.setOpenExecute()},1e3)})},onBeforeUnmount(){cancelAnimationFrame(this.rfId),Z(),B(),this.gameStart&&this.subMitFinish(),this.ballShow=!1,this.gameStart=!1,clearTimeout(this.setPointTimeOut),clearTimeout(this.showLevelTime),clearInterval(this.gameCountdownInter)},methods:{reset(){clearInterval(this.gameCountdownInter),clearTimeout(this.setPointTimeOut),clearTimeout(this.showLevelTime),clearInterval(this.int),clearInterval(this.specialBallShowInterval),this.setOpenExecute()},getDom(){const e=document.body.clientWidth,s=document.body.clientHeight;this.videoWidth=e,this.videoHeight=s},setupCamera(){return T(this,null,function*(){let e=document.getElementById("video"),s=yield navigator.mediaDevices.getUserMedia({audio:!1,video:{width:640,height:480,facingMode:"user"}}).catch(function(t){console.log("%c [ err ]-238-「index.vue」","font-size:13px; background:#60f85c; color:#a4ffa0;",t),N("获取授权失败"),b()});return e.srcObject=s,e.setAttribute("webkit-playsinline",!0),e.setAttribute("playsinline",!0),e.play(),new Promise(t=>{e.onloadedmetadata=()=>{t(e)}})})},noChallenge(){this.challengeGameRecordId="",this.myGameRecordShow=!1,this.setOpenExecute()},setOpenExecute(){this.poseStorage=[],this.challengePageShow=!1,this.startRegionShow=!1,this.finishPageShow=!1,this.preparationBoxShow=!0,this.gameDuration=P,ue(this.frameCtx,this.frameArea,1),this.renderPrediction()},renderPrediction(){return T(this,null,function*(){yield this.executeClassify(),this.rfId=requestAnimationFrame(this.renderPrediction)})},playAudio(e){U(e)},downloadVoice(){de.forEach(e=>{this.voicesObj[e]=`https://go-ran-pic.lovedabai.com/sound/${e}.mp3`})},frameStorage(e){this.poseStorage.length<=this.maxFrameArr?this.poseStorage.push(e?e.keypoints:[]):this.poseStorage.splice(0,250)},executeClassify(){let e=this;if(e.frameNum++,C&&e.frameNum%5==0){let s;e.showImg?s=document.getElementById("image"):s=document.getElementById("video");const o=document.getElementById("output").getContext("2d");V(C,s,o,e.videoWidth,e.videoHeight).then(i=>{if(b(),i.length>0){let h=i[0]?i[0].keypoints:[];if(e.frameStorage(i[0]),o.scale(-1,1),o.translate(e.videoWidth,0),o.drawImage(s,0,0,e.videoWidth,e.videoHeight),o.clearRect(0,0,e.videoWidth,e.videoHeight),X(h,o),Y(h,o),!this.gameStart&&!this.finishPageShow&&le(h)){let n=e.testingInFrame(e.frameArea,e.poseStorage.slice(-e.useframeLength),e.needPoseInd,e.useframeLength,!0);n?re(e.aniCanvas,e.frameArea,e.useframeLength,n):e.aniCanvas.clearRect(0,0,this.videoWidth,this.videoHeight),n>=this.useframeLength&&(this.rightAnkle=h[16],this.leftEye=h[1],this.leftHip=h[11],this.leftShoulder=h[6],this.rightShoulder=h[5],this.leftWrist=h[10],this.rightWrist=h[9],this.startTimeInter())}else if(this.gameStart&&this.startNum==-1&&!this.showLevel){if(this.testingInFrame(this.videoArea,this.poseStorage.slice(-this.useframeLength),this.needPoseInd,this.useframeLength,!1)>this.useframeLength*.3){if(this.inGameGoout&&(e.inGameGoout=!1,e.inGameGoout_play=!1,e.suspendOC_play=!1),!this.showQuestion&&!this.ballShow){let n=this.testingOpenCloseStatus(this.poseStorage.slice(-20));n?n>15&&(e.clearPoint(),e.suspendOC=!0,e.suspendOC_play||(e.suspendOC_play=!0,e.playAudio(e.voicesObj.tipsOpenCloseAudio))):this.suspendOC&&(e.setPointTimeOut=setTimeout(()=>{e.setQuestions()},e.keepOCtime),e.suspendOC_play=!1,e.suspendOC=!1)}}else!this.showQuestion&&!this.ballShow&&(e.clearPoint(),e.tips="请全身位于视频区域",e.suspendOC=!0,e.inGameGoout=!0,e.inGameGoout_play||(e.inGameGoout_play=!0,e.playAudio(e.voicesObj.tipsInArea)));for(let n=0;n<h.length&&(h[n].name.indexOf("wrist")!==-1&&h[n].score>.2&&!e.choiceRight&&!e.choiceError&&!e.choiceOut&&this.handleTouchPoint(h[n]),!!this.gameStart);n++);}e.predicting=!1}}).catch(()=>{e.predicting=!1,b()})}},initClassifier(){return T(this,null,function*(){this.pointSize=parseInt(this.videoHeight*.12),this.normalTouchPoint={w:this.pointSize,x:"",y:"",number:""},this.specialTouchPoint={w:this.pointSize,x:"",y:"",number:""};let e={width:this.videoWidth*.6,height:this.videoHeight*.85,left:this.videoWidth*.2,top:this.videoHeight*.1};this.videoArea={width:this.videoWidth,height:this.videoHeight,left:0,top:0},this.frameArea=e})},gameCountdown(){this.showLevel=!1,this.gameCountdownInter=setInterval(()=>{this.gameDuration-=1,this.gameTime+=1,this.gameDuration<5&&this.playAudio(this.voicesObj.dida),this.gameDuration<1&&(clearInterval(this.gameCountdownInter),this.gameOver())},1e3)},initGameData(){this.preparationBoxShow=!1,this.score=0,this.gameStart=!0,this.qLevel=1,this.gameDuration=P,this.touchesCount=0,this.gameTime=0,this.suspendOC=!1,this.inGameGoout=!1,this.inGameGoout_play=!1,this.suspendOC_play=!1,this.startNum=4},startTimeInter(){this.initGameData(),this.int=setInterval(this.clock,1e3),setTimeout(()=>{K("https://yunketang-file.dream-sports.cn/sound/sport_background_music_03.mp3"),this.showCurrentLevel()},5e3)},clock(){this.startNum-=1,this.startNum<0?(this.startCountDown="hide",clearInterval(this.int)):this.startNum==0?(this.startCountDown="start",this.playAudio(this.voicesObj.start)):(this.startCountDown=this.startNum,this.playAudio(this.voicesObj[this.startCountDown+""]))},subMitFinish(){this.score&&H({code:"ShuZiWangZhe",score:this.score,time:this.gameTime,challengeGameRecordId:this.challengeGameRecordId}).then(e=>{this.gameRecordId=e.result.gameRecordId,this.exceedRate=parseInt(e.result.exceedRate*100),this.integral=e.result.integral})},gameOver(){this.challengerInfo.score=this.score,this.finishPageShow=!0,this.ballShow=!1,this.gameStart=!1,this.questionInfo=null,this.showQuestion=!1,this.preparationBoxShow=!1,this.continuousNum=0,clearInterval(this.ballShowInter),clearTimeout(this.showQuestionTimer),clearTimeout(this.showLevelTime),clearTimeout(this.setPointTimeOut),clearInterval(this.gameCountdownInter),clearInterval(this.specialBallShowInterval),this.subMitFinish(),this.aniCanvas.clearRect(0,0,this.videoWidth,this.videoHeight),B()},region_x(e){let s=this.normalTouchPoint,t=10;switch(e){case 1:return l(0,20);case 2:return l(this.frameArea.left+this.frameArea.width,this.videoWidth-(s.w+t))}},region_y(e){let s=this.normalTouchPoint,t=250,o=this.leftEye?this.leftEye.y:10,i=this.leftHip?this.leftHip.y:10,h=this.rightAnkle?this.rightAnkle.y:10,n=this.leftShoulder?this.leftShoulder.y:10;switch(e){case 1:return l(o-s.w<t?t:o-s.w,n-s.w);case 2:return l(i-s.w,h-s.w-t)}},setSpecial(){this.touchTime=0,this.specialBallShowInterval=setInterval(()=>{this.touchTime+=100,this.touchTime>=this.ballShowTime&&this.ballShow&&(this.missNormalBall(),clearInterval(this.specialBallShowInterval))},100)},clearPoint(){this.ballShow=!1,clearTimeout(this.setPointTimeOut),clearTimeout(this.showQuestionTimer)},setQuestions(){if(this.questionInfo=null,clearTimeout(this.setPointTimeOut),clearTimeout(this.showQuestionTimer),this.gameStart){let e=this.qLevel;this.questionInfo=ae(e),this.showQuestion=!0,this.ballShow=!1,this.showQuestionTimer=setTimeout(()=>{this.gameStart&&this.setPointStart()},1e3)}},setPointStart(){if(this.gameStart){this.scoreNum=0,this.ballShow=!0,this.showQuestion=!1,this.choiceRight=!1,this.choiceError=!1,this.choiceOut=!1,this.normalXRegion=l(1,2),this.playAudio(this.voicesObj.Sport_Ball_appear),clearInterval(this.specialBallShowInterval);let e=this.normalXRegion==1?2:1,s=l(1,2);this.normalYRegion=l(1,2),this.normalTouchPoint.x=this.region_x(this.normalXRegion),this.normalTouchPoint.y=this.region_y(this.normalYRegion),this.normalTouchPoint.number=this.questionInfo.result,this.specialTouchPoint.x=this.region_x(e),this.specialTouchPoint.y=this.region_y(s),this.specialTouchPoint.number=this.questionInfo.eResult,this.setSpecial()}},testingInFrame(e,s,t,o,i){let h=[[e.left,e.top],[e.left+e.width,e.top],[e.left+e.width,e.top+e.height],[e.left,e.top+e.height]],n=[];for(let c=0;c<s.length;c++){let m=!0;for(let p=0;p<t.length;p++)if(s[c].length){if(!ce([s[c][t[p]].x,s[c][t[p]].y],h)){m=!1;break}}else{m=!1;break}n.push(m)}let u=0;return n.forEach(c=>{c?u+=1:i&&(u=0)}),u},testingOpenCloseStatus(e){let s=[];e.forEach(i=>{if(i.length&&i[11].score>.2&&i[15].score>.2&&i[16].score>.2){let h=E(i[11].x,i[11].y,i[15].x,i[15].y),n=E(i[15].x,i[15].y,i[16].x,i[16].y);n>h*.4?s.push(1):n<h*.2&&s.push(2)}});let t=0,o=0;return s.forEach(i=>{i==1?o++:i==2&&t++}),o!=0&&t!=0?this.falseTime=0:this.falseTime++,this.falseTime},handleTouchPoint(e){let s=this.normalTouchPoint,t=this.specialTouchPoint,o={x:s.x,y:s.y,width:s.w,height:s.w},i={x:t.x,y:t.y,width:t.w,height:t.w},h={x:parseInt(e.x),y:parseInt(e.y),width:s.w/4,height:s.w/4},n=0;L(o,h)&&this.ballShow&&!this.choiceError&&(this.scoreNum=0,this.choiceRight=!0,this.playAudio(this.voicesObj.Sport_Ball_getScore),this.touchTime<1e3&&(this.touchTime=1e3),n=parseInt((this.ballShowTime/this.touchTime*4+1)*I(this.qLevel)),clearInterval(this.specialBallShowInterval),this.scoreNum="+"+n,this.gameDuration+=3,this.questionInfo=null,this.touchesCount+=1,this.score+=n,setTimeout(()=>{this.ballShow=!1,this.qLevel<R(this.qLevel,this.score)?(this.qLevel=R(this.qLevel,this.score),this.gameDuration=P,this.playAudio(this.voicesObj.levelUp),this.showCurrentLevel()):this.setPointTimeOut=setTimeout(()=>{this.setQuestions()},this.keepOCtime)},1e3));let u=0;L(i,h)&&this.ballShow&&(this.scoreNum=0,this.choiceError=!0,this.playAudio(this.voicesObj.Sport_Ball_Beng),u=-10*I(this.qLevel),clearInterval(this.specialBallShowInterval),this.scoreNum=u,this.score=this.score+u>0?this.score+u:0,this.gameDuration=this.gameDuration-5<0?0:this.gameDuration-5,this.questionInfo=null,setTimeout(()=>{this.ballShow=!1,this.setPointTimeOut=setTimeout(()=>{this.setQuestions()},this.keepOCtime)},1e3))},missNormalBall(){if(this.gameStart){this.playAudio(this.voicesObj.Sport_Ball_Beng);let e=-10*I(this.qLevel);this.questionInfo=null,this.choiceOut=null,this.scoreNum=e,this.score=this.score+e>0?this.score+e:0,this.gameDuration=this.gameDuration-5<0?0:this.gameDuration-5,setTimeout(()=>{this.ballShow=!1,this.gameStart&&(this.setPointTimeOut=setTimeout(()=>{this.setQuestions()},this.keepOCtime))},1e3)}},showCurrentLevel(){clearInterval(this.gameCountdownInter),this.showLevel=!0,this.showLevelTime=setTimeout(()=>{this.gameCountdown(),this.setPointTimeOut=setTimeout(()=>{this.setQuestions()},this.keepOCtime)},2e3)}}},x=e=>(Q("data-v-f359b0a4"),e=e(),F(),e),ge=["src"],fe=["width","height"],we=["width","height"],pe=["width","height"],ve=["height","width"],_e=["height","width"],ye={class:"readTipsView"},Te={class:"frameTipsImg",src:"https://go-ran.oss-cn-shanghai.aliyuncs.com/static/ready_tips_positive.png"},xe={key:2,class:"tipsMask"},Se=["src"],Pe={key:3,class:"scoreNum"},be={key:4,class:"tipsMask"},Ie={key:0,class:"tipsdata"},Ce={key:1,src:"https://go-ran.oss-cn-shanghai.aliyuncs.com/static/suspendOC.png"},Oe={key:5,class:"tipsMask"},ke={class:"question"},Be={key:6,class:"finishPage"},Ae={class:"result_view"},Re={class:"result_score_view"},Le=x(()=>a("div",{class:"result_score"},null,-1)),Ee=x(()=>a("div",{class:"result_defen"},"快来看看本次获得的成绩吧！",-1)),Ge={class:"result_evaluate"},Me={class:"result_info_body"},De={class:"info_item"},qe={class:"result_count"},We=x(()=>a("div",{class:"result_cishu"},"正确次数",-1)),Ne={class:"info_item"},He={class:"result_count"},je=x(()=>a("div",{class:"result_cishu"},"时长(s)",-1)),Qe=["src"],Fe={class:"finishBottom"},ze=x(()=>a("div",null,"再玩一局",-1)),Ue=[ze];function Ve(e,s,t,o,i,h){const n=D,u=ne,c=q;return r(),d("div",{class:"page__bd",style:f({width:i.videoWidth+"px",height:i.videoHeight+"px"})},[a("div",{id:"main",style:f({width:i.videoWidth+"px",height:i.videoHeight+"px"})},[_(a("img",{id:"image",src:i.base64Data,style:f({width:i.videoWidth+"px",height:i.videoHeight+"px"}),alt:""},null,12,ge),[[y,i.showImg]]),a("canvas",{id:"output",width:i.videoWidth,style:{transform:"scaleX(-1)"},height:i.videoHeight},null,8,fe),a("canvas",{id:"stage",width:i.videoWidth,height:i.videoHeight},null,8,we),_(a("video",{id:"video",width:i.videoWidth,height:i.videoHeight,style:{transform:"scaleX(-1)","object-fit":"cover"},"webkit-playsinline":"true",playsinline:"true"},null,8,pe),[[y,!i.showImg]]),_(a("canvas",{height:i.videoHeight,width:i.videoWidth,id:"frameCanvas",class:"frameCanvas"},null,8,ve),[[y,i.preparationBoxShow]]),_(a("canvas",{height:i.videoHeight,width:i.videoWidth,id:"aniCanvas",class:"frameCanvas aniCanvas"},null,8,_e),[[y,i.preparationBoxShow]]),a("div",ye,[a("div",{style:f("width:"+i.frameArea.width*.8+"px;")},[_(a("img",Te,null,512),[[y,i.preparationBoxShow]])],4)]),i.startCountDown!="hide"?(r(),k(n,{key:0,"start-count-down":i.startCountDown},null,8,["start-count-down"])):g("",!0),j(u,{showImg:i.showImg,"ball-show":i.ballShow,"choice-error":i.choiceError,"choice-out":i.choiceOut,"choice-right":i.choiceRight,"normal-touch-point":i.normalTouchPoint,"special-touch-point":i.specialTouchPoint},null,8,["showImg","ball-show","choice-error","choice-out","choice-right","normal-touch-point","special-touch-point"]),i.gameStart&&!i.finishPageShow?(r(),k(c,{key:1,"game-duration":i.gameDuration,score:i.score,type:"progress","game-type":"game"},null,8,["game-duration","score"])):g("",!0),i.showLevel?(r(),d("div",xe,[a("img",{src:"https://go-ran-pic.lovedabai.com/static/level_"+i.qLevel+".png",class:"levelImage"},null,8,Se)])):g("",!0),i.scoreNum?(r(),d("div",Pe,w(i.scoreNum),1)):g("",!0),(i.suspendOC||i.inGameGoout)&&i.gameStart?(r(),d("div",be,[i.inGameGoout?(r(),d("div",Ie,w(i.tips),1)):g("",!0),i.suspendOC?(r(),d("img",Ce)):g("",!0)])):g("",!0),i.showQuestion&&i.questionInfo&&!i.finishPageShow?(r(),d("div",Oe,[a("div",ke,w(i.questionInfo.first+i.questionInfo.operator+i.questionInfo.second)+"=?",1)])):g("",!0),i.finishPageShow&&!i.challengeGameRecordId?(r(),d("div",Be,[a("div",Ae,[a("div",Re,[Le,Ee,a("div",Ge,"好厉害！！你已超越了"+w(i.exceedRate||0)+"%的小伙伴",1),a("div",Me,[a("div",De,[a("div",qe,w(i.touchesCount),1),We]),a("div",Ne,[a("div",He,w(i.gameTime),1),je])])]),a("img",{class:"result_bg",src:i.GameSoreBg},null,8,Qe)]),a("div",Fe,[a("div",{class:"againBtn",onClick:s[0]||(s[0]=(...m)=>h.reset&&h.reset(...m))},Ue)])])):g("",!0)],4)],4)}const et=G(me,[["render",Ve],["__scopeId","data-v-f359b0a4"]]);export{et as default};
