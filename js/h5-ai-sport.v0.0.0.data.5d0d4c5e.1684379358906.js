import{d as ee,u as ae,N as te,m as o,o as se,c as n,e as r,v as a,z as P,C as z,j as i,B as p,A as u,L as Z,x as E,a2 as q,y as oe,bE as le,P as L,a5 as ne,a9 as ie,E as re,G as ce,_ as ue}from"./h5-ai-sport.v0.0.0.index.eb36d521.1684379358906.js";import"./h5-ai-sport.v0.0.0.index.003661d8.1684379358906.js";import"./h5-ai-sport.v0.0.0.index.1e4387d5.1684379358906.js";import{E as ve}from"./h5-ai-sport.v0.0.0.index.4be15bca.1684379358906.js";import{L as de}from"./h5-ai-sport.v0.0.0.index.e553e8f7.1684379358906.js";import{g as me,i as he,h as pe}from"./h5-ai-sport.v0.0.0.report.15a1f4b7.1684379358906.js";import{D as x}from"./h5-ai-sport.v0.0.0.date.49659523.1684379358906.js";import{I as _e}from"./h5-ai-sport.v0.0.0.index.1a7b6993.1684379358906.js";import{P as fe}from"./h5-ai-sport.v0.0.0.index.0e6566a2.1684379358906.js";import"./h5-ai-sport.v0.0.0.use-id.019c9068.1684379358906.js";import"./h5-ai-sport.v0.0.0.use-tab-status.cd1101d5.1684379358906.js";import"./h5-ai-sport.v0.0.0.index.e6cedffb.1684379358906.js";const w=T=>(re("data-v-ae8d2226"),T=T(),ce(),T),ge={style:{"min-height":"90vh",padding:"0.1rem 0",background:"#e4e4e4"}},ye={class:"flex"},De={style:{display:"flex","align-items":"center","font-size":"0.4rem"}},xe={class:"title"},we={class:"avater"},ke={class:"avater-img"},Ne={class:"avater-info"},Se={class:"tit"},Ie=w(()=>a("text",null,"分钟",-1)),Te=w(()=>a("div",{class:"name"},"累计运动时长",-1)),Ye={class:"avater-info"},Ce={class:"tit"},be=w(()=>a("text",null,"天",-1)),ze=w(()=>a("div",{class:"name"},"累计运动天数",-1)),Ee={key:1,class:"flextoptop"},Le={class:"flex"},$e={style:{display:"flex","align-items":"center","font-size":"0.4rem"}},Be={class:"title"},Fe={class:"avater"},Pe={class:"avater-img"},Ue={class:"avater-info"},Ve={class:"tit"},Me=w(()=>a("div",{class:"name"},"运动成绩",-1)),je={class:"avater-info"},Ae={class:"tit"},Ge=w(()=>a("div",{class:"name"},"班级排名",-1)),Re={key:1,class:"flextoptop"},We=ee({__name:"data",setup(T){const $=ae(),c=te(),_=o(!1),k=o(!1),U=o(!1),H={text:"dateName",value:"dateName"},J={text:"name",value:"id"},B=o([]),d=o(c.params.type),f=o(c.params.startDate),m=o(c.params.endDate),g=o(c.params.schoolYear),N=o(c.params.selectTop),K=o(c.params.currentFlag),v=[{name:"累计成绩",id:1},{name:"一分钟最佳成绩",id:2}],Y=o(),C=o(""),y=o(1),V=o(10),M=o(0),l=o([]),h=o(!1),D=o(!1);se(()=>{Q()});const Q=()=>{me({testerId:$.userInfo.schoolInnerId,timeType:"2"}).then(s=>{let e=[];K.value==="false"?(e.push({startDate:f.value,endDate:m.value,schoolYear:g.value,dateName:"全部"}),B.value=e,f.value=e[0].startDate,m.value=e[0].endDate,m.value=e[0].endDate,N.value=e[0].dateName,g.value=e[0].schoolYear,C.value=v[v.length-2].name,Y.value=v[v.length-2].id,d.value==="score"&&S(),d.value==="exercise"&&b()):(e.push({startDate:s.result[0].startDate,endDate:s.result[0].endDate,schoolYear:c.params.schoolYear,dateName:"全部"},{startDate:x.get3MonthBefor(),endDate:x.getNowDay(),schoolYear:c.params.schoolYear,dateName:"近三月"},{startDate:x.getStartDayOfMonth(),endDate:x.getNowDay(),schoolYear:c.params.schoolYear,dateName:"本月"},{startDate:x.getStartDayOfWeek(),endDate:x.getNowDay(),schoolYear:c.params.schoolYear,dateName:"本周"}),B.value=e,f.value=e[0].startDate,m.value=e[0].endDate,m.value=e[0].endDate,N.value=e[0].dateName,g.value=e[0].schoolYear,C.value=v[v.length-2].name,Y.value=v[v.length-2].id,d.value==="score"&&S(),d.value==="exercise"&&b())}).catch(()=>{})},S=()=>{he({testerId:$.userInfo.schoolInnerId,scoreType:Y.value,startTime:f.value,endTime:m.value,schoolYear:g.value,pageNo:y.value,pageSize:V.value}).then(s=>{l.value.length>=s.result.total?D.value=!0:(M.value=s.result.total,y.value+=1,h.value=!1,l.value.push(...s.result.rows))}).catch(()=>{})},b=()=>{pe({testerId:$.userInfo.schoolInnerId,startTime:f.value,endTime:m.value,schoolYear:g.value,pageNo:y.value,pageSize:V.value}).then(s=>{l.value.length>=s.result.total?D.value=!0:(M.value=s.result.total,y.value+=1,h.value=!1,l.value.push(...s.result.rows))}).catch(()=>{})},X=({selectedOptions:s})=>{f.value=s[0].startDate,m.value=s[0].endDate,g.value=s[0].schoolYear,N.value=s[0].dateName,l.value=[],y.value=1,_.value=!1,D.value=!1,h.value=!1,d.value==="score"&&S(),d.value==="exercise"&&b()},O=({selectedOptions:s})=>{Y.value=s[0].id,C.value=s[0].name,l.value=[],y.value=1,k.value=!1,D.value=!1,h.value=!1,S()};return(s,e)=>{const I=ne,j=_e,A=de,G=ve,R=fe,W=ie;return n(),r("div",ge,[a("div",{class:"aliyuncs",style:P(l.value.length==0?"background:#0074E8":"")},[d.value==="exercise"?(n(),r("div",{key:0,class:"page",style:P(l.value.length==0?"height:97vh":"")},[U.value?L("",!0):(n(),r(z,{key:0},[a("div",ye,[a("div",De,[i(I,{size:".24rem",name:"star"}),p(" 运动时长 ")]),a("div",{onClick:e[0]||(e[0]=t=>_.value=!0),class:"showpicker"},[p(u(N.value)+" ",1),i(I,{name:"arrow-down",color:"#666",size:".24rem"})])]),l.value.length>0?(n(),Z(A,{key:0,loading:h.value,"onUpdate:loading":e[1]||(e[1]=t=>h.value=t),finished:D.value,"finished-text":"",onLoad:b},{default:E(()=>[(n(!0),r(z,null,q(l.value,(t,F)=>(n(),r("div",{class:"score-con",key:F},[a("div",xe,u(t.item),1),a("div",we,[a("div",ke,[i(j,{round:"",width:".96rem",height:".96rem",fit:"cover",src:t.coverExercise},null,8,["src"])]),a("div",Ne,[a("div",Se,[p(u(t.testTimeSum?oe(le)(t.testTimeSum):"0")+" ",1),Ie]),Te]),a("div",Ye,[a("div",Ce,[p(u(t.daysSum)+" ",1),be]),ze])])]))),128))]),_:1},8,["loading","finished"])):(n(),r("div",Ee,[i(G,{class:"custom-image",image:"https://yunketang-file.dream-sports.cn/static/cernosearch.png",description:"暂无测试成绩"})]))],64))],4)):L("",!0),d.value==="score"?(n(),r("div",{key:1,class:"page",style:P(l.value.length==0?"height:97vh":"")},[U.value?L("",!0):(n(),r(z,{key:0},[a("div",Le,[a("div",$e,[i(I,{size:".24rem",name:"star"}),p(" 运动成绩 ")]),a("div",{onClick:e[2]||(e[2]=t=>k.value=!0),class:"showpicker"},[p(u(C.value)+" ",1),i(I,{name:"arrow-down",color:"#666",size:".24rem"})]),a("div",{onClick:e[3]||(e[3]=t=>_.value=!0),class:"showpicker"},[p(u(N.value)+" ",1),i(I,{name:"arrow-down",color:"#666",size:".24rem"})])]),l.value.length>0?(n(),Z(A,{key:0,loading:h.value,"onUpdate:loading":e[4]||(e[4]=t=>h.value=t),finished:D.value,"finished-text":"",onLoad:S},{default:E(()=>[(n(!0),r(z,null,q(l.value,(t,F)=>(n(),r("div",{class:"score-con",key:F},[a("div",Be,u(t.item),1),a("div",Fe,[a("div",Pe,[i(j,{round:"",width:".96rem",height:".96rem",fit:"cover",src:t.coverExercise},null,8,["src"])]),a("div",Ue,[a("div",Ve,[p(u(t.sportScore)+" ",1),a("text",null,u(t.unit),1)]),Me]),a("div",je,[a("div",Ae,u(t.rank),1),Ge])])]))),128))]),_:1},8,["loading","finished"])):(n(),r("div",Re,[i(G,{class:"custom-image",image:"https://yunketang-file.dream-sports.cn/static/cernosearch.png",description:"暂无测试成绩"})]))],64))],4)):L("",!0)],4),i(W,{show:_.value,position:"bottom",onClose:e[6]||(e[6]=t=>_.value=!1)},{default:E(()=>[i(R,{columns:B.value,"columns-field-names":H,"show-toolbar":"",onCancel:e[5]||(e[5]=t=>_.value=!1),onConfirm:X},null,8,["columns"])]),_:1},8,["show"]),i(W,{show:k.value,position:"bottom",onClose:e[8]||(e[8]=t=>k.value=!1)},{default:E(()=>[i(R,{columns:v,"columns-field-names":J,"show-toolbar":"",onCancel:e[7]||(e[7]=t=>k.value=!1),onConfirm:O})]),_:1},8,["show"])])}}});const oa=ue(We,[["__scopeId","data-v-ae8d2226"]]);export{oa as default};
