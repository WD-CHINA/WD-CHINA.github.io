import{$ as xa}from"./h5-ai-sport.v0.0.0.index.eb36d521.1684379358906.js";var Be=function(i){return i!==null&&typeof i!="function"&&isFinite(i.length)},_a={}.toString,nt=function(i,t){return _a.call(i)==="[object "+t+"]"};const F=function(i){return nt(i,"Function")};var T=function(i){return i==null};const A=function(i){return Array.isArray?Array.isArray(i):nt(i,"Array")},$=function(i){var t=typeof i;return i!==null&&t==="object"||t==="function"};function C(i,t){if(i){var e;if(A(i))for(var r=0,a=i.length;r<a&&(e=t(i[r],r),e!==!1);r++);else if($(i)){for(var n in i)if(i.hasOwnProperty(n)&&(e=t(i[n],n),e===!1))break}}}var Sa=Object.keys?function(i){return Object.keys(i)}:function(i){var t=[];return C(i,function(e,r){F(i)&&r==="prototype"||t.push(r)}),t};function Ca(i,t){var e=Sa(t),r=e.length;if(T(i))return!r;for(var a=0;a<r;a+=1){var n=e[a];if(t[n]!==i[n]||!(n in i))return!1}return!0}var ie=function(i){return typeof i=="object"&&i!==null},lt=function(i){if(!ie(i)||!nt(i,"Object"))return!1;if(Object.getPrototypeOf(i)===null)return!0;for(var t=i;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(i)===t};function Pa(i,t){if(!A(i))return null;var e;if(F(t)&&(e=t),lt(t)&&(e=function(a){return Ca(a,t)}),e){for(var r=0;r<i.length;r+=1)if(e(i[r]))return i[r]}return null}const R=function(i){return nt(i,"String")};function dr(i,t){t===void 0&&(t=new Map);var e=[];if(Array.isArray(i))for(var r=0,a=i.length;r<a;r++){var n=i[r];t.has(n)||(e.push(n),t.set(n,!0))}return e}var Q=function(i){return nt(i,"Number")},Ma=Object.values?function(i){return Object.values(i)}:function(i){var t=[];return C(i,function(e,r){F(i)&&r==="prototype"||t.push(e)}),t};const pr=function(i){return T(i)?"":i.toString()};var mr=function(i){var t=pr(i);return t.charAt(0).toLowerCase()+t.substring(1)},J=function(i){var t=pr(i);return t.charAt(0).toUpperCase()+t.substring(1)},yr=function(i){return nt(i,"Boolean")},wa=function(i){return nt(i,"Date")};function jt(i,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(i[e]=t[e])}function _(i,t,e,r){return t&&jt(i,t),e&&jt(i,e),r&&jt(i,r),i}const Ta=function(i,t){if(!F(i))throw new TypeError("Expected a function");var e=function(){for(var r=[],a=0;a<arguments.length;a++)r[a]=arguments[a];var n=t?t.apply(this,r):r[0],s=e.cache;if(s.has(n))return s.get(n);var o=i.apply(this,r);return s.set(n,o),o};return e.cache=new Map,e};var ba=5;function xr(i,t,e,r){e=e||0,r=r||ba;for(var a in t)if(t.hasOwnProperty(a)){var n=t[a];n!==null&&lt(n)?(lt(i[a])||(i[a]={}),e<r?xr(i[a],n,e+1,r):i[a]=t[a]):A(n)?(i[a]=[],i[a]=i[a].concat(n)):n!==void 0&&(i[a]=n)}}var Y=function(i){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var r=0;r<t.length;r+=1)xr(i,t[r]);return i},ne=function(i,t){if(i===t)return!0;if(!i||!t||R(i)||R(t))return!1;if(Be(i)||Be(t)){if(i.length!==t.length)return!1;for(var e=!0,r=0;r<i.length&&(e=ne(i[r],t[r]),!!e);r++);return e}if(ie(i)||ie(t)){var a=Object.keys(i),n=Object.keys(t);if(a.length!==n.length)return!1;for(var e=!0,r=0;r<a.length&&(e=ne(i[a[r]],t[a[r]]),!!e);r++);return e}return!1};function Da(){for(var i=0,t=0,e=arguments.length;t<e;t++)i+=arguments[t].length;for(var r=Array(i),a=0,t=0;t<e;t++)for(var n=arguments[t],s=0,o=n.length;s<o;s++,a++)r[a]=n[s];return r}var Pt;Ta(function(i,t){t===void 0&&(t={});var e=t.fontSize,r=t.fontFamily,a=t.fontWeight,n=t.fontStyle,s=t.fontVariant;return Pt||(Pt=document.createElement("canvas").getContext("2d")),Pt.font=[n,s,a,e+"px",r].join(" "),Pt.measureText(R(i)?i:"").width},function(i,t){return t===void 0&&(t={}),Da([i],Ma(t)).join("")});function _r(i){for(var t=[],e=0,r=i.length;e<r;e++)t=t.concat(i[e]);return t}function Sr(i,t){for(var e=[],r={},a=0,n=i.length;a<n;a++){var s=i[a],o=s[t];T(o)||(A(o)?C(o,l=>{r[l]||(e.push(l),r[l]=!0)}):r[o]||(e.push(o),r[o]=!0))}return e}function se(i,t){for(var e=null,r=0,a=i.length;r<a;r++){var n=i[r],s=n[t];if(!T(s)){A(s)?e=s[0]:e=s;break}}return e}function Cr(i,t){if(!t)return{0:i};for(var e=function(f){for(var h="_",u=0,v=t.length;u<v;u++)h+=f[t[u]]&&f[t[u]].toString();return h},r={},a=0,n=i.length;a<n;a++){var s=i[a],o=e(s);r[o]?r[o].push(s):r[o]=[s]}return r}function Pr(i,t){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return[i];var r=Cr(i,t),a=[];if(t.length===1&&e[t[0]]){var n=e[t[0]];C(n,o=>{o="_"+o,a.push(r[o])})}else for(var s in r)a.push(r[s]);return a}function kt(i,t){if(i){var e=i.indexOf(t);e!==-1&&i.splice(e,1)}}function ye(i){if(!i.length)return{min:0,max:0};var t=Math.max.apply(null,i),e=Math.min.apply(null,i);return{min:e,max:t}}const Aa=Object.freeze(Object.defineProperty({__proto__:null,firstValue:se,getRange:ye,group:Pr,groupToMap:Cr,merge:_r,remove:kt,values:Sr},Symbol.toStringTag,{value:"Module"}));var Ia=function(){var i=!1;try{var t=Object.defineProperty({},"passive",{get(){i=!0}});window.addEventListener("e",null,t)}catch(e){}return i}(),Mr=Ia?{passive:!0}:!1,Ea=typeof wx=="object"&&typeof wx.getSystemInfoSync=="function",Oa=typeof my=="object"&&typeof my.getSystemInfoSync=="function",Fa=!1,Na=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.sessionStorage!="undefined";function wr(i){return!i||typeof i!="object"?!1:i.nodeType===1&&i.nodeName?!0:!!i.isCanvasElement}function Tr(){return window&&window.devicePixelRatio||1}function at(i,t){return i.currentStyle?i.currentStyle[t]:document.defaultView.getComputedStyle(i,null).getPropertyValue(t)}function xe(i){var t=at(i,"width");return t==="auto"&&(t=i.offsetWidth),parseFloat(t)}function _e(i){var t=at(i,"height");return t==="auto"&&(t=i.offsetHeight),parseFloat(t)}function br(i){return i?document.getElementById(i):null}function Nt(i,t){var e=t.get("el");if(!e)return i;var{top:r,right:a,bottom:n,left:s}=e.getBoundingClientRect(),o=parseFloat(at(e,"padding-left")),l=parseFloat(at(e,"padding-top")),f=parseFloat(at(e,"padding-right")),h=parseFloat(at(e,"padding-bottom")),u=a-s-o-f,v=n-r-l-h,c=t.get("pixelRatio"),g=(i.x-s-o)/u*e.width/c,p=(i.y-r-l)/v*e.height/c;return{x:g,y:p}}function Dr(i,t,e){i.addEventListener(t,e,Mr)}function Ar(i,t,e){i.removeEventListener(t,e,Mr)}function Re(i,t,e,r,a){return{type:i,chart:t,native:a||null,x:e!==void 0?e:null,y:r!==void 0?r:null}}function Se(i,t){var e=i.type,r;if(i.touches){var a=i.changedTouches[0]||{},{x:n,y:s,clientX:o,clientY:l}=a;if(n&&s)return Re(e,t,n,s,i);r={x:o,y:l}}else r={x:i.clientX,y:i.clientY};var f=t.get("canvas"),h=Nt(r,f);return Re(e,t,h.x,h.y,i)}function oe(i,t,e){return e||(e=document.createElement("canvas").getContext("2d")),e.font=t||"12px sans-serif",e.measureText(i)}function Ya(i,t){i=Object.assign({},i),t=Object.assign({},t);var e=Object.getOwnPropertyNames(i),r=Object.getOwnPropertyNames(t);if(e.length!==r.length)return!1;for(var a=0,n=e.length;a<n;a++){var s=e[a];if(i[s]!==t[s])return!1}return!0}function G(i){var t,e,r,a;return Q(i)||R(i)?t=r=a=e=i:A(i)&&(t=i[0],e=T(i[1])?i[0]:i[1],r=T(i[2])?i[0]:i[2],a=T(i[3])?e:i[3]),[t,e,r,a]}function Yt(i,t){return i===void 0?!0:typeof i=="string"?i.indexOf(t)!==-1:!1}const Ba=Object.freeze(Object.defineProperty({__proto__:null,Array:Aa,addEventListener:Dr,createEvent:Se,deepMix:Y,directionEnabled:Yt,each:C,find:Pa,getDomById:br,getHeight:_e,getPixelRatio:Tr,getRelativePosition:Nt,getStyle:at,getWidth:xe,isArray:A,isBoolean:yr,isBrowser:Na,isCanvasElement:wr,isDate:wa,isEqual:ne,isFunction:F,isMy:Oa,isNil:T,isNode:Fa,isNumber:Q,isObject:$,isObjectValueEqual:Ya,isPlainObject:lt,isString:R,isWx:Ea,lowerFirst:mr,measureText:oe,mix:_,parsePadding:G,removeEventListener:Ar,uniq:dr,upperFirst:J},Symbol.toStringTag,{value:"Module"}));var ke="#E8E8E8",Ra="#808080",et={label:{fill:Ra,fontSize:10},line:{stroke:ke,lineWidth:1},grid:{type:"line",stroke:ke,lineWidth:1,lineDash:[2]},tickLine:null,labelOffset:7.5},ka={fontFamily:'"Helvetica Neue", "San Francisco", Helvetica, Tahoma, Arial, "PingFang SC", "Hiragino Sans GB", "Heiti SC", "Microsoft YaHei", sans-serif',defaultColor:"#1890FF",pixelRatio:1,padding:"auto",appendPadding:15,colors:["#1890FF","#2FC25B","#FACC14","#223273","#8543E0","#13C2C2","#3436C7","#F04864"],shapes:{line:["line","dash"],point:["circle","hollowCircle"]},sizes:[4,10],axis:{common:et,bottom:_({},et,{grid:null}),left:_({},et,{line:null}),right:_({},et,{line:null}),circle:_({},et,{line:null}),radius:_({},et,{labelOffset:4})},shape:{line:{lineWidth:2,lineJoin:"round",lineCap:"round"},point:{lineWidth:0,size:3},area:{fillOpacity:.1}},_defaultAxis:et},b={version:"3.7.0",scales:{},widthRatio:{column:1/2,rose:.999999,multiplePie:3/4},lineDash:[4,4]};b.setTheme=function(i){Y(this,i)};b.setTheme(ka);var le="afterinit",La="beforerender",za="afterrender",Xa="beforedatachange",mt="afterdatachange",he="_aftersizechange",Ga="_aftergeominit",$a="beforegeomdraw",Ha="aftergeomdraw",Va="clear",Wa="clearinner";class Ce{constructor(){this.__events={}}on(t,e){if(!(!t||!e)){var r=this.__events[t]||[];r.push(e),this.__events[t]=r}}emit(t,e){if($(t)&&(e=t,t=e&&e.type),!!t){var r=this.__events[t];!r||!r.length||r.forEach(a=>{a.call(this,e)})}}off(t,e){var r=this.__events,a=r[t];if(!(!a||!a.length)){if(!e){delete r[t];return}for(var n=0,s=a.length;n<s;n++)a[n]===e&&(a.splice(n,1),n--)}}}let Ir=class extends Ce{getDefaultCfg(){return{}}constructor(t){super();var e={},r=this.getDefaultCfg();this._attrs=e,_(e,r,t)}get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}destroy(){this._attrs={},this.destroyed=!0}};class ja{constructor(t){_(this,t),this._init()}_init(){var t=this,e=t.start,r=t.end,a=Math.min(e.x,r.x),n=Math.max(e.x,r.x),s=Math.min(e.y,r.y),o=Math.max(e.y,r.y);this.tl={x:a,y:s},this.tr={x:n,y:s},this.bl={x:a,y:o},this.br={x:n,y:o},this.width=n-a,this.height=o-s}reset(t,e){this.start=t,this.end=e,this._init()}isInRange(t,e){$(t)&&(e=t.y,t=t.x);var r=this.tl,a=this.br;return r.x<=t&&t<=a.x&&r.y<=e&&e<=a.y}}var k={multiply(i,t){var e=i[0]*t[0]+i[2]*t[1],r=i[1]*t[0]+i[3]*t[1],a=i[0]*t[2]+i[2]*t[3],n=i[1]*t[2]+i[3]*t[3],s=i[0]*t[4]+i[2]*t[5]+i[4],o=i[1]*t[4]+i[3]*t[5]+i[5];return[e,r,a,n,s,o]},scale(i,t,e){return i[0]=t[0]*e[0],i[1]=t[1]*e[0],i[2]=t[2]*e[1],i[3]=t[3]*e[1],i[4]=t[4],i[5]=t[5],i},rotate(i,t,e){var r=Math.cos(e),a=Math.sin(e),n=t[0]*r+t[2]*a,s=t[1]*r+t[3]*a,o=t[0]*-a+t[2]*r,l=t[1]*-a+t[3]*r;return i[0]=n,i[1]=s,i[2]=o,i[3]=l,i[4]=t[4],i[5]=t[5],i},translate(i,t,e){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4]+t[0]*e[0]+t[2]*e[1],i[5]=t[5]+t[1]*e[0]+t[3]*e[1],i},transform(i,t){for(var e=[].concat(i),r=0,a=t.length;r<a;r++){var n=t[r];switch(n[0]){case"t":k.translate(e,e,[n[1],n[2]]);break;case"s":k.scale(e,e,[n[1],n[2]]);break;case"r":k.rotate(e,e,n[1]);break}}return e}};const D={create(){return[0,0]},length(i){var t=i[0],e=i[1];return Math.sqrt(t*t+e*e)},normalize(i,t){var e=this.length(t);return e===0?(i[0]=0,i[1]=0):(i[0]=t[0]/e,i[1]=t[1]/e),i},add(i,t,e){return i[0]=t[0]+e[0],i[1]=t[1]+e[1],i},sub(i,t,e){return i[0]=t[0]-e[0],i[1]=t[1]-e[1],i},scale(i,t,e){return i[0]=t[0]*e,i[1]=t[1]*e,i},dot(i,t){return i[0]*t[0]+i[1]*t[1]},direction(i,t){return i[0]*t[1]-t[0]*i[1]},angle(i,t){var e=this.dot(i,t)/(this.length(i)*this.length(t));return Math.acos(e)},angleTo(i,t,e){var r=this.angle(i,t),a=this.direction(i,t)>=0;return e?a?Math.PI*2-r:r:a?r:Math.PI*2-r},zero(i){return i[0]===0&&i[1]===0},distance(i,t){var e=t[0]-i[0],r=t[1]-i[1];return Math.sqrt(e*e+r*r)},clone(i){return[i[0],i[1]]},min(i,t,e){return i[0]=Math.min(t[0],e[0]),i[1]=Math.min(t[1],e[1]),i},max(i,t,e){return i[0]=Math.max(t[0],e[0]),i[1]=Math.max(t[1],e[1]),i},transformMat2d(i,t,e){var r=t[0],a=t[1];return i[0]=e[0]*r+e[2]*a+e[4],i[1]=e[1]*r+e[3]*a+e[5],i}};var Ua=[1,0,0,1,0,0];let ft=class{_initDefaultCfg(){}constructor(t){this._initDefaultCfg(),_(this,t);var e,r;this.plot?(e=this.plot.bl,r=this.plot.tr,this.start=e,this.end=r):(e=this.start,r=this.end),this.init(e,r)}_scale(t,e){var r=this.matrix,a=this.center;k.translate(r,r,[a.x,a.y]),k.scale(r,r,[t,e]),k.translate(r,r,[-a.x,-a.y])}init(t,e){this.matrix=[].concat(Ua),this.center={x:(e.x-t.x)/2+t.x,y:(e.y-t.y)/2+t.y},this.scale&&this._scale(this.scale[0],this.scale[1])}convertPoint(t){var{x:e,y:r}=this._convertPoint(t),a=[e,r];return D.transformMat2d(a,a,this.matrix),{x:a[0],y:a[1]}}invertPoint(t){return this._invertPoint(t)}_convertPoint(t){return t}_invertPoint(t){return t}reset(t){this.plot=t;var{bl:e,tr:r}=t;this.start=e,this.end=r,this.init(e,r)}};class Er extends ft{_initDefaultCfg(){this.type="cartesian",this.transposed=!1,this.isRect=!0}init(t,e){super.init(t,e),this.x={start:t.x,end:e.x},this.y={start:t.y,end:e.y}}_convertPoint(t){var e=this,r=e.transposed,a=r?"y":"x",n=r?"x":"y",s=e.x,o=e.y;return{x:s.start+(s.end-s.start)*t[a],y:o.start+(o.end-o.start)*t[n]}}_invertPoint(t){var e=this,r=e.transposed,a=r?"y":"x",n=r?"x":"y",s=e.x,o=e.y,l={};return l[a]=(t.x-s.start)/(s.end-s.start),l[n]=(t.y-o.start)/(o.end-o.start),l}}ft.Cartesian=Er;ft.Rect=Er;function Le(i,t){return R(t)?t:i.invert(i.scale(t))}class Lt{constructor(t){var e=this;this.type="base",this.name=null,this.method=null,this.values=[],this.scales=[],this.linear=null;var r=null,a=this.callback;if(t.callback){var n=t.callback;r=function(){for(var o=arguments.length,l=new Array(o),f=0;f<o;f++)l[f]=arguments[f];var h=n(...l);return T(h)&&(h=a.apply(e,l)),h}}_(this,t),r&&_(this,{callback:r})}_getAttrValue(t,e){var r=this.values;if(t.isCategory&&!this.linear){var a=t.translate(e);return r[a%r.length]}var n=t.scale(e);return this.getLinearValue(n)}getLinearValue(t){var e=this.values,r=e.length-1,a=Math.floor(r*t),n=r*t-a,s=e[a],o=a===r?s:e[a+1],l=s+(o-s)*n;return l}callback(t){var e=this,r=e.scales[0],a=null;return r.type==="identity"?a=r.value:a=e._getAttrValue(r,t),a}getNames(){for(var t=this.scales,e=this.names,r=Math.min(t.length,e.length),a=[],n=0;n<r;n++)a.push(e[n]);return a}getFields(){var t=this.scales,e=[];return C(t,r=>{e.push(r.field)}),e}getScale(t){var e=this.scales,r=this.names,a=r.indexOf(t);return e[a]}mapping(){for(var t=this.scales,e=this.callback,r=arguments.length,a=new Array(r),n=0;n<r;n++)a[n]=arguments[n];var s=a;if(e){for(var o=0,l=a.length;o<l;o++)a[o]=this._toOriginParam(a[o],t[o]);s=e.apply(this,a)}return s=[].concat(s),s}_toOriginParam(t,e){var r=t;if(!e.isLinear)if(A(t)){r=[];for(var a=0,n=t.length;a<n;a++)r.push(Le(e,t[a]))}else r=Le(e,t);return r}}class qa extends Lt{constructor(t){super(t),this.names=["x","y"],this.type="position"}mapping(t,e){var r=this.scales,a=this.coord,n=r[0],s=r[1],o,l,f;if(T(t)||T(e))return[];if(A(e)&&A(t)){o=[],l=[];for(var h=0,u=0,v=t.length,c=e.length;h<v&&u<c;h++,u++)f=a.convertPoint({x:n.scale(t[h]),y:s.scale(e[u])}),o.push(f.x),l.push(f.y)}else if(A(e))t=n.scale(t),l=[],C(e,function(p){p=s.scale(p),f=a.convertPoint({x:t,y:p}),o&&o!==f.x?(A(o)||(o=[o]),o.push(f.x)):o=f.x,l.push(f.y)});else if(A(t))e=s.scale(e),o=[],C(t,function(p){p=n.scale(p),f=a.convertPoint({x:p,y:e}),l&&l!==f.y?(A(l)||(l=[l]),l.push(f.y)):l=f.y,o.push(f.x)});else{t=n.scale(t),e=s.scale(e);var g=a.convertPoint({x:t,y:e});o=g.x,l=g.y}return[o,l]}}let Za=class extends Lt{constructor(t){super(t),this.names=["shape"],this.type="shape",this.gradient=null}getLinearValue(t){var e=this.values,r=Math.round((e.length-1)*t);return e[r]}};class Ja extends Lt{constructor(t){super(t),this.names=["size"],this.type="size",this.gradient=null}}function Ut(i,t,e,r){var a=i[r]+(t[r]-i[r])*e;return a}function Or(i){return"#"+qt(i[0])+qt(i[1])+qt(i[2])}function qt(i){return i=Math.round(i),i=i.toString(16),i.length===1&&(i="0"+i),i}function Ka(i,t){var e=i.length-1,r=Math.floor(e*t),a=e*t-r,n=i[r],s=r===e?n:i[r+1],o=Or([Ut(n,s,a,0),Ut(n,s,a,1),Ut(n,s,a,2)]);return o}function Qa(i){var t=[];return t.push(parseInt(i.substr(1,2),16)),t.push(parseInt(i.substr(3,2),16)),t.push(parseInt(i.substr(5,2),16)),t}var Mt={black:"#000000",blue:"#0000ff",grey:"#808080",green:"#008000",orange:"#ffa500",pink:"#ffc0cb",purple:"#800080",red:"#ff0000",white:"#ffffff",yellow:"#ffff00"};function ti(i){if(Mt[i])return Mt[i];if(i[0]==="#"){if(i.length===7)return i;var t=i.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(r,a,n,s){return"#"+a+a+n+n+s+s});return Mt[i]=t,t}var e=i.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i);return e.shift(),e=Or(e),Mt[i]=e,e}function ei(i){var t=[];return R(i)&&(i=i.split("-")),C(i,function(e){e.indexOf("#")===-1&&(e=ti(e)),t.push(Qa(e))}),function(e){return Ka(t,e)}}class ri extends Lt{constructor(t){super(t),this.names=["color"],this.type="color",this.gradient=null,R(this.values)&&(this.linear=!0)}getLinearValue(t){var e=this.gradient;if(!e){var r=this.values;e=ei(r),this.gradient=e}return e(t)}}const ai=Object.freeze(Object.defineProperty({__proto__:null,Color:ri,Position:qa,Shape:Za,Size:Ja},Symbol.toStringTag,{value:"Module"}));var N={},ii={_coord:null,draw(i,t){this.drawShape&&this.drawShape(i,t)},setCoord(i){this._coord=i},parsePoint(i){var t=this._coord;return t.isPolar&&(i.x===1&&(i.x=.9999999),i.y===1&&(i.y=.9999999)),t.convertPoint(i)},parsePoints(i){if(!i)return!1;var t=this,e=[];return i.forEach(function(r){e.push(t.parsePoint(r))}),e}},ni={defaultShapeType:null,setCoord(i){this._coord=i},getShape(i){var t=this;A(i)&&(i=i[0]);var e=t[i]||t[t.defaultShapeType];return e._coord=t._coord,e},getShapePoints(i,t){var e=this.getShape(i),r=e.getPoints||e.getShapePoints||this.getDefaultPoints,a=r(t);return a},getDefaultPoints(){return[]},drawShape(i,t,e){var r=this.getShape(i);return t.color||(t.color=b.colors[0]),r.draw(t,e)}};N.registerFactory=function(i,t){var e=J(i),r=_({},ni,t);return N[e]=r,r.name=i,r};N.registerShape=function(i,t,e){var r=J(i),a=N[r],n=_({},ii,e);return a[t]=n,n};N.registShape=N.registerShape;N.getShapeFactory=function(i){var t=this;i=i||"point";var e=J(i);return t[e]};function Zt(i,t){for(var e in t)t.hasOwnProperty(e)&&e!=="constructor"&&t[e]!==void 0&&(i[e]=t[e])}var si=function(t,e,r,a){return e&&Zt(t,e),r&&Zt(t,r),a&&Zt(t,a),t},Fr=si,oi=Fr,li=function(){var i=t.prototype;i._initDefaultCfg=function(){this.adjustNames=["x","y"]};function t(e){this._initDefaultCfg(),oi(this,e)}return i.processAdjust=function(){},t}(),xt=li,hi=["color","size","shape"],j="_origin",wt="_originY";function ze(i){return A(i)?i:R(i)?i.split("*"):[i]}class z extends Ir{getDefaultCfg(){return{type:null,data:null,attrs:{},scales:{},container:null,styleOptions:null,chart:null,shapeType:"",generatePoints:!1,attrOptions:{},sortable:!1,startOnZero:!0,visible:!0,connectNulls:!1,ignoreEmptyGroup:!1,isInit:!1}}init(){var t=this,e=t.get("isInit");e||(t._initAttrs(),t._processData(),t.set("isInit",!0))}_getGroupScales(){var t=this,e=[];return C(hi,function(r){var a=t.getAttr(r);if(a){var n=a.scales;C(n,function(s){s&&s.isCategory&&e.indexOf(s)===-1&&e.push(s)})}}),e}_groupData(t){var e=this,r=e.get("colDefs"),a=e._getGroupScales();if(a.length){var n={},s=[];return C(a,o=>{var l=o.field;s.push(l),r&&r[l]&&r[l].values&&(n[o.field]=r[l].values)}),Pr(t,s,n)}return[t]}_setAttrOptions(t,e){var r=this.get("attrOptions");r[t]=e;var a=this.get("attrs");Object.keys(a).length&&this._createAttr(t,e)}_createAttrOption(t,e,r,a){var n={};n.field=e,r?F(r)?n.callback=r:n.values=r:n.values=a,this._setAttrOptions(t,n)}_createAttr(t,e){var r=this,a=r.get("attrs"),n=r.get("coord"),s=J(t),o=ze(e.field);t==="position"&&(e.coord=n);for(var l=[],f=0,h=o.length;f<h;f++){var u=o[f],v=r._createScale(u);l.push(v)}if(t==="position"){var c=l[1];n.type==="polar"&&n.transposed&&r.hasAdjust("stack")&&c.values.length&&c.change({nice:!1,min:0,max:Math.max.apply(null,c.values)})}e.scales=l;var g=new ai[s](e);return a[t]=g,g}_initAttrs(){var t=this,e=t.get("attrOptions");for(var r in e)e.hasOwnProperty(r)&&this._createAttr(r,e[r])}_createScale(t){var e=this.get("scales"),r=e[t];return r||(r=this.get("chart").createScale(t),e[t]=r),r}_processData(){var t=this,e=this.get("data"),r=[],a=this._groupData(e);if(this.get("ignoreEmptyGroup")){var n=this.getYScale();a=a.filter(h=>h.some(u=>typeof u[n.field]!="undefined"))}for(var s=0,o=a.length;s<o;s++){var l=a[s],f=t._saveOrigin(l);this.hasAdjust("dodge")&&t._numberic(f),r.push(f)}return t.get("adjust")&&t._adjustData(r),t.get("sortable")&&t._sort(r),t.emit("afterprocessdata",{dataArray:r}),t.set("dataArray",r),r}_saveOrigin(t){for(var e=[],r=0,a=t.length;r<a;r++){var n=t[r],s={};for(var o in n)s[o]=n[o];s[j]=n,e.push(s)}return e}_numberic(t){for(var e=this.getAttr("position"),r=e.scales,a=0,n=t.length;a<n;a++)for(var s=t[a],o=Math.min(2,r.length),l=0;l<o;l++){var f=r[l];if(f.isCategory){var h=f.field;s[h]=f.translate(s[h])}}}_adjustData(t){var e=this,r=e.get("adjust");if(r){var a=J(r.type);if(!xt[a])throw new Error("not support such adjust : "+r);var n=e.getXScale(),s=e.getYScale(),o=_({xField:n.field,yField:s.field},r),l=new xt[a](o);l.processAdjust(t),a==="Stack"&&e._updateStackRange(s.field,s,t)}}_updateStackRange(t,e,r){for(var a=_r(r),n=e.min,s=e.max,o=0,l=a.length;o<l;o++){var f=a[o],h=Math.min.apply(null,f[t]),u=Math.max.apply(null,f[t]);h<n&&(n=h),u>s&&(s=u)}(n<e.min||s>e.max)&&e.change({min:n,max:s})}_sort(t){var e=this,r=e.getXScale(),{field:a,type:n}=r;n!=="identity"&&r.values.length>1&&C(t,s=>{s.sort((o,l)=>n==="timeCat"?r._toTimeStamp(o[j][a])-r._toTimeStamp(l[j][a]):r.translate(o[j][a])-r.translate(l[j][a]))}),e.set("hasSorted",!0),e.set("dataArray",t)}paint(){var t=this,e=t.get("dataArray"),r=[],a=t.getShapeFactory();a.setCoord(t.get("coord")),t._beforeMapping(e);for(var n=0,s=e.length;n<s;n++){var o=e[n];o.length&&(o=t._mapping(o),r.push(o),t.draw(o,a))}t.set("dataArray",r)}getShapeFactory(){var t=this.get("shapeFactory");if(!t){var e=this.get("shapeType");t=N.getShapeFactory(e),this.set("shapeFactory",t)}return t}_mapping(t){var e=this,r=e.get("attrs"),a=e.getYScale().field,n={};for(var s in r)if(r.hasOwnProperty(s))for(var o=r[s],l=o.names,f=o.scales,h=0,u=t.length;h<u;h++){var v=t[h];if(v[wt]=v[a],o.type==="position")for(var c=e._getAttrValues(o,v),g=0,p=c.length;g<p;g++){var y=c[g],x=l[g];v[x]=A(y)&&y.length===1?y[0]:y}else{var S=l[0],d=f[0].field,m=v[d],P="".concat(S).concat(m),M=n[P];M||(M=e._getAttrValues(o,v),n[P]=M),v[S]=M[0]}}return t}_getAttrValues(t,e){for(var r=t.scales,a=[],n=0,s=r.length;n<s;n++){var o=r[n],l=o.field;o.type==="identity"?a.push(o.value):a.push(e[l])}var f=t.mapping(...a);return f}getAttrValue(t,e){var r=this.getAttr(t),a=null;if(r){var n=this._getAttrValues(r,e);a=n[0]}return a}_beforeMapping(t){var e=this;e.get("generatePoints")&&e._generatePoints(t)}isInCircle(){var t=this.get("coord");return t&&t.isPolar}getCallbackCfg(t,e,r){if(!t)return e;var a={},n=t.map(function(s){return r[s]});return C(e,function(s,o){F(s)?a[o]=s.apply(null,n):a[o]=s}),a}getDrawCfg(t){var e=this,r=e.isInCircle(),a={origin:t,x:t.x,y:t.y,color:t.color,size:t.size,shape:t.shape,isInCircle:r,opacity:t.opacity},n=e.get("styleOptions");return n&&n.style&&(a.style=e.getCallbackCfg(n.fields,n.style,t[j])),e.get("generatePoints")&&(a.points=t.points,a.nextPoints=t.nextPoints),r&&(a.center=e.get("coord").center),a}draw(t,e){var r=this,a=r.get("container"),n=r.getYScale();C(t,function(s,o){if(!(n&&T(s._origin[n.field]))){s.index=o;var l=r.getDrawCfg(s),f=s.shape;r.drawShape(f,s,l,a,e)}})}drawShape(t,e,r,a,n){var s=n.drawShape(t,r,a);s&&C([].concat(s),o=>{o.set("origin",e)})}_generatePoints(t){var e=this,r=e.getShapeFactory(),a=e.getAttr("shape");C(t,function(n){for(var s=0,o=n.length;s<o;s++){var l=n[s],f=e.createShapePointsCfg(l),h=a?e._getAttrValues(a,l):null,u=r.getShapePoints(h,f);l.points=u}}),C(t,(n,s)=>{var o=t[s+1];o&&(n[0].nextPoints=o[0].points)})}createShapePointsCfg(t){var e=this.getXScale(),r=this.getYScale(),a=this._normalizeValues(t[e.field],e),n;return r?n=this._normalizeValues(t[r.field],r):n=t.y?t.y:.1,{x:a,y:n,y0:r?r.scale(this.getYMinValue()):void 0}}getYMinValue(){var t=this.getYScale(),{min:e,max:r}=t,a;return this.get("startOnZero")?r<=0&&e<=0?a=r:a=e>=0?e:0:a=e,a}_normalizeValues(t,e){var r=[];if(A(t))for(var a=0,n=t.length;a<n;a++){var s=t[a];r.push(e.scale(s))}else r=e.scale(t);return r}getAttr(t){return this.get("attrs")[t]}getXScale(){return this.getAttr("position").scales[0]}getYScale(){return this.getAttr("position").scales[1]}hasAdjust(t){return this.get("adjust")&&this.get("adjust").type===t}_getSnap(t,e,r){var a=0,n,s=this.getYScale().field;if(this.hasAdjust("stack")&&t.field===s){n=[],r.forEach(function(h){n.push(h[wt])});for(var o=n.length;a<o&&!(n[0][0]>e);a++){if(n[n.length-1][1]<=e){a=n.length-1;break}if(n[a][0]<=e&&n[a][1]>e)break}}else{n=t.values,n.sort((h,u)=>h-u);for(var l=n.length;a<l&&!(l<=1||(n[0]+n[1])/2>e||(n[a-1]+n[a])/2<=e&&(n[a+1]+n[a])/2>e);a++)if((n[n.length-2]+n[n.length-1])/2<=e){a=n.length-1;break}}var f=n[a];return f}getSnapRecords(t){var e=this,r=e.get("coord"),a=e.getXScale(),n=e.getYScale(),s=a.field,o=e.get("dataArray");this.get("hasSorted")||this._sort(o);var l=[],f=r.invertPoint(t),h=f.x;e.isInCircle()&&!r.transposed&&h>(1+a.rangeMax())/2&&(h=a.rangeMin());var u=a.invert(h);a.isCategory||(u=e._getSnap(a,u));var v=[];if(o.forEach(function(g){g.forEach(function(p){var y=T(p[j])?p[s]:p[j][s];e._isEqual(y,u,a)&&v.push(p)})}),this.hasAdjust("stack")&&r.isPolar&&r.transposed){if(h>=0&&h<=1){var c=n.invert(f.y);c=e._getSnap(n,c,v),v.forEach(g=>{(A(c)?g[wt].toString()===c.toString():g[wt]===c)&&l.push(g)})}}else l=v;return l}getRecords(t){var e=this.getXScale(),r=this.get("dataArray"),a=e.field;return r.map(n=>{for(var s=n.length,o=s-1;o>=0;o--){var l=n[o],f=T(l[j])?l[a]:l[j][a];if(this._isEqual(f,t,e))return l}return null})}_isEqual(t,e,r){return r.type==="timeCat"?r._toTimeStamp(t)===e:e===t}position(t){return this._setAttrOptions("position",{field:t}),this}color(t,e){return this._createAttrOption("color",t,e,b.colors),this}size(t,e){return this._createAttrOption("size",t,e,b.sizes),this}shape(t,e){var r=this.get("type"),a=b.shapes[r]||[];return this._createAttrOption("shape",t,e,a),this}style(t,e){var r=this.get("styleOptions");r||(r={},this.set("styleOptions",r)),$(t)&&(e=t,t=null);var a;return t&&(a=ze(t)),r.fields=a,r.style=e,this}adjust(t){return R(t)&&(t={type:t}),this.set("adjust",t),this}animate(t){return this.set("animateCfg",t),this}changeData(t){this.set("data",t),this.set("scales",{}),this.get("isInit")&&(this.set("isInit",!1),this.init())}clearInner(){var t=this.get("container");t&&t.clear()}reset(){this.set("isInit",!1),this.set("attrs",{}),this.set("attrOptions",{}),this.set("adjust",null),this.clearInner()}clear(){this.clearInner()}destroy(){this.set("isInit",!1),this.clear(),super.destroy()}_display(t){this.set("visible",t);var e=this.get("container"),r=e.get("canvas");e.set("visible",t),r.draw()}show(){this._display(!0)}hide(){this._display(!1)}}var fi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},ui=function(t){var e=typeof t=="undefined"?"undefined":fi(t);return t!==null&&e==="object"||e==="function"},Pe=ui,vi={}.toString,ci=function(t,e){return vi.call(t)==="[object "+e+"]"},_t=ci,gi=_t,di=Array.isArray?Array.isArray:function(i){return gi(i,"Array")},zt=di,pi=Pe,mi=zt,yi=function(t,e){if(t){var r=void 0;if(mi(t))for(var a=0,n=t.length;a<n&&(r=e(t[a],a),r!==!1);a++);else if(pi(t)){for(var s in t)if(t.hasOwnProperty(s)&&(r=e(t[s],s),r===!1))break}}},tt=yi,xi=function(t){return t==null},Xt=xi,Xe=Fr,Ge=tt,_i=Pe,Si=Xt,Ci=function(){var i=t.prototype;i._initDefaultCfg=function(){this.type="base",this.formatter=null,this.range=[0,1],this.ticks=null,this.values=[]};function t(e){this._initDefaultCfg(),Xe(this,e),this.init()}return i.init=function(){},i.getTicks=function(){var r=this,a=r.ticks,n=[];return Ge(a,function(s){var o;_i(s)?o=s:o={text:r.getText(s),tickValue:s,value:r.scale(s)},n.push(o)}),n},i.getText=function(r,a){var n=this.formatter;return r=n?n(r,a):r,(Si(r)||!r.toString)&&(r=""),r.toString()},i.rangeMin=function(){return this.range[0]},i.rangeMax=function(){var r=this.range;return r[r.length-1]},i.invert=function(r){return r},i.translate=function(r){return r},i.scale=function(r){return r},i.clone=function(){var r=this,a=r.constructor,n={};return Ge(r,function(s,o){n[o]=r[o]}),new a(n)},i.change=function(r){return this.ticks=null,Xe(this,r),this.init(),this},t}(),St=Ci,Pi=_t,Mi=function(t){return Pi(t,"Number")},Gt=Mi,fe=12;function wi(i){var t=1;if(i===1/0||i===-1/0)throw new Error("Not support Infinity!");if(i<1){for(var e=0;i<1;)t=t/10,i=i*10,e++;t.toString().length>fe&&(t=parseFloat(t.toFixed(e)))}else for(;i>10;)t=t*10,i=i/10;return t}function $e(i,t){var e=i.length;if(e===0)return NaN;var r=i[0];if(t<i[0])return NaN;if(t>=i[e-1])return i[e-1];for(var a=1;a<i.length&&!(t<i[a]);a++)r=i[a];return r}function He(i,t){var e=i.length;if(e===0)return NaN;var r;if(t>i[e-1])return NaN;if(t<i[0])return i[0];for(var a=1;a<i.length;a++)if(t<=i[a]){r=i[a];break}return r}var Ot={snapFactorTo:function(t,e,r){if(isNaN(t))return NaN;var a=1;if(t!==0){t<0&&(a=-1),t=t*a;var n=wi(t);a=a*n,t=t/n}r==="floor"?t=Ot.snapFloor(e,t):r==="ceil"?t=Ot.snapCeiling(e,t):t=Ot.snapTo(e,t);var s=parseFloat((t*a).toPrecision(fe));if(Math.abs(a)<1&&s.toString().length>fe){var o=parseInt(1/a),l=a>0?1:-1;s=t/o*l}return s},snapMultiple:function(t,e,r){var a;return r==="ceil"?a=Math.ceil(t/e):r==="floor"?a=Math.floor(t/e):a=Math.round(t/e),a*e},snapTo:function(t,e){var r=$e(t,e),a=He(t,e);if(isNaN(r)||isNaN(a)){if(t[0]>=e)return t[0];var n=t[t.length-1];if(n<=e)return n}return Math.abs(e-r)<Math.abs(a-e)?r:a},snapFloor:function(t,e){return $e(t,e)},snapCeiling:function(t,e){return He(t,e)},fixedBase:function(t,e){var r=e.toString(),a=r.indexOf("."),n=r.indexOf("e-");if(a<0&&n<0)return Math.round(t);var s=n>=0?parseInt(r.substr(n+2),10):r.substr(a+1).length;return s>20&&(s=20),parseFloat(t.toFixed(s))}},Ti=Ot,ut=Xt,bi=Gt,U=Ti,Di=5,Ai=7,Ii=[0,1,1.2,1.5,1.6,2,2.2,2.4,2.5,3,4,5,6,7.5,8,10],Ei=[0,1,2,4,5,10],Oi=1e-12,Fi=function(i){var t=i.min,e=i.max,r=i.interval,a=i.minTickInterval,n=[],s=i.minCount||Di,o=i.maxCount||Ai,l=s===o,f=ut(i.minLimit)?-1/0:i.minLimit,h=ut(i.maxLimit)?1/0:i.maxLimit,u=(s+o)/2,v=u,c=i.snapArray?i.snapArray:l?Ii:Ei;if(t===f&&e===h&&l&&(r=(e-t)/(v-1)),ut(t)&&(t=0),ut(e)&&(e=0),Math.abs(e-t)<Oi&&(t===0?e=1:t>0?t=0:e=0,e-t<5&&!r&&e-t>=1&&(r=1)),ut(r)){var g=(e-t)/(u-1);r=U.snapFactorTo(g,c,"ceil"),o!==s&&(v=parseInt((e-t)/r,10),v>o&&(v=o),v<s&&(v=s),r=U.snapFactorTo((e-t)/(v-1),c,"floor"))}if(bi(a)&&r<a&&(r=a),i.interval||o!==s)e=Math.min(U.snapMultiple(e,r,"ceil"),h),t=Math.max(U.snapMultiple(t,r,"floor"),f),v=Math.round((e-t)/r),t=U.fixedBase(t,r),e=U.fixedBase(e,r);else{u=parseInt(u,10);var p=(e+t)/2,y=U.snapMultiple(p,r,"ceil"),x=Math.floor((u-2)/2),S=y+x*r,d;u%2===0?d=y-x*r:d=y-(x+1)*r;for(var m=null;S<e&&(m===null||S>m);)m=S,S=U.fixedBase(S+r,r);for(var P=null;d>t&&(P===null||d<P);)P=d,d=U.fixedBase(d-r,r);e=S,t=d}e=Math.min(e,h),t=Math.max(t,f),n.push(t);for(var M=1;M<v;M++){var I=U.fixedBase(r*M+t,r);I<e&&n.push(I)}return n[n.length-1]<e&&n.push(e),{min:t,max:e,interval:r,count:v,ticks:n}};function Ni(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var Jt=Xt,Yi=tt,Nr=St,Bi=Fi,Ri=function(i){Ni(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this);var a=this;a.type="linear",a.isLinear=!0,a.nice=!1,a.min=null,a.minLimit=null,a.max=null,a.maxLimit=null,a.tickCount=null,a.tickInterval=null,a.minTickInterval=null,a.snapArray=null},e.init=function(){var a=this;if(!a.ticks)a.min=a.translate(a.min),a.max=a.translate(a.max),a.initTicks();else{var n=a.ticks,s=a.translate(n[0]),o=a.translate(n[n.length-1]);(Jt(a.min)||a.min>s)&&(a.min=s),(Jt(a.max)||a.max<o)&&(a.max=o)}},e.calculateTicks=function(){var a=this.min,n=this.max,s=this.minLimit,o=this.maxLimit,l=this.tickCount,f=this.tickInterval,h=this.minTickInterval,u=this.snapArray;if(l===1)throw new Error("linear scale'tickCount should not be 1");if(n<a)throw new Error("max: "+n+" should not be less than min: "+a);var v=Bi({min:a,max:n,minLimit:s,maxLimit:o,minCount:l,maxCount:l,interval:f,minTickInterval:h,snapArray:u});return v.ticks},e.initTicks=function(){var a=this,n=a.calculateTicks();if(a.nice)a.ticks=n,a.min=n[0],a.max=n[n.length-1];else{var s=[];Yi(n,function(o){o>=a.min&&o<=a.max&&s.push(o)}),s.length||(s.push(a.min),s.push(a.max)),a.ticks=s}},e.scale=function(a){if(Jt(a))return NaN;var n=this.max,s=this.min;if(n===s)return 0;var o=(a-s)/(n-s),l=this.rangeMin(),f=this.rangeMax();return l+o*(f-l)},e.invert=function(a){var n=(a-this.rangeMin())/(this.rangeMax()-this.rangeMin());return this.min+n*(this.max-this.min)},t}(Nr);Nr.Linear=Ri;function ki(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var Yr=St,Li=Gt,zi=function(i){ki(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.isIdentity=!0,this.type="identity",this.value=null},e.getText=function(){return this.value.toString()},e.scale=function(a){return this.value!==a&&Li(a)?a:this.range[0]},e.invert=function(){return this.value},t}(Yr);Yr.Identity=zi;var Xi=tt,Gi=8,Ve=4;function $i(i){var t=[];return Xi(i,function(e){t=t.concat(e)}),t}function Hi(i,t){var e;for(e=t;e>0&&i%e!==0;e--);if(e===1)for(e=t;e>0&&(i-1)%e!==0;e--);return e}var Me=function(i){var t={},e=[],r=i.isRounding,a=$i(i.data),n=a.length,s=i.maxCount||Gi,o;if(r?(o=Hi(n-1,s-1)+1,o===2?o=s:o<s-Ve&&(o=s-Ve)):o=s,!r&&n<=o+o/2)e=[].concat(a);else{for(var l=parseInt(n/(o-1),10),f=a.map(function(c,g){return g%l===0?a.slice(g,g+l):null}).filter(function(c){return c}),h=1,u=f.length;h<u&&(r?h*l<n-l:h<o-1);h++)e.push(f[h][0]);if(a.length){e.unshift(a[0]);var v=a[n-1];e.indexOf(v)===-1&&e.push(v)}}return t.categories=a,t.ticks=e,t},Vi=_t,Wi=function(t){return Vi(t,"String")},we=Wi;function ji(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var Br=St,Ui=Me,qi=tt,We=Gt,je=we,Rr=function(i){ji(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="cat",this.isCategory=!0,this.isRounding=!0},e.init=function(){var a=this,n=a.values,s=a.tickCount;if(qi(n,function(f,h){n[h]=f.toString()}),!a.ticks){var o=n;if(s){var l=Ui({maxCount:s,data:n,isRounding:a.isRounding});o=l.ticks}this.ticks=o}},e.getText=function(a){return this.values.indexOf(a)===-1&&We(a)&&(a=this.values[Math.round(a)]),i.prototype.getText.call(this,a)},e.translate=function(a){var n=this.values.indexOf(a);return n===-1&&We(a)?n=a:n===-1&&(n=NaN),n},e.scale=function(a){var n=this.rangeMin(),s=this.rangeMax(),o;return(je(a)||this.values.indexOf(a)!==-1)&&(a=this.translate(a)),this.values.length>1?o=a/(this.values.length-1):o=a,n+o*(s-n)},e.invert=function(a){if(je(a))return a;var n=this.rangeMin(),s=this.rangeMax();a<n&&(a=n),a>s&&(a=s);var o=(a-n)/(s-n),l=Math.round(o*(this.values.length-1))%this.values.length;return l=l||0,this.values[l]},t}(Br);Br.Cat=Rr;var Zi=Rr,Kt={linear:"Linear",cat:"Cat",timeCat:"TimeCat",identity:"Identity"};function Ji(i){if(!i.isPolar)return!1;var t=i.startAngle,e=i.endAngle;return!(!T(t)&&!T(e)&&e-t<Math.PI*2)}function Ue(i){Object.keys(i).forEach(t=>{delete i[t]})}class Ki{constructor(t){this.defs={},this.scales={},_(this,t)}setFieldDef(t,e){var{defs:r}=this;$(t)?_(r,t):r[t]=e,this.updateScales()}_getDef(t){var e=this.defs,r=null;return(b.scales[t]||e[t])&&(r=_({},b.scales[t]),C(e[t],function(a,n){T(a)?delete r[n]:r[n]=a})),r}_getDefaultType(t,e,r){if(r&&r.type)return r.type;var a="linear",n=se(e,t);return A(n)&&(n=n[0]),R(n)&&(a="cat"),a}_getScaleDef(t,e,r,a){var n;a&&a.values?n=a.values:n=Sr(r,e);var s={field:e,values:n};if(t!=="cat"&&t!=="timeCat"){if(!a||!(a.min&&a.max)){var{min:o,max:l}=ye(n);s.min=o,s.max=l,s.nice=!0}}else s.isRounding=!1;return s}_adjustRange(t,e){var{range:r,values:a}=e;if(t==="linear"||r||!a)return e;var n=a.length;if(n===1)e.range=[.5,1];else{var{chart:s}=this,o=s.get("coord"),l=b.widthRatio.multiplePie,f=0;Ji(o)?o.transposed?(f=1/n*l,e.range=[f/2,1-f/2]):e.range=[0,1-1/n]:(f=1/n*.5,e.range=[f,1-f])}return e}_getScaleCfg(t,e){var r=this,a=r._getDef(t);if(!e||!e.length)return a&&a.type?(a.field=t,{type:Kt[a.type],cfg:a}):{type:"Identity",cfg:{value:t,field:t.toString(),values:[t]}};var n=e[0],s=n[t];if(s===null&&(s=se(e,t)),Q(t)||T(s)&&!a)return{type:"Identity",cfg:{value:t,field:t.toString(),values:[t]}};var o=r._getDefaultType(t,e,a),l=r._getScaleDef(o,t,e,a);return a&&_(l,a),l=this._adjustRange(o,l),{type:Kt[o],cfg:l}}createScale(t,e){var{scales:r}=this,{type:a,cfg:n}=this._getScaleCfg(t,e),s=r[t];if(s&&Kt[s.type]===a)return s.change(n),s;var o=new St[a](n);return r[t]=o,o}_updateScale(t){var{field:e}=t,r=this.chart._getScaleData(e),{cfg:a}=this._getScaleCfg(e,r);t.change(a)}updateScales(){var{scales:t}=this;C(t,e=>{this._updateScale(e)})}adjustStartZero(t){var{defs:e}=this,{field:r,min:a,max:n}=t;e[r]&&e[r].min||(a>0?t.change({min:0}):n<0&&t.change({max:0}))}clear(){Ue(this.defs),Ue(this.scales),this.data=null}}class Ct{_initDefaultCfg(){this.ticks=[],this.tickLine={},this.offsetFactor=1,this.frontContainer=null,this.backContainer=null,this.gridPoints=[]}constructor(t){this._initDefaultCfg(),_(this,t),this.draw()}draw(){var{line:t,tickLine:e,label:r,grid:a}=this;a&&this.drawGrid(a),e&&this.drawTicks(e),t&&this.drawLine(t),r&&this.drawLabels()}drawTicks(t){var e=this,r=e.ticks,a=t.length,n=e.getContainer(t.top);C(r,function(s){var o=e.getOffsetPoint(s.value),l=e.getSidePoint(o,a),f=n.addShape("line",{className:"axis-tick",attrs:_({x1:o.x,y1:o.y,x2:l.x,y2:l.y},t)});f._id=e._id+"-ticks"})}drawLabels(){var t=this,e=t.labelOffset,r=t.labels;C(r,a=>{var n=t.getContainer(a.get("top")),s=t.getOffsetPoint(a.get("value")),{x:o,y:l}=t.getSidePoint(s,e);a.attr(_({x:o,y:l},t.getTextAlignInfo(s,e),a.get("textStyle"))),a._id=t._id+"-"+a.attr("text"),n.add(a)})}drawLine(){}drawGrid(t){var e=this,{gridPoints:r,ticks:a}=e,n=t,s=r.length;C(r,function(o,l){if(F(t)){var f=a[l]||{},h=t(f.text,l,s);n=h?_({},b._defaultAxis.grid,h):null}if(n){var u=n.type,v=o.points,c=e.getContainer(n.top),g;if(u==="arc"){var{center:p,startAngle:y,endAngle:x}=e,S=D.length([v[0].x-p.x,v[0].y-p.y]);g=c.addShape("Arc",{className:"axis-grid",attrs:_({x:p.x,y:p.y,startAngle:y,endAngle:x,r:S},n)})}else g=c.addShape("Polyline",{className:"axis-grid",attrs:_({points:v},n)});g._id=o._id}})}getOffsetPoint(){}getAxisVector(){}getOffsetVector(t,e){var r=this,a=r.getAxisVector(t),n=D.normalize([],a),s=r.offsetFactor,o=[n[1]*-1*s,n[0]*s];return D.scale([],o,e)}getSidePoint(t,e){var r=this,a=r.getOffsetVector(t,e);return{x:t.x+a[0],y:t.y+a[1]}}getTextAlignInfo(t,e){var r=this,a=r.getOffsetVector(t,e),n,s;return a[0]>0?n="left":a[0]<0?n="right":n="center",a[1]>0?s="top":a[1]<0?s="bottom":s="middle",{textAlign:n,textBaseline:s}}getContainer(t){var{frontContainer:e,backContainer:r}=this;return t?e:r}}let Qi=class extends Ct{_initDefaultCfg(){super._initDefaultCfg(),this.start=null,this.end=null}getOffsetPoint(t){var{start:e,end:r}=this;return{x:e.x+(r.x-e.x)*t,y:e.y+(r.y-e.y)*t}}getAxisVector(){var{start:t,end:e}=this;return[e.x-t.x,e.y-t.y]}drawLine(t){var e=this.getContainer(t.top),{start:r,end:a}=this;e.addShape("line",{className:"axis-line",attrs:_({x1:r.x,y1:r.y,x2:a.x,y2:a.y},t)})}};Ct.Line=Qi;function vt(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var qe=(i,t)=>{var e=t.x-i.x,r=t.y-i.y;return Math.abs(e)>Math.abs(r)?e>0?"right":"left":r>0?"down":"up"},Tt=(i,t)=>{var e=Math.abs(t.x-i.x),r=Math.abs(t.y-i.y);return Math.sqrt(e*e+r*r)},tn=(i,t)=>{var e=i.x+(t.x-i.x)/2,r=i.y+(t.y-i.y)/2;return{x:e,y:r}},Qt=(i,t)=>{var e=i.touches;if(!e){var r=Nt({x:i.clientX,y:i.clientY},t);return[r]}for(var a=[],n=e.length,s=0;s<n;s++){var o=e[s],{x:l,y:f,clientX:h,clientY:u}=o,v=void 0;Q(l)||Q(f)?v={x:l,y:f}:v=Nt({x:h,y:u},t),a.push(v)}return a},Ze=250;class en{constructor(t){var{canvas:e,el:r}=t;vt(this,"_click",a=>{var n=Qt(a,this.canvas);a.points=n,this.emitEvent("click",a)}),vt(this,"_start",a=>{var n=Qt(a,this.canvas);n&&(a.points=n,this.emitEvent("touchstart",a),this.reset(),this.startTime=Date.now(),this.startPoints=n,n.length>1?(this.startDistance=Tt(n[0],n[1]),this.center=tn(n[0],n[1])):this.pressTimeout=setTimeout(()=>{var s="press",o="none";a.direction=o,this.emitStart(s,a),this.emitEvent(s,a),this.eventType=s,this.direction=o},Ze))}),vt(this,"_move",a=>{var n=Qt(a,this.canvas);if(n){this.clearPressTimeout(),a.points=n,this.emitEvent("touchmove",a);var s=this.startPoints;if(s)if(n.length>1){var o=this.startDistance,l=Tt(n[0],n[1]);a.zoom=l/o,a.center=this.center,this.emitStart("pinch",a),this.emitEvent("pinch",a)}else{var f=n[0].x-s[0].x,h=n[0].y-s[0].y,u=this.direction||qe(s[0],n[0]);this.direction=u;var v=this.getEventType(n);a.direction=u,a.deltaX=f,a.deltaY=h,this.emitStart(v,a),this.emitEvent(v,a);var c=this.lastMoveTime,g=Date.now();g-c>0&&(this.prevMoveTime=c,this.prevMovePoints=this.lastMovePoints,this.lastMoveTime=g,this.lastMovePoints=n)}}}),vt(this,"_end",a=>{this.emitEnd(a),this.emitEvent("touchend",a);var n=this.lastMoveTime,s=Date.now();if(s-n<100){var o=this.prevMoveTime||this.startTime,l=n-o;if(l>0){var f=this.prevMovePoints||this.startPoints,h=this.lastMovePoints,u=Tt(f[0],h[0])/l;u>.3&&(a.velocity=u,a.direction=qe(f[0],h[0]),this.emitEvent("swipe",a))}}this.reset();var v=a.touches;v&&v.length>0&&this._start(a)}),vt(this,"_cancel",a=>{this.emitEvent("touchcancel",a),this.reset()}),this.canvas=e,this.delegateEvent(r),this.processEvent={}}delegateEvent(t){t.addEventListener("click",this._click),t.addEventListener("touchstart",this._start),t.addEventListener("touchmove",this._move),t.addEventListener("touchend",this._end),t.addEventListener("touchcancel",this._cancel)}emitEvent(t,e){var r=this.canvas;r.emit(t,e)}getEventType(t){var{eventType:e,canvas:r,startTime:a,startPoints:n}=this;if(e)return e;var s,o=r.__events.pan;if(!o||!o.length)s="press";else{var l=Date.now();l-a>Ze&&Tt(n[0],t[0])<10?s="press":s="pan"}return this.eventType=s,s}enable(t){this.processEvent[t]=!0}isProcess(t){return this.processEvent[t]}emitStart(t,e){this.isProcess(t)||(this.enable(t),this.emitEvent("".concat(t,"start"),e))}emitEnd(t){var e=this.processEvent;Object.keys(e).forEach(r=>{this.emitEvent("".concat(r,"end"),t),delete e[r]})}clearPressTimeout(){this.pressTimeout&&(clearTimeout(this.pressTimeout),this.pressTimeout=0)}reset(){this.clearPressTimeout(),this.startTime=0,this.startPoints=null,this.startDistance=0,this.direction=null,this.eventType=null,this.pinch=!1,this.prevMoveTime=0,this.prevMovePoints=null,this.lastMoveTime=0,this.lastMovePoints=null}}class rn extends Ce{constructor(t){super(),this.context=t,this.width=0,this.height=0,this.style={},this.currentStyle={},this.isCanvasElement=!0}getContext(){return this.context}getBoundingClientRect(){var t=this.width,e=this.height;return{top:0,right:t,bottom:e,left:0}}addEventListener(t,e){this.on(t,e)}removeEventListener(t,e){this.off(t,e)}dispatchEvent(t,e){this.emit(t,e)}}function an(i){if(!i||i.nodeType!==1||!i.nodeName||i.nodeName.toLowerCase()!=="canvas")return!1;var t=!1;try{i.addEventListener("eventTest",()=>{t=!0}),i.dispatchEvent(new Event("eventTest"))}catch(e){t=!1}return t}const nn={create(i){return i?an(i.canvas)?i.canvas:new rn(i):null}};function sn(i,t){return(i%t+t)%t}function kr(i,t){C(i,e=>{e=e.split(":"),t.addColorStop(Number(e[0]),e[1])})}function on(i,t,e){var r=i.split(" "),a=r[0].slice(2,r[0].length-1);a=sn(parseFloat(a)*Math.PI/180,Math.PI*2);var n=r.slice(1),{minX:s,minY:o,maxX:l,maxY:f}=t.getBBox(),h,u;a>=0&&a<.5*Math.PI?(h={x:s,y:o},u={x:l,y:f}):.5*Math.PI<=a&&a<Math.PI?(h={x:l,y:o},u={x:s,y:f}):Math.PI<=a&&a<1.5*Math.PI?(h={x:l,y:f},u={x:s,y:o}):(h={x:s,y:f},u={x:l,y:o});var v=Math.tan(a),c=v*v,g=(u.x-h.x+v*(u.y-h.y))/(c+1)+h.x,p=v*(u.x-h.x+v*(u.y-h.y))/(c+1)+h.y,y=e.createLinearGradient(h.x,h.y,g,p);return kr(n,y),y}function ln(i,t,e){var r=i.split(" "),a=r[0].slice(2,r[0].length-1);a=a.split(",");var n=parseFloat(a[0]),s=parseFloat(a[1]),o=parseFloat(a[2]),l=r.slice(1);if(o===0){var f=l[l.length-1];return f.split(":")[1]}var{width:h,height:u,minX:v,minY:c}=t.getBBox(),g=Math.sqrt(h*h+u*u)/2,p=e.createRadialGradient(v+h*n,c+u*s,o*g,v+h/2,c+u/2,g);return kr(l,p),p}function hn(i,t,e){if(i[1]==="(")try{var r=i[0];if(r==="l")return on(i,t,e);if(r==="r")return ln(i,t,e)}catch(a){console.error("error in parsing gradient string, please check if there are any extra whitespaces."),console.error(a)}return i}function fn(i){return i[0]===1&&i[1]===0&&i[2]===0&&i[3]===1&&i[4]===0&&i[5]===0}var un={stroke:"strokeStyle",fill:"fillStyle",opacity:"globalAlpha"},vn=["fillStyle","font","globalAlpha","lineCap","lineWidth","lineJoin","miterLimit","shadowBlur","shadowColor","shadowOffsetX","shadowOffsetY","strokeStyle","textAlign","textBaseline","lineDash","shadow"],cn=["circle","sector","polygon","rect","polyline"];class Te{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1}}constructor(t){this._initProperties(),_(this._attrs,t);var e=this._attrs.attrs;e&&this.initAttrs(e),this.initTransform()}get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}isGroup(){return this.get("isGroup")}isShape(){return this.get("isShape")}initAttrs(t){this.attr(_(this.getDefaultAttrs(),t))}getDefaultAttrs(){return{}}_setAttr(t,e){var r=this._attrs.attrs;if(t==="clip")e=this._setAttrClip(e);else{var a=un[t];a&&(r[a]=e)}r[t]=e}_getAttr(t){return this._attrs.attrs[t]}_setAttrClip(t){return t&&cn.indexOf(t._attrs.type)>-1?(t.get("canvas")===null&&(t=Object.assign({},t)),t.set("parent",this.get("parent")),t.set("context",this.get("context")),t):null}attr(t,e){var r=this;if(r.get("destroyed"))return null;var a=arguments.length;if(a===0)return r._attrs.attrs;if($(t)){this._attrs.bbox=null;for(var n in t)r._setAttr(n,t[n]);return r._afterAttrsSet&&r._afterAttrsSet(),r}return a===2?(this._attrs.bbox=null,r._setAttr(t,e),r._afterAttrsSet&&r._afterAttrsSet(),r):r._getAttr(t)}getParent(){return this.get("parent")}draw(t){this.get("destroyed")||this.get("visible")&&(this.setContext(t),this.drawInner(t),this.restoreContext(t))}setContext(t){var e=this._attrs.attrs.clip;t.save(),e&&(e.resetTransform(t),e.createPath(t),t.clip()),this.resetContext(t),this.resetTransform(t)}restoreContext(t){t.restore()}resetContext(t){var e=this._attrs.attrs;if(!this._attrs.isGroup){for(var r in e)if(vn.indexOf(r)>-1){var a=e[r];(r==="fillStyle"||r==="strokeStyle")&&(a=hn(a,this,t)),r==="lineDash"&&t.setLineDash&&A(a)?t.setLineDash(a):t[r]=a}}}hasFill(){return this.get("canFill")&&this._attrs.attrs.fillStyle}hasStroke(){return this.get("canStroke")&&this._attrs.attrs.strokeStyle}drawInner(){}show(){return this.set("visible",!0),this}hide(){return this.set("visible",!1),this}isVisible(){return this.get("visible")}_removeFromParent(){var t=this.get("parent");if(t){var e=t.get("children");kt(e,this)}return this}remove(t){t?this.destroy():this._removeFromParent()}destroy(){var t=this.get("destroyed");if(t)return null;this._removeFromParent(),this._attrs={},this.set("destroyed",!0)}getBBox(){return{minX:0,maxX:0,minY:0,maxY:0,width:0,height:0}}initTransform(){var t=this._attrs.attrs||{};t.matrix||(t.matrix=[1,0,0,1,0,0]),this._attrs.attrs=t}getMatrix(){return this._attrs.attrs.matrix}setMatrix(t){this._attrs.attrs.matrix=[t[0],t[1],t[2],t[3],t[4],t[5]]}transform(t){var e=this._attrs.attrs.matrix;return this._attrs.attrs.matrix=k.transform(e,t),this}setTransform(t){return this._attrs.attrs.matrix=[1,0,0,1,0,0],this.transform(t)}translate(t,e){var r=this._attrs.attrs.matrix;k.translate(r,r,[t,e])}rotate(t){var e=this._attrs.attrs.matrix;k.rotate(e,e,t)}scale(t,e){var r=this._attrs.attrs.matrix;k.scale(r,r,[t,e])}moveTo(t,e){var r=this._attrs.x||0,a=this._attrs.y||0;this.translate(t-r,e-a),this.set("x",t),this.set("y",e)}apply(t){var e=this._attrs.attrs.matrix;return D.transformMat2d(t,t,e),this}resetTransform(t){var e=this._attrs.attrs.matrix;fn(e)||t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}isDestroyed(){return this.get("destroyed")}}class O extends Te{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1,isShape:!0,attrs:{}}}getType(){return this._attrs.type}drawInner(t){var e=this,r=e.get("attrs");e.createPath(t);var a=t.globalAlpha;if(e.hasFill()){var n=r.fillOpacity;!T(n)&&n!==1?(t.globalAlpha=n,t.fill(),t.globalAlpha=a):t.fill()}if(e.hasStroke()){var s=r.lineWidth;if(s>0){var o=r.strokeOpacity;!T(o)&&o!==1&&(t.globalAlpha=o),t.stroke()}}}getBBox(){var t=this._attrs.bbox;return t||(t=this.calculateBox(),t&&(t.x=t.minX,t.y=t.minY,t.width=t.maxX-t.minX,t.height=t.maxY-t.minY),this._attrs.bbox=t),t}calculateBox(){return null}createPath(){}}var Je={},ue="_INDEX";function gn(i){return function(t,e){var r=i(t,e);return r===0?t[ue]-e[ue]:r}}const Lr={getGroupClass(){},getChildren(){return this.get("children")},addShape(i){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},e=this.get("canvas"),r=Je[i];r||(r=J(i),Je[i]=r),t.canvas=e,r==="Text"&&e&&e.get("fontFamily")&&(t.attrs.fontFamily=t.attrs.fontFamily||e.get("fontFamily"));var a=new O[r](t);return this.add(a),a},addGroup(i){var t=this.get("canvas"),e=this.getGroupClass();i=_({},i),i.canvas=t,i.parent=this;var r=new e(i);return this.add(r),r},contain(i){var t=this.get("children");return t.indexOf(i)>-1},sort(){for(var i=this.get("children"),t=0,e=i.length;t<e;t++){var r=i[t];r[ue]=t}return i.sort(gn(function(a,n){return a.get("zIndex")-n.get("zIndex")})),this},clear(){for(var i=this.get("children");i.length!==0;)i[i.length-1].remove(!0);return this},add(i){var t=this,e=t.get("children");A(i)||(i=[i]);for(var r=0,a=i.length;r<a;r++){var n=i[r],s=n.get("parent");if(s){var o=s.get("children");kt(o,n)}t._setEvn(n),e.push(n)}return t},_setEvn(i){var t=this;i._attrs.parent=t,i._attrs.context=t._attrs.context,i._attrs.canvas=t._attrs.canvas;var e=i._attrs.attrs.clip;if(e&&(e.set("parent",t),e.set("context",t.get("context"))),i._attrs.isGroup)for(var r=i._attrs.children,a=0,n=r.length;a<n;a++)i._setEvn(r[a])}};class ht extends Te{_initProperties(){this._attrs={zIndex:0,visible:!0,destroyed:!1,isGroup:!0,children:[]}}drawInner(t){for(var e=this.get("children"),r=0,a=e.length;r<a;r++){var n=e[r];n.draw(t)}return this}getBBox(){for(var t=this,e=1/0,r=-1/0,a=1/0,n=-1/0,s=t.get("children"),o=0,l=s.length;o<l;o++){var f=s[o];if(f.get("visible")){var h=f.getBBox();if(!h)continue;var u=[h.minX,h.minY],v=[h.minX,h.maxY],c=[h.maxX,h.minY],g=[h.maxX,h.maxY],p=f.attr("matrix");D.transformMat2d(u,u,p),D.transformMat2d(v,v,p),D.transformMat2d(c,c,p),D.transformMat2d(g,g,p),e=Math.min(u[0],v[0],c[0],g[0],e),r=Math.max(u[0],v[0],c[0],g[0],r),a=Math.min(u[1],v[1],c[1],g[1],a),n=Math.max(u[1],v[1],c[1],g[1],n)}}return{minX:e,minY:a,maxX:r,maxY:n,x:e,y:a,width:r-e,height:n-a}}destroy(){this.get("destroyed")||(this.clear(),super.destroy())}}_(ht.prototype,Lr,{getGroupClass(){return ht}});var ve=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame:function(i){return setTimeout(i,16)};class be extends Ce{get(t){return this._attrs[t]}set(t,e){this._attrs[t]=e}constructor(t){super(),this._attrs=_({type:"canvas",children:[]},t),this._initPixelRatio(),this._initCanvas()}_initPixelRatio(){var t=this.get("pixelRatio");t||this.set("pixelRatio",Tr())}beforeDraw(){var t=this._attrs.context,e=this._attrs.el;t&&t.clearRect&&t.clearRect(0,0,e.width,e.height)}_initCanvas(){var t=this,e=t.get("el"),r=t.get("context");if(!e&&!r)throw new Error("Please specify the id, el or context of the chart!");var a;e?a=R(e)?br(e):e:a=nn.create(r),r&&a&&!a.getContext&&(a.getContext=function(){return r});var n=t.get("width");n||(n=xe(a));var s=t.get("height");s||(s=_e(a)),t.set("canvas",this),t.set("el",a),t.set("context",r||a.getContext("2d")),t.changeSize(n,s);var o=new en({canvas:this,el:a});t.set("eventController",o)}changeSize(t,e){var r=this.get("pixelRatio"),a=this.get("el");if(a.style&&(a.style.width=t+"px",a.style.height=e+"px"),wr(a)&&(a.width=t*r,a.height=e*r,r!==1)){var n=this.get("context");n.scale(r,r)}this.set("width",t),this.set("height",e)}getWidth(){var t=this.get("pixelRatio"),e=this.get("width");return e*t}getHeight(){var t=this.get("pixelRatio"),e=this.get("height");return e*t}getPointByClient(t,e){var r=this.get("el"),a=r.getBoundingClientRect(),n=a.right-a.left,s=a.bottom-a.top;return{x:(t-a.left)*(r.width/n),y:(e-a.top)*(r.height/s)}}_beginDraw(){this._attrs.toDraw=!0}_endDraw(){this._attrs.toDraw=!1}draw(){var t=this;function e(){t.set("animateHandler",ve(()=>{t.set("animateHandler",void 0),t.get("toDraw")&&e()})),t.beforeDraw();try{for(var r=t._attrs.context,a=t._attrs.children,n=0,s=a.length;n<s;n++){var o=a[n];o.draw(r)}r.draw&&r.draw()}catch(l){console.warn("error in draw canvas, detail as:"),console.warn(l),t._endDraw()}t._endDraw()}t.get("destroyed")||(t.get("animateHandler")?this._beginDraw():e())}destroy(){if(!this.get("destroyed")){var t=this.get("el");t.width=0,t.height=0,this.clear(),this._attrs={},this.set("destroyed",!0)}}isDestroyed(){return this.get("destroyed")}}_(be.prototype,Lr,{getGroupClass(){return ht}});function dn(i,t,e){if(i=G(i),!i[0]&&!i[1]&&!i[2]&&!i[3])return i;var r=Math.max(i[0]+i[1],i[2]+i[3]),a=Math.max(i[0]+i[3],i[1]+i[2]),n=Math.min(t/r,e/a);return n<1?i.map(s=>s*n):i}let pn=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="rect"}getDefaultAttrs(){return{x:0,y:0,width:0,height:0,radius:0,lineWidth:0}}createPath(t){var e=this,r=e.get("attrs"),{x:a,y:n,width:s,height:o,radius:l}=r;t.beginPath(),!l||!(s*o)?t.rect(a,n,s,o):(l=dn(l,s,o),t.moveTo(a+l[0],n),t.lineTo(a+s-l[1],n),t.arc(a+s-l[1],n+l[1],l[1],-Math.PI/2,0,!1),t.lineTo(a+s,n+o-l[2]),t.arc(a+s-l[2],n+o-l[2],l[2],0,Math.PI/2,!1),t.lineTo(a+l[3],n+o),t.arc(a+l[3],n+o-l[3],l[3],Math.PI/2,Math.PI,!1),t.lineTo(a,n+l[0]),t.arc(a+l[0],n+l[0],l[0],Math.PI,Math.PI*3/2,!1),t.closePath())}calculateBox(){var t=this.get("attrs"),{x:e,y:r,width:a,height:n}=t;return{minX:e,minY:r,maxX:e+a,maxY:r+n}}};O.Rect=pn;class mn extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!1,this._attrs.canStroke=!1,this._attrs.loading=!1,this._attrs.image=null,this._attrs.type="image"}getDefaultAttrs(){return{x:0,y:0,width:0,height:0}}createPath(t){var e=this.get("attrs"),{src:r}=e;if(!this.get("loading")){var a=this.get("image");if(a)this.drawImage(t,a);else if(r&&Image){this.set("loading",!0);var n=new Image;n.src=r,n.crossOrigin="Anonymous",n.onload=()=>{this.set("loading",!1),this.set("image",n),this.drawImage(t,n)}}}}drawImage(t,e){var r=this.get("attrs"),{x:a,y:n,width:s,height:o,sx:l,sy:f,swidth:h,sheight:u}=r;!T(l)&&!T(f)&&!T(h)&&!T(u)?t.drawImage(e,l,f,h,u,a,n,s,o):t.drawImage(e,a,n,s,o)}calculateBox(){var t=this.get("attrs"),{x:e,y:r,width:a,height:n}=t;return{minX:e,minY:r,maxX:e+a,maxY:r+n}}}O.Image=mn;let yn=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="circle"}getDefaultAttrs(){return{x:0,y:0,r:0,lineWidth:0}}createPath(t){var e=this.get("attrs"),{x:r,y:a,r:n}=e;t.beginPath(),t.arc(r,a,n,0,Math.PI*2,!1),t.closePath()}calculateBox(){var t=this.get("attrs"),{x:e,y:r,r:a}=t;return{minX:e-a,maxX:e+a,minY:r-a,maxY:r+a}}};O.Circle=yn;var bt=D.create(),Dt=D.create(),At=D.create();function xn(i,t,e,r,a){var n=Ke(a,i.x,t.x,e.x,r.x),s=Ke(a,i.y,t.y,e.y,r.y);return{x:n,y:s}}function Ke(i,t,e,r,a){var n=i*i,s=n*i;return t+(-t*3+i*(3*t-t*i))*i+(3*e+i*(-6*e+e*3*i))*i+(r*3-r*3*i)*n+a*s}function _n(i){for(var t=1/0,e=-1/0,r=1/0,a=-1/0,n={x:i[0],y:i[1]},s={x:i[2],y:i[3]},o={x:i[4],y:i[5]},l={x:i[6],y:i[7]},f=0;f<100;f++){var h=xn(n,s,o,l,f/100);h.x<t&&(t=h.x),h.x>e&&(e=h.x),h.y<r&&(r=h.y),h.y>a&&(a=h.y)}return{minX:t,minY:r,maxX:e,maxY:a}}function De(i,t){if(i.length!==0){for(var e=i[0],r=e.x,a=e.x,n=e.y,s=e.y,o=i.length,l=1;l<o;l++)e=i[l],r=Math.min(r,e.x),a=Math.max(a,e.x),n=Math.min(n,e.y),s=Math.max(s,e.y);return t=t/2||0,{minX:r-t,minY:n-t,maxX:a+t,maxY:s+t}}}function Sn(i,t,e,r,a){return a=a/2||0,{minX:Math.min(i,e)-a,minY:Math.min(t,r)-a,maxX:Math.max(i,e)+a,maxY:Math.max(t,r)+a}}function ce(i,t,e,r,a,n){var s=Math.abs(r-a);if(s%(Math.PI*2)<1e-4&&s>1e-4)return{minX:i-e,minY:t-e,maxX:i+e,maxY:t+e};bt[0]=Math.cos(r)*e+i,bt[1]=Math.sin(r)*e+t,Dt[0]=Math.cos(a)*e+i,Dt[1]=Math.sin(a)*e+t;var o=[0,0],l=[0,0];if(D.min(o,bt,Dt),D.max(l,bt,Dt),r=r%(Math.PI*2),r<0&&(r=r+Math.PI*2),a=a%(Math.PI*2),a<0&&(a=a+Math.PI*2),r>a&&!n?a+=Math.PI*2:r<a&&n&&(r+=Math.PI*2),n){var f=a;a=r,r=f}for(var h=0;h<a;h+=Math.PI/2)h>r&&(At[0]=Math.cos(h)*e+i,At[1]=Math.sin(h)*e+t,D.min(o,At,o),D.max(l,At,l));return{minX:o[0],minY:o[1],maxX:l[0],maxY:l[1]}}function Cn(i,t){for(var e=1/0,r=-1/0,a=1/0,n=-1/0,s=0,o=i.length;s<o;s++){var l=_n(i[s]);l.minX<e&&(e=l.minX),l.maxX>r&&(r=l.maxX),l.minY<a&&(a=l.minY),l.maxY>n&&(n=l.maxY)}return t=t/2||0,{minX:e-t,minY:a-t,maxX:r+t,maxY:n+t}}let Pn=class extends O{_initProperties(){super._initProperties(),this._attrs.canStroke=!0,this._attrs.type="line"}getDefaultAttrs(){return{x1:0,y1:0,x2:0,y2:0,lineWidth:1}}createPath(t){var e=this.get("attrs"),{x1:r,y1:a,x2:n,y2:s}=e;t.beginPath(),t.moveTo(r,a),t.lineTo(n,s)}calculateBox(){var t=this.get("attrs"),{x1:e,y1:r,x2:a,y2:n,lineWidth:s}=t;return Sn(e,r,a,n,s)}};O.Line=Pn;let Mn=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="polygon"}getDefaultAttrs(){return{points:null,lineWidth:0}}createPath(t){var e=this,r=e.get("attrs"),a=r.points;t.beginPath();for(var n=0,s=a.length;n<s;n++){var o=a[n];n===0?t.moveTo(o.x,o.y):t.lineTo(o.x,o.y)}t.closePath()}calculateBox(){var t=this.get("attrs"),{points:e}=t;return De(e)}};O.Polygon=Mn;function st(i){return[i.x,i.y]}function wn(i,t,e,r){var a=[],n,s,o=!!r,l,f,h,u,v,c;if(o){for(l=[1/0,1/0],f=[-1/0,-1/0],c=0,v=i.length;c<v;c++)h=st(i[c]),D.min(l,l,h),D.max(f,f,h);D.min(l,l,r[0]),D.max(f,f,r[1])}for(c=0,u=i.length;c<u;c++){if(h=st(i[c]),e)n=st(i[c?c-1:u-1]),s=st(i[(c+1)%u]);else if(c===0||c===u-1){a.push([h[0],h[1]]);continue}else n=st(i[c-1]),s=st(i[c+1]);var g=D.sub([],s,n);D.scale(g,g,t);var p=D.distance(h,n),y=D.distance(h,s),x=p+y;x!==0&&(p/=x,y/=x);var S=D.scale([],g,-p),d=D.scale([],g,y),m=D.add([],h,S),P=D.add([],h,d);o&&(D.max(m,m,l),D.min(m,m,f),D.max(P,P,l),D.min(P,P,f)),a.push([m[0],m[1]]),a.push([P[0],P[1]])}return e&&a.push(a.shift()),a}function Bt(i,t,e){for(var r=!!t,a=wn(i,.4,r,e),n=i.length,s=[],o,l,f,h=0;h<n-1;h++)o=a[h*2],l=a[h*2+1],f=i[h+1],s.push(["C",o[0],o[1],l[0],l[1],f.x,f.y]);return r&&(o=a[n],l=a[n+1],f=i[0],s.push(["C",o[0],o[1],l[0],l[1],f.x,f.y])),s}function Qe(i){for(var t=[],e=0,r=i.length;e<r;e++){var a=i[e];!isNaN(a.x)&&!isNaN(a.y)&&t.push(a)}return t}class Tn extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="polyline"}getDefaultAttrs(){return{points:null,lineWidth:1,smooth:!1}}createPath(t){var e=this,r=e.get("attrs"),{points:a,smooth:n}=r,s=Qe(a);if(t.beginPath(),s.length)if(t.moveTo(s[0].x,s[0].y),n)for(var o=[[0,0],[1,1]],l=Bt(s,!1,o),f=0,h=l.length;f<h;f++){var u=l[f];t.bezierCurveTo(u[1],u[2],u[3],u[4],u[5],u[6])}else{var v,c;for(v=1,c=s.length-1;v<c;v++)t.lineTo(s[v].x,s[v].y);t.lineTo(s[c].x,s[c].y)}}calculateBox(){var t=this.get("attrs"),{points:e,smooth:r,lineWidth:a}=t,n=Qe(e);if(r){for(var s=[],o=[[0,0],[1,1]],l=Bt(n,!1,o),f=0,h=l.length;f<h;f++){var u=l[f];if(f===0)s.push([n[0].x,n[0].y,u[1],u[2],u[3],u[4],u[5],u[6]]);else{var v=l[f-1];s.push([v[5],v[6],u[1],u[2],u[3],u[4],u[5],u[6]])}}return Cn(s,a)}return De(n,a)}}O.Polyline=Tn;let bn=class extends O{_initProperties(){super._initProperties(),this._attrs.canStroke=!0,this._attrs.canFill=!0,this._attrs.type="arc"}getDefaultAttrs(){return{x:0,y:0,r:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!1,lineWidth:1}}createPath(t){var e=this.get("attrs"),{x:r,y:a,r:n,startAngle:s,endAngle:o,anticlockwise:l}=e;t.beginPath(),s!==o&&t.arc(r,a,n,s,o,l)}calculateBox(){var t=this.get("attrs"),{x:e,y:r,r:a,startAngle:n,endAngle:s,anticlockwise:o}=t;return ce(e,r,a,n,s,o)}};O.Arc=bn;class Dn extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="sector"}getDefaultAttrs(){return{x:0,y:0,lineWidth:0,r:0,r0:0,startAngle:0,endAngle:Math.PI*2,anticlockwise:!1}}createPath(t){var e=this.get("attrs"),{x:r,y:a,startAngle:n,endAngle:s,r:o,r0:l,anticlockwise:f}=e;t.beginPath();var h=Math.cos(n),u=Math.sin(n);t.moveTo(h*l+r,u*l+a),t.lineTo(h*o+r,u*o+a),(Math.abs(s-n)>1e-4||n===0&&s<0)&&(t.arc(r,a,o,n,s,f),t.lineTo(Math.cos(s)*l+r,Math.sin(s)*l+a),l!==0&&t.arc(r,a,l,s,n,!f)),t.closePath()}calculateBox(){var t=this.get("attrs"),{x:e,y:r,r:a,r0:n,startAngle:s,endAngle:o,anticlockwise:l}=t,f=ce(e,r,a,s,o,l),h=ce(e,r,n,s,o,l);return{minX:Math.min(f.minX,h.minX),minY:Math.min(f.minY,h.minY),maxX:Math.max(f.maxX,h.maxX),maxY:Math.max(f.maxY,h.maxY)}}}O.Sector=Dn;var An={calcRotatedBox(i){var{width:t,height:e,rotate:r}=i,a=Math.abs(r);return{width:Math.abs(t*Math.cos(a)+e*Math.sin(a)),height:Math.abs(e*Math.cos(a)+t*Math.sin(a))}}},te=0,It={},In=5e3;let En=class extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="text"}getDefaultAttrs(){return{lineWidth:0,lineCount:1,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom",lineHeight:null,textArr:null}}_getFontStyle(){var t=this._attrs.attrs,{fontSize:e,fontFamily:r,fontWeight:a,fontStyle:n,fontVariant:s}=t;return"".concat(n," ").concat(s," ").concat(a," ").concat(e,"px ").concat(r)}_afterAttrsSet(){var t=this._attrs.attrs;if(t.font=this._getFontStyle(),t.text){var e=t.text,r=null,a=1;R(e)&&e.indexOf(`
`)!==-1&&(r=e.split(`
`),a=r.length),t.lineCount=a,t.textArr=r}this.set("attrs",t)}_getTextHeight(){var t=this._attrs.attrs;if(t.height)return t.height;var e=t.lineCount,r=t.fontSize*1;if(e>1){var a=this._getSpaceingY();return r*e+a*(e-1)}return r}_getSpaceingY(){var t=this._attrs.attrs,e=t.lineHeight,r=t.fontSize*1;return e?e-r:r*.14}drawInner(t){var e=this,r=e._attrs.attrs,a=r.text,n=r.x,s=r.y;if(!(T(a)||isNaN(n)||isNaN(s))){var o=r.textArr,l=r.fontSize*1,f=e._getSpaceingY();r.rotate&&(t.translate(n,s),t.rotate(r.rotate),n=0,s=0);var h=r.textBaseline,u;o&&(u=e._getTextHeight());var v;if(e.hasFill()){var c=r.fillOpacity;if(!T(c)&&c!==1&&(t.globalAlpha=c),o)for(var g=0,p=o.length;g<p;g++){var y=o[g];v=s+g*(f+l)-u+l,h==="middle"&&(v+=u-l-(u-l)/2),h==="top"&&(v+=u-l),t.fillText(y,n,v)}else t.fillText(a,n,s)}if(e.hasStroke())if(o)for(var x=0,S=o.length;x<S;x++){var d=o[x];v=s+x*(f+l)-u+l,h==="middle"&&(v+=u-l-(u-l)/2),h==="top"&&(v+=u-l),t.strokeText(d,n,v)}else t.strokeText(a,n,s)}}calculateBox(){var t=this,e=t._attrs.attrs,{x:r,y:a,textAlign:n,textBaseline:s}=e,o=t._getTextWidth();if(!o)return{minX:r,minY:a,maxX:r,maxY:a};var l=t._getTextHeight();if(e.rotate){var f=An.calcRotatedBox({width:o,height:l,rotate:e.rotate});o=f.width,l=f.height}var h={x:r,y:a-l};return n&&(n==="end"||n==="right"?h.x-=o:n==="center"&&(h.x-=o/2)),s&&(s==="top"?h.y+=l:s==="middle"&&(h.y+=l/2)),{minX:h.x,minY:h.y,maxX:h.x+o,maxY:h.y+l}}_getTextWidth(){var t=this._attrs.attrs;if(t.width)return t.width;var e=t.text,r=this.get("context");if(!T(e)){var a=t.font,n=t.textArr,s=e+""+a;if(It[s])return It[s];var o=0;if(n)for(var l=0,f=n.length;l<f;l++){var h=n[l];o=Math.max(o,oe(h,a,r).width)}else o=oe(e,a,r).width;return te>In&&(te=0,It={}),te++,It[s]=o,o}}};O.Text=En;class On extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.createPath=null,this._attrs.type="custom"}createPath(t){var e=this.get("createPath");e&&e.call(this,t)}calculateBox(){var t=this.get("calculateBox");return t&&t.call(this)}}O.Custom=On;const Fn=Object.freeze(Object.defineProperty({__proto__:null,Canvas:be,Group:ht,Matrix:k,Shape:O,Vector2:D},Symbol.toStringTag,{value:"Module"}));function Nn(i){var t=i.slice(0);if(t.length>0){var e=t[0],r=t[t.length-1];e.value!==0&&t.unshift({value:0}),r.value!==1&&t.push({value:1})}return t}class Yn{constructor(t){this.axisCfg={},this.frontPlot=null,this.backPlot=null,this.axes={},_(this,t)}_isHide(t){var e=this.axisCfg;return!e||e[t]===!1}_getLinePosition(t,e,r,a){var n="",s=t.field,o=this.axisCfg;return o[s]&&o[s].position?n=o[s].position:e==="x"?n=a?"left":"bottom":e==="y"&&(n=r?"right":"left",a&&(n="bottom")),n}_getLineCfg(t,e,r){var a,n,s=1;return e==="x"?(a={x:0,y:0},n={x:1,y:0}):r==="right"?(a={x:1,y:0},n={x:1,y:1}):(a={x:0,y:0},n={x:0,y:1},s=-1),t.transposed&&(s*=-1),{offsetFactor:s,start:t.convertPoint(a),end:t.convertPoint(n)}}_getCircleCfg(t){return{startAngle:t.startAngle,endAngle:t.endAngle,center:t.center,radius:t.circleRadius}}_getRadiusCfg(t){var e=t.transposed,r,a;return e?(r={x:0,y:0},a={x:1,y:0}):(r={x:0,y:0},a={x:0,y:1}),{offsetFactor:-1,start:t.convertPoint(r),end:t.convertPoint(a)}}_getAxisCfg(t,e,r,a,n){var s=this,o=this.axisCfg,l=e.getTicks(),f=Y({ticks:l,frontContainer:this.frontPlot,backContainer:this.backPlot},n,o[e.field]),h=[],u=f.label,v=l.length,c=0,g=0,p=u;return C(l,(y,x)=>{if(F(u)){var S=u(y.text,x,v);p=S?_({},b._defaultAxis.label,S):null}if(p){var d={};p.textAlign&&(d.textAlign=p.textAlign),p.textBaseline&&(d.textBaseline=p.textBaseline);var m=new O.Text({className:"axis-label",attrs:_({x:0,y:0,text:y.text,fontFamily:s.chart.get("canvas").get("fontFamily")},p),value:y.value,textStyle:d,top:p.top,context:s.chart.get("canvas").get("context")});h.push(m);var{width:P,height:M}=m.getBBox();c=Math.max(c,P),g=Math.max(g,M)}}),f.labels=h,f.maxWidth=c,f.maxHeight=g,f}_createAxis(t,e,r,a){var n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",s=this,o=t.type,l=t.transposed,f,h,u;if(o==="cartesian"||o==="rect"){var v=s._getLinePosition(e,a,n,l);u=b.axis[v],u.position=v,f="Line",h=v}else a==="x"&&!l||a==="y"&&l?(u=b.axis.circle,f="Circle",h="circle"):(u=b.axis.radius,f="Line",h="radius");var c=s._getAxisCfg(t,e,r,a,u);c.type=f,c.dimType=a,c.verticalScale=r,c.index=n,this.axes[h]=c}createAxis(t,e,r){var a=this;e&&!a._isHide(e.field)&&a._createAxis(t,e,r[0],"x"),C(r,function(P,M){a._isHide(P.field)||a._createAxis(t,P,e,"y",M)});var n=this.axes,s=a.chart;if(s._isAutoPadding()){var o=G(s.get("padding")),l=G(s.get("appendPadding")),f=s.get("legendRange")||{top:0,right:0,bottom:0,left:0},h=[o[0]==="auto"?f.top+l[0]*2:o[0],o[1]==="auto"?f.right+l[1]:o[1],o[2]==="auto"?f.bottom+l[2]:o[2],o[3]==="auto"?f.left+l[3]:o[3]];if(t.isPolar){var u=n.circle;if(u){var{maxHeight:v,maxWidth:c,labelOffset:g}=u;h[0]+=v+g,h[1]+=c+g,h[2]+=v+g,h[3]+=c+g}}else{if(n.right&&o[1]==="auto"){var{maxWidth:p,labelOffset:y}=n.right;h[1]+=p+y}if(n.left&&o[3]==="auto"){var{maxWidth:x,labelOffset:S}=n.left;h[3]+=x+S}if(n.bottom&&o[2]==="auto"){var{maxHeight:d,labelOffset:m}=n.bottom;h[2]+=d+m}}s.set("_padding",h),s._updateLayout(h)}C(n,P=>{var{type:M,grid:I,verticalScale:w,ticks:H,dimType:X,position:V,index:W}=P,B;if(t.isPolar?M==="Line"?B=a._getRadiusCfg(t):M==="Circle"&&(B=a._getCircleCfg(t)):B=a._getLineCfg(t,X,V),I&&w){var K=[],ma=Nn(w.getTicks());C(H,Ht=>{var Ne=[];C(ma,Ye=>{var Vt=X==="x"?Ht.value:Ye.value,Wt=X==="x"?Ye.value:Ht.value;if(Vt>=0&&Vt<=1&&Wt>=0&&Wt<=1){var ya=t.convertPoint({x:Vt,y:Wt});Ne.push(ya)}}),K.push({points:Ne,_id:"axis-"+X+W+"-grid-"+Ht.tickValue})}),P.gridPoints=K,t.isPolar&&(P.center=t.center,P.startAngle=t.startAngle,P.endAngle=t.endAngle)}B._id="axis-"+X,T(W)||(B._id="axis-"+X+W),new Ct[M](_(P,B))})}clear(){this.axes={},this.frontPlot.clear(),this.backPlot.clear()}}function Ae(i){var t=i.start,e=i.end,r=e.x-t.x,a=Math.abs(e.y-t.y),n=10,s;if(i.isPolar){var{circleRadius:o,center:l,startAngle:f,endAngle:h}=i;s=new O.Sector({attrs:{x:l.x,y:l.y,r:o,r0:0,startAngle:f,endAngle:h}})}else s=new O.Rect({attrs:{x:t.x,y:e.y-n,width:r,height:a+2*n}});return s.isClip=!0,s}function ge(i,t){var{x:e,y:r}=i,{tl:a,tr:n,br:s}=t;return e>=a.x&&e<=n.x&&r>=a.y&&r<=s.y}const Bn=Object.freeze(Object.defineProperty({__proto__:null,getClip:Ae,isPointInPlot:ge},Symbol.toStringTag,{value:"Module"}));function tr(i,t){return i-t}function Rn(i,t){var e=!1;return C(i,r=>{var a=[].concat(r.values),n=[].concat(t.values);if(r.type===t.type&&r.field===t.field&&a.sort(tr).toString()===n.sort(tr).toString()){e=!0;return}}),e}class E extends Ir{static initPlugins(){return{_plugins:[],_cacheId:0,register(t){var e=this._plugins;[].concat(t).forEach(r=>{e.indexOf(r)===-1&&e.push(r)}),this._cacheId++},unregister(t){var e=this._plugins;[].concat(t).forEach(r=>{var a=e.indexOf(r);a!==-1&&e.splice(a,1)}),this._cacheId++},clear(){this._plugins=[],this._cacheId++},count(){return this._plugins.length},getAll(){return this._plugins},notify(t,e,r){var a=this.descriptors(t),n=a.length,s,o,l,f,h;for(s=0;s<n;++s)if(o=a[s],l=o.plugin,h=l[e],typeof h=="function"&&(f=[t].concat(r||[]),h.apply(l,f)===!1))return!1;return!0},descriptors(t){var e=t._plugins||(t._plugins={});if(e.id===this._cacheId)return e.descriptors;var r=[],a=[];return this._plugins.concat(t&&t.get("plugins")||[]).forEach(n=>{var s=r.indexOf(n);s===-1&&(r.push(n),a.push({plugin:n}))}),e.descriptors=a,e.id=this._cacheId,a}}}getDefaultCfg(){return{id:null,rendered:!1,padding:b.padding,data:null,scales:{},geoms:[],colDefs:null,pixelRatio:b.pixelRatio,filters:null,appendPadding:b.appendPadding}}_syncYScales(){var t=this.get("syncY");if(t){var e=this.get("geoms"),r=[],a=[],n=[];C(e,s=>{var o=s.getYScale();o.isLinear&&(r.push(o),a.push(o.min),n.push(o.max))}),a=Math.min.apply(null,a),n=Math.max.apply(null,n),C(r,s=>{s.change({min:a}),s.change({max:n})})}}_getFieldsForLegend(){var t=[],e=this.get("geoms");return C(e,r=>{var a=r.get("attrOptions"),n=a.color;if(n&&n.field&&R(n.field)){var s=n.field.split("*");C(s,o=>{t.indexOf(o)===-1&&t.push(o)})}}),t}_getScaleData(t){var e=this.get("data"),r=this.get("filteredData");if(r.length){var a=this._getFieldsForLegend();a.indexOf(t)===-1&&(e=r)}return e}_adjustScale(){for(var t=this,e=t.get("scaleController"),r=this.get("geoms"),a=0;a<r.length;a++){var n=r[a];if(n.get("type")==="interval"){var s=n.getYScale();e.adjustStartZero(s)}}}_removeGeoms(){for(var t=this.get("geoms");t.length>0;){var e=t.shift();e.destroy()}}_clearGeoms(){for(var t=this.get("geoms"),e=0,r=t.length;e<r;e++){var a=t[e];a.clear()}}_clearInner(){this._clearGeoms(),E.plugins.notify(this,"clearInner"),this.emit(Wa),this.get("axisController")&&this.get("axisController").clear()}_initFilteredData(){var t=this.get("filters"),e=this.get("data")||[];t&&(e=e.filter(function(r){var a=!0;return C(t,function(n,s){if(n&&(a=n(r[s],r),!a))return!1}),a})),this.set("filteredData",e)}_changeGeomsData(){for(var t=this.get("geoms"),e=this.get("filteredData"),r=0,a=t.length;r<a;r++){var n=t[r];n.changeData(e)}}_initGeom(t){if(!t.get("isInit")){var e=this.get("coord"),r=this.get("filteredData"),a=this.get("colDefs"),n=this.get("middlePlot");t.set("chart",this),t.set("container",n.addGroup()),t.set("data",r),t.set("coord",e),t.set("colDefs",a),t.init(),this.emit(Ga,t)}}_initGeoms(){for(var t=this.get("geoms"),e=0,r=t.length;e<r;e++)this._initGeom(t[e])}_initCoord(){var t=this.get("plotRange"),e=_({type:"cartesian"},this.get("coordCfg"),{plot:t}),r=e.type,a=ft[J(r)],n=new a(e);this.set("coord",n)}_initLayout(){var t=this.get("_padding");t||(t=this.get("margin")||this.get("padding"),t=G(t));var e=t[0]==="auto"?0:t[0],r=t[1]==="auto"?0:t[1],a=t[2]==="auto"?0:t[2],n=t[3]==="auto"?0:t[3],s=this.get("width"),o=this.get("height"),l={x:n,y:e},f={x:s-r,y:o-a},h=this.get("plot");if(h){h.reset(l,f);return}var u=new ja({start:l,end:f});this.set("plotRange",u),this.set("plot",u)}_initCanvas(){var t=this;try{var e=new be({el:t.get("el")||t.get("id"),context:t.get("context"),pixelRatio:t.get("pixelRatio"),width:t.get("width"),height:t.get("height"),fontFamily:b.fontFamily});t.set("canvas",e),t.set("el",e.get("el")),t.set("width",e.get("width")),t.set("height",e.get("height"))}catch(r){throw r}E.plugins.notify(t,"afterCanvasInit")}_initLayers(){var t=this.get("canvas");this.set("backPlot",t.addGroup()),this.set("middlePlot",t.addGroup({zIndex:10})),this.set("frontPlot",t.addGroup({zIndex:20}))}_initEvents(){this.on(mt,()=>{this._initFilteredData(),this._changeGeomsData()}),this.on(he,()=>{this._initLayout();var t=this.get("coord");t&&t.reset(this.get("plot"))})}_initScaleController(){var t=new Ki({chart:this});this.set("colDefs",t.defs),this.set("scales",t.scales),this.set("scaleController",t)}_clearScaleController(){var t=this.get("scaleController");t.clear()}_init(){var t=this;t._initCanvas(),t._initLayout(),t._initLayers(),t._initEvents(),t._initScaleController(),t.set("axisController",new Yn({frontPlot:t.get("frontPlot").addGroup({className:"axisContainer"}),backPlot:t.get("backPlot").addGroup({className:"axisContainer"}),chart:t})),E.plugins.notify(t,"init")}constructor(t){super(t);var e=this;C(z,function(r,a){var n=mr(a);e[n]=function(s){var o=new r(s);return e.addGeom(o),o}}),e._init()}init(){this._initFilteredData(),this._initCoord(),E.plugins.notify(this,"beforeGeomInit"),this._initGeoms(),this._syncYScales(),this._adjustScale(),this.emit(le)}source(t,e){return this.set("data",t),e&&this.scale(e),this}scale(t,e){var r=this.get("scaleController");return r.setFieldDef(t,e),this}axis(t,e){var r=this.get("axisController");return t?(r.axisCfg=r.axisCfg||{},r.axisCfg[t]=e):r.axisCfg=null,this}coord(t,e){var r;return $(t)?r=t:(r=e||{},r.type=t||"cartesian"),this.set("coordCfg",r),this}filter(t,e){var r=this.get("filters")||{};r[t]=e,this.set("filters",r),this.get("rendered")&&this.emit(mt,this.get("data"))}render(){var t=this.get("rendered"),e=this.get("canvas"),r=this.get("geoms");t?(this._initGeoms(),this._adjustScale()):(this.init(),this.set("rendered",!0)),this.emit(La),E.plugins.notify(this,"beforeGeomDraw"),this._renderAxis();var a=this.get("middlePlot");if(this.get("limitInPlot")&&!a.attr("clip")){var n=this.get("coord"),s=Ae(n);s.set("canvas",a.get("canvas")),a.attr("clip",s)}this.emit($a);for(var o=0,l=r.length;o<l;o++){var f=r[o];f.paint()}return this.emit(Ha),E.plugins.notify(this,"afterGeomDraw"),e.sort(),this.get("frontPlot").sort(),E.plugins.notify(this,"beforeCanvasDraw"),e.draw(),this.emit(za),this}clear(){E.plugins.notify(this,"clear"),this.emit(Va),this._clearInner(),this._removeGeoms(),this._clearScaleController(),this.set("legendItems",null),this.set("filters",null),this.set("isUpdate",!1),this.set("_padding",null),this.set("rendered",!1);var t=this.get("canvas");return t.draw(),this}repaint(){var t=this.get("rendered");t&&(this.set("isUpdate",!0),this.set("legendItems",null),E.plugins.notify(this,"repaint"),this._clearInner(),this.render())}changeData(t){this.emit(Xa,t),this.set("data",t),E.plugins.notify(this,"changeData"),this.emit(mt,t),this.set("_padding",null),this.repaint()}changeSize(t,e){t?this.set("width",t):t=this.get("width"),e?this.set("height",e):e=this.get("height");var r=this.get("canvas");return r.changeSize(t,e),this.emit(he,{width:t,height:e}),this.repaint(),this}destroy(){this.clear();var t=this.get("canvas");t.destroy(),E.plugins.notify(this,"afterCanvasDestroyed"),this._interactions&&C(this._interactions,e=>{e.destroy()}),super.destroy()}getPosition(t){var e=this,r=e.get("coord"),a=e.getXScale(),n=e.getYScales()[0],s=a.field,o=a.scale(t[s]),l=n.field,f=n.scale(t[l]);return r.convertPoint({x:o,y:f})}getRecord(t){var e=this,r=e.get("coord"),a=e.getXScale(),n=e.getYScales()[0],s=r.invertPoint(t),o={};return o[a.field]=a.invert(s.x),o[n.field]=n.invert(s.y),o}getSnapRecords(t){var e=this.get("geoms")[0],r=[];return e&&(r=e.getSnapRecords(t)),r}createScale(t){var e=this._getScaleData(t),r=this.get("scaleController");return r.createScale(t,e)}addGeom(t){var e=this.get("geoms");e.push(t)}getXScale(){var t=this,e=t.get("geoms"),r=e[0].getXScale();return r}getYScales(){var t=this.get("geoms"),e=[];return C(t,function(r){var a=r.getYScale();e.indexOf(a)===-1&&e.push(a)}),e}getLegendItems(){if(this.get("legendItems"))return this.get("legendItems");var t={},e=[],r=this.get("geoms");return C(r,a=>{var n=a.getAttr("color");if(n){var s=n.getScale("color");if(s.isCategory&&!Rn(e,s)){e.push(s);var o=s.field,l=s.getTicks(),f=[];C(l,h=>{var u=h.text,v=u,c=h.value,g=s.invert(c),p=n.mapping(g).join("")||b.defaultColor,y={fill:p,radius:3,symbol:"circle",stroke:"#fff"};f.push({name:v,dataValue:g,checked:!0,marker:y})}),t[o]=f}}}),this.set("legendItems",t),t}registerPlugins(t){var e=this,r=e.get("plugins")||[];A(r)||(r=[r]),[].concat(t).forEach(a=>{r.indexOf(a)===-1&&(a.init&&a.init(e),r.push(a))}),E.plugins._cacheId++,e.set("plugins",r)}_renderAxis(){var t=this.get("axisController"),e=this.getXScale(),r=this.getYScales(),a=this.get("coord");E.plugins.notify(this,"beforeRenderAxis"),t.createAxis(a,e,r)}_isAutoPadding(){if(this.get("_padding"))return!1;var t=this.get("padding");return A(t)?t.indexOf("auto")!==-1:t==="auto"}_updateLayout(t){var e=this.get("width"),r=this.get("height"),a={x:t[3],y:t[0]},n={x:e-t[1],y:r-t[2]},s=this.get("plot"),o=this.get("coord");s.reset(a,n),o.reset(s)}}E.plugins=E.initPlugins();var kn=()=>null;b.version;function zr(i){var t=[],e=i.x,r=i.y;return r=A(r)?r:[r],r.forEach(function(a,n){var s={x:A(e)?e[n]:e,y:a};t.push(s)}),t}function Xr(i,t,e){if(!i.length)return[];var r=[],a=[],n;return C(i,function(s){n=s._origin?s._origin[t]:s[t],e?T(n)||a.push(s):A(n)&&T(n[0])||T(n)?a.length&&(r.push(a),a=[]):a.push(s)}),a.length&&r.push(a),r}var Ln=["circle","hollowCircle","rect"];N.registerFactory("point",{defaultShapeType:"circle",getDefaultPoints(i){return zr(i)}});function zn(i){var t={lineWidth:0,stroke:i.color,fill:i.color};return i.size&&(t.size=i.size),_(t,i.style),_({},b.shape.point,t)}function Xn(i,t,e){if(i.size!==0){var r=zn(i),a=r.r||r.size,n=i.x,s=A(i.y)?i.y:[i.y];e==="hollowCircle"&&(r.lineWidth=1,r.fill=null);for(var o=0,l=s.length;o<l;o++)return e==="rect"?t.addShape("Rect",{className:"point",attrs:_({x:n-a,y:s[o]-a,width:a*2,height:a*2},r)}):t.addShape("Circle",{className:"point",attrs:_({x:n,y:s[o],r:a},r)})}}C(Ln,function(i){N.registerShape("point",i,{draw(t,e){return Xn(t,e,i)}})});let Gn=class extends z{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="point",t.shapeType="point",t.generatePoints=!1,t}draw(t,e){var r=this,a=r.get("container");C(t,n=>{var s=n.shape,o=r.getDrawCfg(n);if(A(n.y)){var l=r.hasAdjust("stack");C(n.y,(f,h)=>{o.y=f,(!l||h!==0)&&r.drawShape(s,n,o,a,e)})}else T(n.y)||r.drawShape(s,n,o,a,e)})}};z.Point=Gn;N.registerFactory("line",{defaultShapeType:"line"});function $n(i){var t={strokeStyle:i.color};return i.size>=0&&(t.lineWidth=i.size),_(t,i.style),_({},b.shape.line,t)}function Hn(i,t,e,r){var a=i.points;if(a.length&&A(a[0].y)){for(var n=[],s=[],o=0,l=a.length;o<l;o++){var f=a[o],h=zr(f);s.push(h[0]),n.push(h[1])}if(i.isInCircle&&(n.push(n[0]),s.push(s[0])),i.isStack)return t.addShape("Polyline",{className:"line",attrs:_({points:n,smooth:r},e)});var u=t.addShape("Polyline",{className:"line",attrs:_({points:n,smooth:r},e)}),v=t.addShape("Polyline",{className:"line",attrs:_({points:s,smooth:r},e)});return[u,v]}return i.isInCircle&&a.push(a[0]),t.addShape("Polyline",{className:"line",attrs:_({points:a,smooth:r},e)})}var Vn=["line","smooth","dash"];C(Vn,function(i){N.registerShape("line",i,{draw(t,e){var r=i==="smooth",a=$n(t);return i==="dash"&&(a.lineDash=b.lineDash),Hn(t,e,a,r)}})});class Gr extends z{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="path",t.shapeType="line",t}getDrawCfg(t){var e=super.getDrawCfg(t);return e.isStack=this.hasAdjust("stack"),e}draw(t,e){var r=this,a=r.get("container"),n=r.getYScale(),s=r.get("connectNulls"),o=Xr(t,n.field,s),l=this.getDrawCfg(t[0]);l.origin=t,C(o,function(f,h){l.splitedIndex=h,l.points=f,r.drawShape(l.shape,t[0],l,a,e)})}}z.Path=Gr;let Wn=class extends Gr{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="line",t.sortable=!0,t}};z.Line=Wn;function er(i,t){return Math.abs(i-t)<1e-5}function rr(i){return!isNaN(i)&&!T(i)}function ar(i){for(var t=[],e=0,r=i.length;e<r;e++){var a=i[e];rr(a.x)&&rr(a.y)&&t.push(a)}return t}function jn(i,t){var e=!0;return C(i,function(r){if(!er(r.x,t.x)||!er(r.y,t.y))return e=!1,!1}),e}function Un(i,t,e,r,a){var n,s=i.concat(t);return a?n=e.addShape("Custom",{className:"area",attrs:_({points:s},r),createPath(o){var l=[[0,0],[1,1]],f=ar(this._attrs.attrs.points),h=f.length,u=f.slice(0,h/2),v=f.slice(h/2,h),c=Bt(u,!1,l);o.beginPath(),o.moveTo(u[0].x,u[0].y);for(var g=0,p=c.length;g<p;g++){var y=c[g];o.bezierCurveTo(y[1],y[2],y[3],y[4],y[5],y[6])}if(v.length){var x=Bt(v,!1,l);o.lineTo(v[0].x,v[0].y);for(var S=0,d=x.length;S<d;S++){var m=x[S];o.bezierCurveTo(m[1],m[2],m[3],m[4],m[5],m[6])}}o.closePath()},calculateBox(){var o=ar(this._attrs.attrs.points);return De(o)}}):n=e.addShape("Polyline",{className:"area",attrs:_({points:s},r)}),n}function qn(i,t,e){var r=this,a=i.points,n=[],s=[];C(a,function(l){s.push(l[0]),n.push(l[1])});var o=_({fillStyle:i.color},b.shape.area,i.style);return s.reverse(),n=r.parsePoints(n),s=r.parsePoints(s),i.isInCircle&&(n.push(n[0]),s.unshift(s[s.length-1]),jn(s,i.center)&&(s=[])),Un(n,s,t,o,e)}N.registerFactory("area",{defaultShapeType:"area",getDefaultPoints(i){var t=i.x,e=i.y,r=i.y0;e=A(e)?e:[r,e];var a=[];return a.push({x:t,y:e[0]},{x:t,y:e[1]}),a}});var Zn=["area","smooth"];C(Zn,function(i){N.registerShape("area",i,{draw(t,e){var r=i==="smooth";return qn.call(this,t,e,r)}})});class Jn extends z{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="area",t.shapeType="area",t.generatePoints=!0,t.sortable=!0,t}draw(t,e){var r=this,a=r.get("container"),n=this.getDrawCfg(t[0]),s=r.getYScale(),o=r.get("connectNulls"),l=Xr(t,s.field,o);n.origin=t,C(l,function(f,h){n.splitedIndex=h;var u=f.map(v=>v.points);n.points=u,r.drawShape(n.shape,t[0],n,a,e)})}}z.Area=Jn;var $r={initEvent(){var i=this.get("chart");i&&i.on(he,()=>{this.set("_width",null)})},getDefaultSize(){var i=this.get("defaultSize");if(!i){var t=this.get("coord"),e=this.getXScale(),r=this.get("dataArray"),a=dr(e.values),n=a.length,s=e.range,o=1/n,l=1;t&&t.isPolar?t.transposed&&n>1?l=b.widthRatio.multiplePie:l=b.widthRatio.rose:(e.isLinear&&(o*=s[1]-s[0]),l=b.widthRatio.column),o*=l,this.hasAdjust("dodge")&&(o=o/r.length),i=o,this.set("defaultSize",i)}return i},getDimWidth(i){var t=this.get("coord"),e=t.convertPoint({x:0,y:0}),r=t.convertPoint({x:i==="x"?1:0,y:i==="x"?0:1}),a=0;return e&&r&&(a=Math.sqrt(Math.pow(r.x-e.x,2)+Math.pow(r.y-e.y,2))),a},_getWidth(){var i=this.get("_width");if(!i){var t=this.get("coord");t&&t.isPolar&&!t.transposed?i=(t.endAngle-t.startAngle)*t.circleRadius:i=this.getDimWidth("x"),this.set("_width",i)}return i},_toNormalizedSize(i){var t=this._getWidth();return i/t},_toCoordSize(i){var t=this._getWidth();return t*i},getNormalizedSize(i){var t=this.getAttrValue("size",i);return T(t)?t=this.getDefaultSize():t=this._toNormalizedSize(t),t},getSize(i){var t=this.getAttrValue("size",i);if(T(t)){var e=this.getDefaultSize();t=this._toCoordSize(e)}return t}};function Hr(i){var{x:t,y:e,y0:r,size:a}=i,n=r,s=e;A(e)&&(s=e[1],n=e[0]);var o,l;return A(t)?(o=t[0],l=t[1]):(o=t-a/2,l=t+a/2),[{x:o,y:n},{x:o,y:s},{x:l,y:s},{x:l,y:n}]}function Kn(i){for(var t=[],e=[],r=0,a=i.length;r<a;r++){var n=i[r];t.push(n.x),e.push(n.y)}var s=Math.min.apply(null,t),o=Math.min.apply(null,e),l=Math.max.apply(null,t),f=Math.max.apply(null,e);return{x:s,y:o,width:l-s,height:f-o}}function Qn(i,t){var e=(i.x-t.x)/2+t.x,r=(i.y-t.y)/2+t.y;return{x:e,y:r}}N.registerFactory("interval",{defaultShapeType:"rect",getDefaultPoints(i){return Hr(i)}});N.registerShape("interval","rect",{draw(i,t){var e=this.parsePoints(i.points),r=_({fill:i.color},b.shape.interval,i.style);if(i.isInCircle){var a=e.slice(0);this._coord.transposed&&(a=[e[0],e[3],e[2],e[1]]);var{x:n,y:s}=i.center,o=[1,0],l=[a[0].x-n,a[0].y-s],f=[a[1].x-n,a[1].y-s],h=[a[2].x-n,a[2].y-s],u=D.angleTo(o,f),v=D.angleTo(o,h),c=D.length(l),g=D.length(f);return u>=1.5*Math.PI&&(u=u-2*Math.PI),v>=1.5*Math.PI&&(v=v-2*Math.PI),t.addShape("Sector",{className:"interval",attrs:_({x:n,y:s,r:g,r0:c,startAngle:u,endAngle:v},r)})}var p=Kn(e);return t.addShape("rect",{className:"interval",attrs:_(p,r)})}});["pyramid","funnel"].forEach(i=>{N.registerShape("interval",i,{getPoints(t){return t.size=t.size*2,Hr(t)},draw(t,e){var r=this.parsePoints(t.points),a=this.parsePoints(t.nextPoints),n=null;a?n=[r[0],r[1],a[1],a[0]]:(n=[r[0],r[1]],i==="pyramid"?n.push(Qn(r[2],r[3])):n.push(r[2],r[3]));var s=_({fill:t.color,points:n},b.shape.interval,t.style);return e.addShape("polygon",{className:"interval",attrs:s})}})});class ts extends z{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="interval",t.shapeType="interval",t.generatePoints=!0,t}constructor(t){super(t),_(this,$r)}init(){super.init(),this.initEvent()}createShapePointsCfg(t){var e=super.createShapePointsCfg(t);return e.size=this.getNormalizedSize(t),e}clearInner(){super.clearInner(),this.set("defaultSize",null)}}z.Interval=ts;N.registerFactory("polygon",{defaultShapeType:"polygon",getDefaultPoints(i){for(var t=[],{x:e,y:r}=i,a=0,n=e.length;a<n;a++)t.push({x:e[a],y:r[a]});return t}});N.registerShape("polygon","polygon",{draw(i,t){var e=this.parsePoints(i.points),r=_({fill:i.color,points:e},i.style);return t.addShape("Polygon",{className:"polygon",attrs:r})}});class es extends z{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="polygon",t.shapeType="polygon",t.generatePoints=!0,t}createShapePointsCfg(t){var e=super.createShapePointsCfg(t),r=this,a=e.x,n=e.y,s;if(!(A(a)&&A(n))){var o=r.getXScale(),l=r.getYScale(),f=o.values?o.values.length:o.ticks.length,h=l.values?l.values.length:l.ticks.length,u=.5*1/f,v=.5*1/h;o.isCategory&&l.isCategory?(a=[a-u,a-u,a+u,a+u],n=[n-v,n+v,n+v,n-v]):A(a)?(s=a,a=[s[0],s[0],s[1],s[1]],n=[n-v/2,n+v/2,n+v/2,n-v/2]):A(n)&&(s=n,n=[s[0],s[1],s[1],s[0]],a=[a-u/2,a-u/2,a+u/2,a+u/2]),e.x=a,e.y=n}return e}}z.Polygon=es;function rs(i){var t=i.sort(function(n,s){return n<s?1:-1}),e=t.length;if(e<4)for(var r=t[e-1],a=0;a<4-e;a++)t.push(r);return t}function as(i,t,e){var r=rs(t),a=[{x:i,y:r[0]},{x:i,y:r[1]},{x:i-e/2,y:r[2]},{x:i-e/2,y:r[1]},{x:i+e/2,y:r[1]},{x:i+e/2,y:r[2]},{x:i,y:r[2]},{x:i,y:r[3]}];return a}N.registerFactory("schema",{});N.registerShape("schema","candle",{getPoints(i){return as(i.x,i.y,i.size)},draw(i,t){var e=this.parsePoints(i.points),r=_({stroke:i.color,fill:i.color,lineWidth:1},i.style);return t.addShape("Custom",{className:"schema",attrs:r,createPath(a){a.beginPath(),a.moveTo(e[0].x,e[0].y),a.lineTo(e[1].x,e[1].y),a.moveTo(e[2].x,e[2].y);for(var n=3;n<6;n++)a.lineTo(e[n].x,e[n].y);a.closePath(),a.moveTo(e[6].x,e[6].y),a.lineTo(e[7].x,e[7].y)}})}});class is extends z{getDefaultCfg(){var t=super.getDefaultCfg();return t.type="schema",t.shapeType="schema",t.generatePoints=!0,t}constructor(t){super(t),_(this,$r)}init(){super.init(),this.initEvent()}createShapePointsCfg(t){var e=super.createShapePointsCfg(t);return e.size=this.getNormalizedSize(t),e}clearInner(){super.clearInner(),this.set("defaultSize",null)}}z.Schema=is;function ns(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var ss=zt,os=Xt,Vr=xt,ls=function(i){ns(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){this.xField=null,this.yField=null},e.processAdjust=function(a){this.processStack(a)},e.processStack=function(a){var n=this,s=n.xField,o=n.yField,l=a.length,f={positive:{},negative:{}};n.reverseOrder&&(a=a.slice(0).reverse());for(var h=0;h<l;h++)for(var u=a[h],v=0,c=u.length;v<c;v++){var g=u[v],p=g[s]||0,y=g[o],x=p.toString();if(y=ss(y)?y[1]:y,!os(y)){var S=y>=0?"positive":"negative";f[S][x]||(f[S][x]=0),g[o]=[f[S][x],y+f[S][x]],f[S][x]+=y}}},t}(Vr);Vr.Stack=ls;function hs(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var Wr=xt,fs=tt,us=1/2,vs=1/2,cs=function(i){hs(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){this.marginRatio=us,this.dodgeRatio=vs,this.adjustNames=["x","y"]},e.getDodgeOffset=function(a,n,s){var o=this,l=a.pre,f=a.next,h=f-l,u=h*o.dodgeRatio/s,v=o.marginRatio*u,c=1/2*(h-s*u-(s-1)*v)+((n+1)*u+n*v)-1/2*u-1/2*h;return(l+f)/2+c},e.processAdjust=function(a){var n=this,s=a.length,o=n.xField;fs(a,function(l,f){for(var h=0,u=l.length;h<u;h++){var v=l[h],c=v[o],g={pre:u===1?c-1:c-.5,next:u===1?c+1:c+.5},p=n.getDodgeOffset(g,f,s);v[o]=p}})},t}(Wr);Wr.Dodge=cs;var gs=_t,ds=function(t){return gs(t,"Function")},ps=ds,ms=zt,ir=ps,ys=tt,xs=function(t,e){if(ms(t)){var r=t[0],a=void 0;ir(e)?a=e(t[0]):a=t[0][e];var n=void 0;return ys(t,function(s){ir(e)?n=e(s):n=s[e],n>a&&(r=s,a=n)}),r}},_s=xs,Ss=function(t){for(var e=[],r=0;r<t.length;r++)e=e.concat(t[r]);return e},Cs=Ss;function Ps(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var Et=tt,Ms=_s,ct=zt,ws={merge:Cs},jr=xt,Ts=function(i){Ps(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){this.xField=null,this.yField=null,this.cacheMax=null,this.adjustNames=["y"],this.groupFields=null},e._getMax=function(a){var n=this,s=n.mergeData,o=Ms(s,function(h){var u=h[a];return ct(u)?Math.max.apply(null,u):u}),l=o[a],f=ct(l)?Math.max.apply(null,l):l;return f},e._getXValuesMax=function(){var a=this,n=a.yField,s=a.xField,o={},l=a.mergeData;return Et(l,function(f){var h=f[s],u=f[n],v=ct(u)?Math.max.apply(null,u):u;o[h]=o[h]||0,o[h]<v&&(o[h]=v)}),o},e.processAdjust=function(a){var n=this,s=ws.merge(a);n.mergeData=s,n._processSymmetric(a),n.mergeData=null},e._processSymmetric=function(a){var n=this,s=n.xField,o=n.yField,l=n._getMax(o),f=a[0][0],h;f&&ct(f[o])&&(h=n._getXValuesMax()),Et(a,function(u){Et(u,function(v){var c=v[o],g;if(ct(c)){var p=v[s],y=h[p];g=(l-y)/2;var x=[];Et(c,function(S){x.push(g+S)}),v[o]=x}else g=(l-c)/2,v[o]=[g,c+g]})})},t}(jr);jr.Symmetric=Ts;class bs extends ft{_initDefaultCfg(){this.type="polar",this.startAngle=-Math.PI/2,this.endAngle=Math.PI*3/2,this.inner=0,this.innerRadius=0,this.isPolar=!0,this.transposed=!1,this.center=null,this.radius=null}init(t,e){super.init(t,e);var r=this,a=r.inner||r.innerRadius,n=Math.abs(e.x-t.x),s=Math.abs(e.y-t.y),o,l;r.startAngle===-Math.PI&&r.endAngle===0?(o=Math.min(n/2,s),l={x:(t.x+e.x)/2,y:t.y}):(o=Math.min(n,s)/2,l={x:(t.x+e.x)/2,y:(t.y+e.y)/2});var f=r.radius;f>0&&f<=1&&(o=o*f),this.x={start:r.startAngle,end:r.endAngle},this.y={start:o*a,end:o},this.center=l,this.circleRadius=o}_convertPoint(t){var e=this,r=e.center,a=e.transposed,n=a?"y":"x",s=a?"x":"y",o=e.x,l=e.y,f=o.start+(o.end-o.start)*t[n],h=l.start+(l.end-l.start)*t[s];return{x:r.x+Math.cos(f)*h,y:r.y+Math.sin(f)*h}}_invertPoint(t){var e=this,{center:r,transposed:a,x:n,y:s}=e,o=a?"y":"x",l=a?"x":"y",f=[1,0,0,1,0,0];k.rotate(f,f,n.start);var h=[1,0];D.transformMat2d(h,h,f),h=[h[0],h[1]];var u=[t.x-r.x,t.y-r.y];if(D.zero(u))return{x:0,y:0};var v=D.angleTo(h,u,n.end<n.start);Math.abs(v-Math.PI*2)<.001&&(v=0);var c=D.length(u),g=v/(n.end-n.start);g=n.end-n.start>0?g:-g;var p=(c-s.start)/(s.end-s.start),y={};return y[o]=g,y[l]=p,y}}ft.Polar=bs;class Ds extends Ct{_initDefaultCfg(){super._initDefaultCfg(),this.startAngle=-Math.PI/2,this.endAngle=Math.PI*3/2,this.radius=null,this.center=null}getOffsetPoint(t){var{startAngle:e,endAngle:r}=this,a=e+(r-e)*t;return this._getCirclePoint(a)}_getCirclePoint(t,e){var r=this,a=r.center;return e=e||r.radius,{x:a.x+Math.cos(t)*e,y:a.y+Math.sin(t)*e}}getTextAlignInfo(t,e){var r=this,a=r.getOffsetVector(t,e),n,s="middle";return a[0]>0?n="left":a[0]<0?n="right":(n="center",a[1]>0?s="top":a[1]<0&&(s="bottom")),{textAlign:n,textBaseline:s}}getAxisVector(t){var e=this.center,r=this.offsetFactor;return[(t.y-e.y)*r,(t.x-e.x)*-1*r]}drawLine(t){var{center:e,radius:r,startAngle:a,endAngle:n}=this,s=this.getContainer(t.top);s.addShape("arc",{className:"axis-line",attrs:_({x:e.x,y:e.y,r,startAngle:a,endAngle:n},t)})}}Ct.Circle=Ds;var de={},As={get exports(){return de},set exports(i){de=i}};(function(i){(function(t){var e={},r=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,a=/\d\d?/,n=/\d{3}/,s=/\d{4}/,o=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,l=/\[([^]*?)\]/gm,f=function(){};function h(d,m){for(var P=[],M=0,I=d.length;M<I;M++)P.push(d[M].substr(0,m));return P}function u(d){return function(m,P,M){var I=M[d].indexOf(P.charAt(0).toUpperCase()+P.substr(1).toLowerCase());~I&&(m.month=I)}}function v(d,m){for(d=String(d),m=m||2;d.length<m;)d="0"+d;return d}var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],g=["January","February","March","April","May","June","July","August","September","October","November","December"],p=h(g,3),y=h(c,3);e.i18n={dayNamesShort:y,dayNames:c,monthNamesShort:p,monthNames:g,amPm:["am","pm"],DoFn:function(m){return m+["th","st","nd","rd"][m%10>3?0:(m-m%10!==10)*m%10]}};var x={D:function(d){return d.getDate()},DD:function(d){return v(d.getDate())},Do:function(d,m){return m.DoFn(d.getDate())},d:function(d){return d.getDay()},dd:function(d){return v(d.getDay())},ddd:function(d,m){return m.dayNamesShort[d.getDay()]},dddd:function(d,m){return m.dayNames[d.getDay()]},M:function(d){return d.getMonth()+1},MM:function(d){return v(d.getMonth()+1)},MMM:function(d,m){return m.monthNamesShort[d.getMonth()]},MMMM:function(d,m){return m.monthNames[d.getMonth()]},YY:function(d){return String(d.getFullYear()).substr(2)},YYYY:function(d){return v(d.getFullYear(),4)},h:function(d){return d.getHours()%12||12},hh:function(d){return v(d.getHours()%12||12)},H:function(d){return d.getHours()},HH:function(d){return v(d.getHours())},m:function(d){return d.getMinutes()},mm:function(d){return v(d.getMinutes())},s:function(d){return d.getSeconds()},ss:function(d){return v(d.getSeconds())},S:function(d){return Math.round(d.getMilliseconds()/100)},SS:function(d){return v(Math.round(d.getMilliseconds()/10),2)},SSS:function(d){return v(d.getMilliseconds(),3)},a:function(d,m){return d.getHours()<12?m.amPm[0]:m.amPm[1]},A:function(d,m){return d.getHours()<12?m.amPm[0].toUpperCase():m.amPm[1].toUpperCase()},ZZ:function(d){var m=d.getTimezoneOffset();return(m>0?"-":"+")+v(Math.floor(Math.abs(m)/60)*100+Math.abs(m)%60,4)}},S={D:[a,function(d,m){d.day=m}],Do:[new RegExp(a.source+o.source),function(d,m){d.day=parseInt(m,10)}],M:[a,function(d,m){d.month=m-1}],YY:[a,function(d,m){var P=new Date,M=+(""+P.getFullYear()).substr(0,2);d.year=""+(m>68?M-1:M)+m}],h:[a,function(d,m){d.hour=m}],m:[a,function(d,m){d.minute=m}],s:[a,function(d,m){d.second=m}],YYYY:[s,function(d,m){d.year=m}],S:[/\d/,function(d,m){d.millisecond=m*100}],SS:[/\d{2}/,function(d,m){d.millisecond=m*10}],SSS:[n,function(d,m){d.millisecond=m}],d:[a,f],ddd:[o,f],MMM:[o,u("monthNamesShort")],MMMM:[o,u("monthNames")],a:[o,function(d,m,P){var M=m.toLowerCase();M===P.amPm[0]?d.isPm=!1:M===P.amPm[1]&&(d.isPm=!0)}],ZZ:[/([\+\-]\d\d:?\d\d|Z)/,function(d,m){m==="Z"&&(m="+00:00");var P=(m+"").match(/([\+\-]|\d\d)/gi),M;P&&(M=+(P[1]*60)+parseInt(P[2],10),d.timezoneOffset=P[0]==="+"?M:-M)}]};S.dd=S.d,S.dddd=S.ddd,S.DD=S.D,S.mm=S.m,S.hh=S.H=S.HH=S.h,S.MM=S.M,S.ss=S.s,S.A=S.a,e.masks={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},e.format=function(d,m,P){var M=P||e.i18n;if(typeof d=="number"&&(d=new Date(d)),Object.prototype.toString.call(d)!=="[object Date]"||isNaN(d.getTime()))throw new Error("Invalid Date in fecha.format");m=e.masks[m]||m||e.masks.default;var I=[];return m=m.replace(l,function(w,H){return I.push(H),"??"}),m=m.replace(r,function(w){return w in x?x[w](d,M):w.slice(1,w.length-1)}),m.replace(/\?\?/g,function(){return I.shift()})},e.parse=function(d,m,P){var M=P||e.i18n;if(typeof m!="string")throw new Error("Invalid format in fecha.parse");if(m=e.masks[m]||m,d.length>1e3)return!1;var I=!0,w={};if(m.replace(r,function(V){if(S[V]){var W=S[V],B=d.search(W[0]);~B?d.replace(W[0],function(K){return W[1](w,K,M),d=d.substr(B+K.length),K}):I=!1}return S[V]?"":V.slice(1,V.length-1)}),!I)return!1;var H=new Date;w.isPm===!0&&w.hour!=null&&+w.hour!=12?w.hour=+w.hour+12:w.isPm===!1&&+w.hour==12&&(w.hour=0);var X;return w.timezoneOffset!=null?(w.minute=+(w.minute||0)-+w.timezoneOffset,X=new Date(Date.UTC(w.year||H.getFullYear(),w.month||0,w.day||1,w.hour||0,w.minute||0,w.second||0,w.millisecond||0))):X=new Date(w.year||H.getFullYear(),w.month||0,w.day||1,w.hour||0,w.minute||0,w.second||0,w.millisecond||0),X},i.exports?i.exports=e:t.fecha=e})(xa)})(As);var Is=_t,Es=function(t){return Is(t,"Date")},Os=Es,Fs=we,Ns=Os,Ys={toTimeStamp:function(t){return Fs(t)&&(t.indexOf("T")>0?t=new Date(t).getTime():t=new Date(t.replace(/-/ig,"/")).getTime()),Ns(t)&&(t=t.getTime()),t}};function Bs(i,t){i.prototype=Object.create(t.prototype),i.prototype.constructor=i,i.__proto__=t}var Rs=St,ks=Zi,Ls=de,zs=Me,Xs=Ys,nr=tt,Gs=Gt,$s=Pe,Hs=we,Vs=function(i){Bs(t,i);function t(){return i.apply(this,arguments)||this}var e=t.prototype;return e._initDefaultCfg=function(){i.prototype._initDefaultCfg.call(this),this.type="timeCat",this.sortable=!0,this.tickCount=5,this.mask="YYYY-MM-DD"},e.init=function(){var a=this,n=this.values;nr(n,function(s,o){n[o]=a._toTimeStamp(s)}),this.sortable&&n.sort(function(s,o){return s-o}),a.ticks||(a.ticks=this.calculateTicks())},e.calculateTicks=function(){var a=this,n=a.tickCount,s;if(n){var o=zs({maxCount:n,data:a.values,isRounding:a.isRounding});s=o.ticks}else s=a.values;return s},e.translate=function(a){a=this._toTimeStamp(a);var n=this.values.indexOf(a);return n===-1&&(Gs(a)&&a<this.values.length?n=a:n=NaN),n},e.scale=function(a){var n=this.rangeMin(),s=this.rangeMax(),o=this.translate(a),l;return this.values.length===1||isNaN(o)?l=o:o>-1?l=o/(this.values.length-1):l=0,n+l*(s-n)},e.getText=function(a){var n="",s=this.translate(a);s>-1?n=this.values[s]:n=a;var o=this.formatter;return n=parseInt(n,10),n=o?o(n):Ls.format(n,this.mask),n},e.getTicks=function(){var a=this,n=this.ticks,s=[];return nr(n,function(o){var l;$s(o)?l=o:l={text:Hs(o)?o:a.getText(o),value:a.scale(o),tickValue:o},s.push(l)}),s},e._toTimeStamp=function(a){return Xs.toTimeStamp(a)},t}(ks);Rs.TimeCat=Vs;var sr={min:0,median:.5,max:1};class L{_initDefaultCfg(){}constructor(t){this._initDefaultCfg(),Y(this,t)}_getNormalizedValue(t,e){var r;return T(sr[t])?r=e.scale(t):r=sr[t],r}parsePercentPoint(t,e){var r=parseFloat(e[0])/100,a=parseFloat(e[1])/100,n=t.start,s=t.end,o=Math.abs(n.x-s.x),l=Math.abs(n.y-s.y),f=o*r+Math.min(n.x,s.x),h=l*a+Math.min(n.y,s.y);return{x:f,y:h}}parsePoint(t,e){var r=this,a=r.xScale,n=r.yScales;if(F(e)&&(e=e(a,n)),R(e[0])&&e[0].indexOf("%")!==-1&&!isNaN(e[0].slice(0,-1)))return this.parsePercentPoint(t,e);var s=r._getNormalizedValue(e[0],a),o=r._getNormalizedValue(e[1],n[0]),l=t.convertPoint({x:s,y:o});return r.limitInPlot?s>=0&&s<=1&&o>=0&&o<=1?l:null:l}render(){}repaint(){this.remove();var{coord:t,container:e,canvas:r}=this;e&&!e.isDestroyed()&&(this.render(t,e),r.draw())}remove(){var{element:t}=this;t&&t.remove(!0)}changeVisible(t){var e=this;e.visible=t;var r=e.element;r&&(r.set?r.set("visible",t):r.style.display=t?"":"none")}}class Ws extends L{_initDefaultCfg(){this.type="arc",this.start=[],this.end=[],this.style={stroke:"#999",lineWidth:1}}render(t,e){var r=this,a=r.parsePoint(t,r.start),n=r.parsePoint(t,r.end);if(!(!a||!n)){var s=t.center,o=Math.sqrt((a.x-s.x)*(a.x-s.x)+(a.y-s.y)*(a.y-s.y)),l=Math.atan2(a.y-s.y,a.x-s.x),f=Math.atan2(n.y-s.y,n.x-s.x),h=e.addShape("arc",{className:"guide-arc",attrs:_({x:s.x,y:s.y,r:o,startAngle:l,endAngle:f},r.style)});return r.element=h,h}}}L.Arc=Ws;function js(i,t,e,r){var a=[];return i==="left"&&t==="top"?(a[0]=0,a[1]=0):i==="right"&&t==="top"?(a[0]=-e,a[1]=0):i==="left"&&t==="bottom"?(a[0]=0,a[1]=Math.floor(-r)):i==="right"&&t==="bottom"?(a[0]=Math.floor(-e),a[1]=Math.floor(-r)):i==="right"&&t==="middle"?(a[0]=Math.floor(-e),a[1]=Math.floor(-r/2)):i==="left"&&t==="middle"?(a[0]=0,a[1]=Math.floor(-r/2)):i==="center"&&t==="bottom"?(a[0]=Math.floor(-e/2),a[1]=Math.floor(-r)):i==="center"&&t==="top"?(a[0]=Math.floor(-e/2),a[1]=0):(a[0]=Math.floor(-e/2),a[1]=Math.floor(-r/2)),a}function ee(i,t){for(var e in t)t.hasOwnProperty(e)&&(i.style[e]=t[e]);return i}function or(i){var t=document.createElement("div");return i=i.replace(/(^\s*)|(\s*$)/g,""),t.innerHTML=""+i,t.childNodes[0]}class Us extends L{_initDefaultCfg(){this.type="html",this.position=null,this.alignX="center",this.alignY="middle",this.offsetX=null,this.offsetY=null,this.html=null}render(t,e){var r=this,a=r.parsePoint(t,r.position);if(a){var n=or(r.html);n=ee(n,{position:"absolute",top:Math.floor(a.y)+"px",left:Math.floor(a.x)+"px",visibility:"hidden"});var s=e.get("canvas").get("el"),o=s.parentNode;o=ee(o,{position:"relative"});var l=or('<div class="guideWapper" style="position: absolute;top: 0; left: 0;"></div>');o.appendChild(l),l.appendChild(n);var f=s.offsetTop,h=s.offsetLeft,{alignX:u,alignY:v,offsetX:c,offsetY:g}=r,p=xe(n),y=_e(n),x=js(u,v,p,y);a.x=a.x+x[0]+h,a.y=a.y+x[1]+f,c&&(a.x+=c),g&&(a.y+=g),ee(n,{top:Math.floor(a.y)+"px",left:Math.floor(a.x)+"px",visibility:"visible"}),r.element=l}}remove(){var t=this.element;t&&t.parentNode&&t.parentNode.removeChild(t)}}L.Html=Us;class qs extends L{_initDefaultCfg(){this.type="line",this.start=[],this.end=[],this.style={stroke:"#000",lineWidth:1}}render(t,e){var r=[];if(r[0]=this.parsePoint(t,this.start),r[1]=this.parsePoint(t,this.end),!(!r[0]||!r[1])){var a=e.addShape("Line",{className:"guide-line",attrs:_({x1:r[0].x,y1:r[0].y,x2:r[1].x,y2:r[1].y},this.style)});return this.element=a,a}}}L.Line=qs;class Zs extends L{_initDefaultCfg(){this.type="rect",this.start=[],this.end=[],this.style={fill:"#CCD7EB",opacity:.4}}render(t,e){var r=this.parsePoint(t,this.start),a=this.parsePoint(t,this.end);if(!(!r||!a)){var n=e.addShape("rect",{className:"guide-rect",attrs:_({x:Math.min(r.x,a.x),y:Math.min(r.y,a.y),width:Math.abs(a.x-r.x),height:Math.abs(r.y-a.y)},this.style)});return this.element=n,n}}}L.Rect=Zs;class Js extends L{_initDefaultCfg(){this.type="text",this.position=null,this.content=null,this.style={fill:"#000"},this.offsetX=0,this.offsetY=0}render(t,e){var r=this.position,a=this.parsePoint(t,r);if(a){var{content:n,style:s,offsetX:o,offsetY:l}=this;o&&(a.x+=o),l&&(a.y+=l);var f=e.addShape("text",{className:"guide-text",attrs:_({x:a.x,y:a.y,text:n},s)});return this.element=f,f}}}L.Text=Js;class Ks extends L{_initDefaultCfg(){this.type="tag",this.position=null,this.content=null,this.direct="tl",this.autoAdjust=!0,this.offsetX=0,this.offsetY=0,this.side=4,this.background={padding:5,radius:2,fill:"#1890FF"},this.textStyle={fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},this.withPoint=!0,this.pointStyle={fill:"#1890FF",r:3,lineWidth:1,stroke:"#fff"}}_getDirect(t,e,r,a){var n=this.direct,s=this.side,o=t.get("canvas"),l=o.get("width"),f=o.get("height"),{x:h,y:u}=e,v=n[0],c=n[1];v==="t"&&u-s-a<0?v="b":v==="b"&&u+s+a>f&&(v="t");var g=v==="c"?s:0;return c==="l"&&h-g-r<0?c="r":c==="r"&&h+g+r>l?c="l":c==="c"&&(r/2+h+g>l?c="l":h-r/2-g<0&&(c="r")),n=v+c,n}render(t,e){var r=this.parsePoint(t,this.position);if(r&&!(isNaN(r.x)||isNaN(r.y))){var{content:a,background:n,textStyle:s}=this,o=[],l=e.addGroup({className:"guide-tag"});if(this.withPoint){var f=l.addShape("Circle",{className:"guide-tag-point",attrs:_({x:r.x,y:r.y},this.pointStyle)});o.push(f)}var h=l.addGroup(),u=h.addShape("text",{className:"guide-tag-text",zIndex:1,attrs:_({x:0,y:0,text:a},s)});o.push(u);var v=u.getBBox(),c=G(n.padding),g=v.width+c[1]+c[3],p=v.height+c[0]+c[2],y=v.minY-c[0],x=v.minX-c[3],S=h.addShape("rect",{className:"guide-tag-bg",zIndex:-1,attrs:_({x,y,width:g,height:p},n)});o.push(S);var d=this.autoAdjust?this._getDirect(e,r,g,p):this.direct,m=this.side,P=r.x+this.offsetX,M=r.y+this.offsetY,I,w=G(n.radius);d==="tl"?(I=[{x:g+x-m-1,y:p+y-1},{x:g+x,y:p+y-1},{x:g+x,y:p+m+y}],w[2]=0,P=P-g,M=M-m-p):d==="cl"?(I=[{x:g+x-1,y:(p-m)/2+y-1},{x:g+x-1,y:(p+m)/2+y+1},{x:g+m+x,y:p/2+y}],P=P-g-m,M=M-p/2):d==="bl"?(I=[{x:g+x,y:-m+y},{x:g+x-m-1,y:y+1},{x:g+x,y:y+1}],w[1]=0,P=P-g,M=M+m):d==="bc"?(I=[{x:g/2+x,y:-m+y},{x:(g-m)/2+x-1,y:y+1},{x:(g+m)/2+x+1,y:y+1}],P=P-g/2,M=M+m):d==="br"?(I=[{x,y:y-m},{x,y:y+1},{x:x+m+1,y:y+1}],w[0]=0,M=M+m):d==="cr"?(I=[{x:x-m,y:p/2+y},{x:x+1,y:(p-m)/2+y-1},{x:x+1,y:(p+m)/2+y+1}],P=P+m,M=M-p/2):d==="tr"?(I=[{x,y:p+m+y},{x,y:p+y-1},{x:m+x+1,y:p+y-1}],w[3]=0,M=M-p-m):d==="tc"&&(I=[{x:(g-m)/2+x-1,y:p+y-1},{x:(g+m)/2+x+1,y:p+y-1},{x:g/2+x,y:p+m+y}],P=P-g/2,M=M-p-m);var H=h.addShape("Polygon",{className:"guide-tag-side",zIndex:0,attrs:{points:I,fill:n.fill}});return o.push(H),S.attr("radius",w),h.moveTo(P-x,M-y),h.sort(),this.element=l,o}}}L.Tag=Ks;class Qs extends L{_initDefaultCfg(){this.type="point",this.position=null,this.offsetX=0,this.offsetY=0,this.style={fill:"#1890FF",r:3,lineWidth:1,stroke:"#fff"}}render(t,e){var r=this.parsePoint(t,this.position);if(!r)return null;var a=e.addShape("Circle",{className:"guide-point",attrs:_({x:r.x+this.offsetX,y:r.y+this.offsetY},this.style)});return this.element=a,a}}L.Point=Qs;var to={circle(i,t,e,r){r.arc(i,t,e,0,Math.PI*2,!1)},square(i,t,e,r){r.moveTo(i-e,t-e),r.lineTo(i+e,t-e),r.lineTo(i+e,t+e),r.lineTo(i-e,t+e),r.closePath()}};class Ie extends O{_initProperties(){super._initProperties(),this._attrs.canFill=!0,this._attrs.canStroke=!0,this._attrs.type="marker"}getDefaultAttrs(){return{x:0,y:0,lineWidth:0}}createPath(t){var e=this.get("attrs"),{x:r,y:a,radius:n}=e,s=e.symbol||"circle",o;F(s)?o=s:o=to[s],t.beginPath(),o(r,a,n,t,this)}calculateBox(){var t=this.get("attrs"),{x:e,y:r,radius:a}=t;return{minX:e-a,minY:r-a,maxX:e+a,maxY:r+a}}}var eo=3;class pe{getDefaultCfg(){return{showTitle:!1,title:null,items:null,titleGap:12,itemGap:10,itemMarginBottom:12,itemFormatter:null,itemWidth:null,wordSpace:6,x:0,y:0,layout:"horizontal",joinString:": "}}constructor(t){Y(this,this.getDefaultCfg(),t),this._init(),this._renderTitle(),this._renderItems()}_init(){var t=new ht({zIndex:this.zIndex||0});this.container=t;var e=t.addGroup();this.wrapper=e;var r=e.addGroup({className:"itemsGroup"});this.itemsGroup=r,this.parent&&this.parent.add(t)}_renderTitle(t){t=t||this.title;var e=this.titleShape,r=0;if(this.showTitle&&t){if(e&&!e.get("destroyed"))e.attr("text",t);else{var{wrapper:a,titleStyle:n}=this;e=a.addShape("text",{className:"title",attrs:_({x:0,y:0,text:t},n)}),this.titleShape=e}r=e.getBBox().height+this.titleGap}this._titleHeight=r}_renderItems(t){var e=this;t=t||e.items,t&&(e.reversed&&t.reverse(),C(t,(r,a)=>{e._addItem(r,a)}),t.length>1&&this._adjustItems(),this._renderBackground())}_renderBackground(){var t=this.background;if(t){var e=this.container,r=this.wrapper,{minX:a,minY:n,width:s,height:o}=r.getBBox(),l=t.padding||[0,0,0,0];l=G(l);var f=_({x:a-l[3],y:n-l[0],width:s+l[1]+l[3],height:o+l[0]+l[2]},t),h=this.backShape;h?h.attr(f):h=e.addShape("Rect",{zIndex:-1,attrs:f}),this.backShape=h,e.sort()}}_addItem(t){var e=this.itemsGroup,r=e.addGroup({name:t.name,value:t.value,dataValue:t.dataValue,checked:t.checked}),{unCheckStyle:a,unCheckColor:n,nameStyle:s,valueStyle:o,wordSpace:l}=this,{marker:f,value:h}=t,u=0;if(n&&(a.fill=n),f){var v=f.radius||eo,c=_({x:v,y:this._titleHeight},f);t.checked===!1&&_(c,a);var g=new Ie({className:"item-marker",attrs:c});r.add(g),u+=g.getBBox().width+l}var p,y=t.name;if(y){var x=this.joinString||"";y=h?y+x:y,p=r.addShape("text",{className:"name",attrs:_({x:u,y:this._titleHeight,text:this._formatItemValue(y)},s,t.checked===!1?a:null)})}if(h){var S=u;p&&(S+=p.getBBox().width),r.addShape("text",{className:"value",attrs:_({x:S,y:this._titleHeight,text:h},o,t.checked===!1?a:null)})}return r}_formatItemValue(t){var e=this.itemFormatter;return e&&(t=e.call(this,t)),t}_getMaxItemWidth(){var t,e=this.itemWidth;if(Q(e)||T(e))return e;if(e==="auto"){for(var r=this.itemsGroup,a=r.get("children"),n=a.length,s=0,o=0;o<n;o++){var{width:l}=a[o].getBBox();s=Math.max(s,l)}var f=this.maxLength,h=this.itemGap,u=(f-h)/2,v=(f-h*2)/3;return n===2?t=Math.max(s,u):s<=v?t=v:s<=u?t=u:t=s,t}}_adjustHorizontal(){for(var{maxLength:t,itemsGroup:e}=this,r=e.get("children"),{itemGap:a,itemMarginBottom:n}=this,s=this._titleHeight,o=0,l=0,f,h,u=this._getMaxItemWidth(),v=[],c=0,g=r.length;c<g;c++){var p=r[c],y=p.getBBox(),x=y.height,S=y.width;f=u||S,h=x+n,f-(t-l)>1e-4&&(o++,l=0),p.moveTo(l,o*h),v.push({x:l,y:o*h+s-x/2,width:S*1.375,height:x*1.375}),l+=f+a}this.legendHitBoxes=v}_adjustVertical(){for(var{maxLength:t,itemsGroup:e}=this,{itemGap:r,itemMarginBottom:a,itemWidth:n}=this,s=this._titleHeight,o=e.get("children"),l=0,f,h,u=0,v=0,c=[],g=0,p=o.length;g<p;g++){var y=o[g],x=y.getBBox();f=x.width,h=x.height,Q(n)?u=n+r:f>u&&(u=f+r),t-l<h?(l=0,v+=u,y.moveTo(v,0),c.push({x:v,y:s-h/2,width:f*1.375,height:h*1.375})):(y.moveTo(v,l),c.push({x:v,y:l-h/2+s,width:f*1.375,height:h*1.375})),l+=h+a}this.legendHitBoxes=c}_adjustItems(){var t=this.layout;t==="horizontal"?this._adjustHorizontal():this._adjustVertical()}moveTo(t,e){this.x=t,this.y=e;var r=this.container;return r&&r.moveTo(t,e),this}setItems(t){this.clearItems(),this._renderItems(t)}setTitle(t){this._renderTitle(t)}clearItems(){var t=this.itemsGroup;t.clear()}getWidth(){var t=this.container,e=t.getBBox();return e.width}getHeight(){var t=this.container,e=t.getBBox();return e.height}show(){var t=this.container;t.show()}hide(){var t=this.container;t.hide()}clear(){var t=this.container;t.clear(),t.remove(!0)}}class lr{getDefaultCfg(){return{x:0,y:0,content:"",textStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle",fontFamily:"Arial"},background:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},width:0,height:0,className:""}}constructor(t){Y(this,this.getDefaultCfg(),t),this._init();var{content:e,x:r,y:a}=this;T(e)||this.updateContent(e),this.updatePosition(r,a)}_init(){var{content:t,textStyle:e,background:r,className:a,visible:n}=this,s=new ht({className:a,zIndex:0,visible:n}),o=s.addShape("Text",{className:a+"-text",zIndex:1,attrs:_({text:t,x:0,y:0},e)}),l=s.addShape("Rect",{className:a+"-bg",zIndex:-1,attrs:_({x:0,y:0,width:0,height:0},r)});s.sort(),this.container=s,this.textShape=o,this.backgroundShape=l}_getBBox(){var t=this.textShape,e=this.background,r=t.getBBox(),a=G(e.padding),n=r.width+a[1]+a[3],s=r.height+a[0]+a[2],o=r.minX-a[3],l=r.minY-a[0];return{x:o,y:l,width:n,height:s}}updateContent(t){var{textShape:e,backgroundShape:r}=this;if(!T(t)){$(t)||(t={text:t}),e.attr(t);var{x:a,y:n,width:s,height:o}=this._getBBox(),l=this.width||s,f=this.height||o;r.attr({x:a,y:n,width:l,height:f}),this._width=l,this._height=f,this.content=t.text}}updatePosition(t,e){var r=this.container,{x:a,y:n}=this._getBBox();r.moveTo(t-a,e-n),this.x=t-a,this.y=e-n}getWidth(){return this._width}getHeight(){return this._height}show(){this.container.show()}hide(){this.container.hide()}clear(){var t=this.container;t.clear(),t.remove(!0),this.container=null,this.textShape=null,this.backgroundShape=null}}var Z=4;let ro=class{getDefaultCfg(){return{showCrosshairs:!1,crosshairsStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},crosshairsType:"y",showXTip:!1,showYTip:!1,xTip:null,xTipBackground:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},xTipTextStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},yTip:null,yTipBackground:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},yTipTextStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"},background:null,layout:"horizontal",offsetX:0,offsetY:0}}constructor(t){Y(this,this.getDefaultCfg(),t);var{frontPlot:e,custom:r}=this;if(!r){var a=new pe(_({parent:e,zIndex:3},t));this.container=a;var{fixed:n,background:s}=this;n||(this.tooltipArrow=e.addShape("Polygon",{className:"tooltip-arrow",visible:!1,zIndex:2,attrs:_({points:[]},s)}))}if(this.showXTip){var{xTipBackground:o,xTipTextStyle:l}=this,f=new lr({className:"xTip",background:o,textStyle:l,visible:!1});e.add(f.container),this.xTipBox=f}if(this.showYTip){var{yTipBackground:h,yTipTextStyle:u}=this,v=new lr({className:"yTip",background:h,textStyle:u,visible:!1});e.add(v.container),this.yTipBox=v}this.showCrosshairs&&this._renderCrosshairs(),e.sort()}setContent(t,e){if(this.title=t,this.items=e,!this.custom){var r=this.container;r.setTitle(t),r.setItems(e)}}setYTipContent(t){var e=this.yTip;F(e)?t=e(t):t=_({text:t},e),this.yTipBox&&this.yTipBox.updateContent(t)}setYTipPosition(t){var e=this.plotRange,r=this.crosshairsShapeX;if(this.showYTip){var a=this.yTipBox,n=a.getHeight(),s=a.getWidth(),o=e.tl.x-s,l=t-n/2;l<=e.tl.y&&(l=e.tl.y),l+n>=e.br.y&&(l=e.br.y-n),o<0&&(o=e.tl.x,r&&r.attr("x1",e.tl.x+s)),a.updatePosition(o,l)}}setXTipContent(t){var e=this.xTip;F(e)?t=e(t):t=_({text:t},e),this.xTipBox&&this.xTipBox.updateContent(t)}setXTipPosition(t){var{showXTip:e,canvas:r,plotRange:a,xTipBox:n,crosshairsShapeY:s}=this;if(e){var o=r.get("height"),l=n.getWidth(),f=n.getHeight(),h=t-l/2,u=a.br.y;h<=a.tl.x&&(h=a.tl.x),h+l>=a.tr.x&&(h=a.tr.x-l),o-u<f&&(u-=f),n.updatePosition(h,u),s&&s.attr("y1",u)}}setXCrosshairPosition(t){this.crosshairsShapeX&&this.crosshairsShapeX.moveTo(0,t)}setYCrosshairPosition(t){this.crosshairsShapeY&&this.crosshairsShapeY.moveTo(t,0)}setPosition(t){var{container:e,plotRange:r,offsetX:a,offsetY:n,fixed:s,tooltipArrow:o}=this;if(e){var l=e.container.getBBox(),{minX:f,minY:h,width:u,height:v}=l,{tl:c,tr:g}=r,p=0,y=c.y-v-Z+n;if(s){var x=(c.x+g.x)/2;p=x-u/2+a}else{var S;if(t.length>1?S=(t[0].x+t[t.length-1].x)/2:S=t[0].x,p=S-u/2+a,p<c.x&&(p=c.x),p+u>g.x&&(p=g.x-u),o){o.attr("points",[{x:S-3,y:c.y-Z+n},{x:S+3,y:c.y-Z+n},{x:S,y:c.y+n}]);var d=e.backShape,m=G(d.attr("radius"));S===c.x?(m[3]=0,o.attr("points",[{x:c.x,y:c.y+n},{x:c.x,y:c.y-Z+n},{x:c.x+Z,y:c.y-Z+n}])):S===g.x&&(m[2]=0,o.attr("points",[{x:g.x,y:c.y+n},{x:g.x-Z,y:c.y-Z+n},{x:g.x,y:c.y-Z+n}])),d.attr("radius",m)}}e.moveTo(p-f,y-h)}}setMarkers(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=this,{items:r,style:a,type:n}=t,s=e._getMarkerGroup(n);if(n==="circle")for(var o=0,l=r.length;o<l;o++){var f=r[o],h=new Ie({className:"tooltip-circle-marker",attrs:_({x:f.x,y:f.y,stroke:f.color},a)});s.add(h)}else s.addShape("rect",{className:"tooltip-rect-marker",attrs:a})}clearMarkers(){var t=this.markerGroup;t&&t.clear()}show(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,r=this.markerGroup,a=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox,l=this.canvas;t&&t.show(),e&&e.show(),r&&r.show(),a&&a.show(),n&&n.show(),s&&s.show(),o&&o.show(),l.draw()}hide(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,r=this.markerGroup,a=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox;t&&t.hide(),e&&e.hide(),r&&r.hide(),a&&a.hide(),n&&n.hide(),s&&s.hide(),o&&o.hide()}destroy(){var t=this.crosshairsShapeX,e=this.crosshairsShapeY,r=this.markerGroup,a=this.container,n=this.tooltipArrow,s=this.xTipBox,o=this.yTipBox;t&&t.remove(!0),e&&e.remove(!0),r&&r.remove(!0),n&&n.remove(!0),a&&a.clear(),s&&s.clear(),o&&o.clear(),this.destroyed=!0}_getMarkerGroup(t){var e=this.markerGroup;return e?e.clear():(t==="circle"?(e=this.frontPlot.addGroup({zIndex:1}),this.frontPlot.sort()):e=this.backPlot.addGroup(),this.markerGroup=e),e}_renderCrosshairs(){var{crosshairsType:t,crosshairsStyle:e,frontPlot:r,plotRange:a}=this,{tl:n,br:s}=a;Yt(t,"x")&&(this.crosshairsShapeX=r.addShape("Line",{className:"tooltip-crosshairs-x",zIndex:0,visible:!1,attrs:_({x1:n.x,y1:0,x2:s.x,y2:0},e)})),Yt(t,"y")&&(this.crosshairsShapeY=r.addShape("Line",{className:"tooltip-crosshairs-y",zIndex:0,visible:!1,attrs:_({x1:0,y1:s.y,x2:0,y2:n.y},e)}))}};function hr(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}b.tooltip=Y({triggerOn:"press",triggerOff:"pressend",alwaysShow:!1,showTitle:!1,showCrosshairs:!1,crosshairsStyle:{stroke:"rgba(0, 0, 0, 0.25)",lineWidth:1},showTooltipMarker:!0,background:{radius:1,fill:"rgba(0, 0, 0, 0.65)",padding:[3,5]},titleStyle:{fontSize:12,fill:"#fff",textAlign:"start",textBaseline:"top"},nameStyle:{fontSize:12,fill:"rgba(255, 255, 255, 0.65)",textAlign:"start",textBaseline:"middle"},valueStyle:{fontSize:12,fill:"#fff",textAlign:"start",textBaseline:"middle"},showItemMarker:!0,itemMarkerStyle:{radius:3,symbol:"circle",lineWidth:1,stroke:"#fff"},layout:"horizontal",snap:!1},b.tooltip||{});function Ur(i){var t=i.getAttr("color");if(t){var e=t.getScale(t.type);if(e.isLinear)return e}var r=i.getXScale(),a=i.getYScale();return a||r}function ao(i,t){var e,r,a=i._getGroupScales();if(a.length&&C(a,function(o){return r=o,!1}),r){var n=r.field;e=r.getText(t[n])}else{var s=Ur(i);e=s.alias||s.field}return e}function io(i,t){var e=Ur(i);return e.getText(t[e.field])}function no(i,t){var e=i.getAttr("position"),r=e.getFields()[0],a=i.get("scales")[r];return a.getText(t[a.field])}function so(i,t){var e=-1;return C(i,function(r,a){if(r.title===t.title&&r.name===t.name&&r.value===t.value&&r.color===t.color)return e=a,!1}),e}function oo(i){var t=[];return C(i,function(e){var r=so(t,e);r===-1?t.push(e):t[r]=e}),t}function lo(i,t){return JSON.stringify(i)===JSON.stringify(t)}class ho{constructor(t){hr(this,"handleShowEvent",a=>{var n=this.chart;if(this.enable){var s=n.get("plotRange"),o=Se(a,n);if(!ge(o,s)&&!this._tooltipCfg.alwaysShow){this.hideTooltip();return}var l=this.timeStamp,f=+new Date;f-l>16&&(this.showTooltip(o),this.timeStamp=f)}}),hr(this,"handleHideEvent",()=>{this.enable&&this.hideTooltip()}),this.enable=!0,this.cfg={},this.tooltip=null,this.chart=null,this.timeStamp=0,_(this,t);var e=this.chart,r=e.get("canvas");this.canvas=r,this.canvasDom=r.get("el")}_setCrosshairsCfg(){var t=this,e=t.chart,r=_({},b.tooltip),a=e.get("geoms"),n=[];C(a,o=>{var l=o.get("type");n.indexOf(l)===-1&&n.push(l)});var s=e.get("coord").type;return a.length&&(s==="cartesian"||s==="rect")&&n.length===1&&["line","area","path","point"].indexOf(n[0])!==-1&&_(r,{showCrosshairs:!0}),r}_getMaxLength(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{layout:e,plotRange:r}=t;return e==="horizontal"?r.br.x-r.bl.x:r.bl.y-r.tr.y}render(){var t=this;if(!t.tooltip){var e=t.chart,r=e.get("canvas"),a=e.get("frontPlot").addGroup({className:"tooltipContainer",zIndex:10}),n=e.get("backPlot").addGroup({className:"tooltipContainer"}),s=e.get("plotRange"),o=e.get("coord"),l=t._setCrosshairsCfg(),f=t.cfg,h=Y({plotRange:s,frontPlot:a,backPlot:n,canvas:r,fixed:o.transposed||o.isPolar},l,f);h.maxLength=t._getMaxLength(h),this._tooltipCfg=h;var u=new ro(h);t.tooltip=u,t.bindEvents()}}clear(){var t=this.tooltip;t&&(t.destroy(),this.unBindEvents()),this.tooltip=null,this.prePoint=null,this._lastActive=null}_getTooltipMarkerStyle(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{type:e,items:r}=t,a=this._tooltipCfg;if(e==="rect"){var n,s,o,l,f=this.chart,{tl:h,br:u}=f.get("plotRange"),v=f.get("coord"),c=r[0],g=r[r.length-1],p=c.width;v.transposed?(n=h.x,s=g.y-p*.75,o=u.x-h.x,l=c.y-g.y+1.5*p):(n=c.x-p*.75,s=h.y,o=g.x-c.x+1.5*p,l=u.y-h.y),t.style=_({x:n,y:s,width:o,height:l,fill:"#CCD6EC",opacity:.3},a.tooltipMarkerStyle)}else t.style=_({radius:4,fill:"#fff",lineWidth:2},a.tooltipMarkerStyle);return t}_setTooltip(t,e){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=this._lastActive,n=this.tooltip,s=this._tooltipCfg;e=oo(e);var o=this.chart,l=o.get("coord"),f=o.getYScales()[0],h=s.snap;if(h===!1&&f.isLinear){var u=l.invertPoint(t),v=o.get("plotRange"),c,g;ge(t,v)&&(l.transposed?(c=f.invert(u.x),g=t.x,n.setXTipContent(c),n.setXTipPosition(g),n.setYCrosshairPosition(g)):(c=f.invert(u.y),g=t.y,n.setYTipContent(c),n.setYTipPosition(g),n.setXCrosshairPosition(g)))}if(s.onShow&&s.onShow({x:t.x,y:t.y,tooltip:n,items:e,tooltipMarkerCfg:r}),lo(a,e)){if(h===!1&&(Yt(s.crosshairsType,"y")||s.showYTip)){var p=this.chart.get("canvas");p.draw()}return}this._lastActive=e;var y=s.onChange;y&&y({x:t.x,y:t.y,tooltip:n,items:e,tooltipMarkerCfg:r});var x=e[0],S=x.title||x.name,d=x.x;if(e.length>1&&(d=(e[0].x+e[e.length-1].x)/2),n.setContent(S,e,l.transposed),n.setPosition(e,t),l.transposed){var m=x.y;e.length>1&&(m=(e[0].y+e[e.length-1].y)/2),n.setYTipContent(S),n.setYTipPosition(m),n.setXCrosshairPosition(m),h&&(n.setXTipContent(x.value),n.setXTipPosition(d),n.setYCrosshairPosition(d))}else n.setXTipContent(S),n.setXTipPosition(d),n.setYCrosshairPosition(d),h&&(n.setYTipContent(x.value),n.setYTipPosition(x.y),n.setXCrosshairPosition(x.y));var P=r.items;s.showTooltipMarker&&P.length?(r=this._getTooltipMarkerStyle(r),n.setMarkers(r)):n.clearMarkers(),n.show()}showTooltip(t){var e=this,r=e.chart,a,n=[],s=[],o=e._tooltipCfg,l;o.showItemMarker&&(l=o.itemMarkerStyle);var f=r.get("geoms"),h=r.get("coord");if(C(f,v=>{if(v.get("visible")){var c=v.get("type"),g=v.getSnapRecords(t),p=v.get("adjust");if(c==="interval"&&p&&p.type==="symmetric")return;C(g,y=>{if(y.x&&y.y){var{x,y:S,_origin:d,color:m}=y,P={x,y:A(S)?S[1]:S,color:m||b.defaultColor,origin:d,name:ao(v,d),value:io(v,d),title:no(v,d)};l&&(P.marker=_({fill:m||b.defaultColor},l)),s.push(P),["line","area","path"].indexOf(c)!==-1?(a="circle",n.push(P)):c==="interval"&&(h.type==="cartesian"||h.type==="rect")&&(a="rect",P.width=v.getSize(y._origin),n.push(P))}})}}),s.length){var u={items:n,type:a};e._setTooltip(t,s,u)}else e.hideTooltip()}hideTooltip(){var t=this._tooltipCfg;this._lastActive=null;var e=this.tooltip;if(e){e.hide(),t.onHide&&t.onHide({tooltip:e});var r=this.chart.get("canvas");r.draw()}}_handleEvent(t,e,r){var a=this.canvas;C([].concat(t),n=>{r==="bind"?a.on(n,e):a.off(n,e)})}bindEvents(){var t=this._tooltipCfg,{triggerOn:e,triggerOff:r,alwaysShow:a}=t;e&&this._handleEvent(e,this.handleShowEvent,"bind"),a||this._handleEvent(r,this.handleHideEvent,"bind")}unBindEvents(){var t=this._tooltipCfg,{triggerOn:e,triggerOff:r,alwaysShow:a}=t;e&&this._handleEvent(e,this.handleShowEvent,"unBind"),a||this._handleEvent(r,this.handleHideEvent,"unBind")}}function qr(i){var t=new ho({chart:i});i.set("tooltipController",t),i.tooltip=function(e,r){return $(e)&&(r=e,e=!0),t.enable=e,r&&(t.cfg=r),this}}function Zr(i){var t=i.get("tooltipController");t.render(),i.showTooltip=function(e){return t.showTooltip(e),this},i.hideTooltip=function(){return t.hideTooltip(),this}}function Jr(i){var t=i.get("tooltipController");t.clear()}const fo={init:qr,afterGeomDraw:Zr,clearInner:Jr},uo=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:Zr,clearInner:Jr,default:fo,init:qr},Symbol.toStringTag,{value:"Module"}));b.guide=Y({line:{style:{stroke:"#a3a3a3",lineWidth:1},top:!0},text:{style:{fill:"#787878",textAlign:"center",textBaseline:"middle"},offsetX:0,offsetY:0,top:!0},rect:{style:{fill:"#fafafa"},top:!1},arc:{style:{stroke:"#a3a3a3"},top:!0},html:{offsetX:0,offsetY:0,alignX:"center",alignY:"middle"},tag:{top:!0,offsetX:0,offsetY:0,side:4,background:{padding:5,radius:2,fill:"#1890FF"},textStyle:{fontSize:12,fill:"#fff",textAlign:"center",textBaseline:"middle"}},point:{top:!0,offsetX:0,offsetY:0,style:{fill:"#fff",r:3,lineWidth:2,stroke:"#1890ff"}}},b.guide||{});class vo{constructor(t){this.guides=[],this.xScale=null,this.yScales=null,this.guideShapes=[],_(this,t)}_toString(t){return F(t)&&(t=t(this.xScale,this.yScales)),t=t.toString(),t}_getId(t,e){var r=e.id;if(!r){var a=e.type;a==="arc"||a==="line"||a==="rect"?r=this._toString(e.start)+"-"+this._toString(e.end):r=this._toString(e.position)}return r}paint(t){var e=this,{chart:r,guides:a,xScale:n,yScales:s}=e,o=[];C(a,function(l,f){l.xScale=n,l.yScales=s;var h;l.type==="regionFilter"?l.chart=r:h=l.top?e.frontPlot:e.backPlot,l.coord=t,l.container=h,l.canvas=r.get("canvas");var u=l.render(t,h);if(u){var v=e._getId(u,l);[].concat(u).forEach(c=>{c._id=c.get("className")+"-"+v,c.set("index",f),o.push(c)})}}),e.guideShapes=o}clear(){return this.reset(),this.guides=[],this}reset(){var t=this.guides;C(t,e=>{e.remove()})}_createGuide(t,e){var r=J(t),a=new L[r](Y({},b.guide[t],e));return this.guides.push(a),a}line(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("line",t)}text(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("text",t)}arc(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("arc",t)}html(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("html",t)}rect(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("rect",t)}tag(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("tag",t)}point(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("point",t)}regionFilter(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this._createGuide("regionFilter",t)}}function Kr(i){var t=new vo({frontPlot:i.get("frontPlot").addGroup({zIndex:20,className:"guideContainer"}),backPlot:i.get("backPlot").addGroup({className:"guideContainer"})});i.set("guideController",t),i.guide=function(){return t}}function Qr(i){var t=i.get("guideController");if(t.guides.length){var e=i.getXScale(),r=i.getYScales(),a=i.get("coord");t.xScale=e,t.yScales=r,t.chart=i,t.paint(a)}}function ta(i){i.get("guideController").clear()}function ea(i){i.get("guideController").reset()}const co={init:Kr,afterGeomDraw:Qr,clear:ta,repaint:ea},go=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:Qr,clear:ta,default:co,init:Kr,repaint:ea},Symbol.toStringTag,{value:"Module"}));function po(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}var fr=12,ur=3,gt={itemMarginBottom:12,itemGap:10,showTitle:!1,titleStyle:{fontSize:12,fill:"#808080",textAlign:"start",textBaseline:"top"},nameStyle:{fill:"#808080",fontSize:12,textAlign:"start",textBaseline:"middle"},valueStyle:{fill:"#000000",fontSize:12,textAlign:"start",textBaseline:"middle"},unCheckStyle:{fill:"#bfbfbf"},itemWidth:"auto",wordSpace:6,selectedMode:"multiple"};b.legend=Y({common:gt,right:_({position:"right",layout:"vertical"},gt),left:_({position:"left",layout:"vertical"},gt),top:_({position:"top",layout:"horizontal"},gt),bottom:_({position:"bottom",layout:"horizontal"},gt)},b.legend||{});function mo(i,t){var e=0;switch(t=G(t),i){case"top":e=t[0];break;case"right":e=t[1];break;case"bottom":e=t[2];break;case"left":e=t[3];break}return e}class yo{constructor(t){po(this,"handleEvent",r=>{var a=this;function n(S,d){var m=null,P=a.legends;return C(P,M=>{C(M,I=>{var{itemsGroup:w,legendHitBoxes:H}=I,X=w.get("children");if(X.length){var V=I.x,W=I.y;C(H,(B,K)=>{if(S>=B.x+V&&S<=B.x+B.width+V&&d>=B.y+W&&d<=B.height+B.y+W)return m={clickedItem:X[K],clickedLegend:I},!1})}})}),m}var s=a.chart,{x:o,y:l}=Se(r,s),f=n(o,l);if(f&&f.clickedLegend.clickable!==!1){var{clickedItem:h,clickedLegend:u}=f;if(u.onClick)r.clickedItem=h,u.onClick(r);else if(!u.custom){var v=h.get("checked"),c=h.get("dataValue"),{filteredVals:g,field:p,selectedMode:y}=u,x=y==="single";x?s.filter(p,S=>S===c):(v?g.push(c):kt(g,c),s.filter(p,S=>g.indexOf(S)===-1)),s.repaint()}}}),this.legendCfg={},this.enable=!0,this.position="top",_(this,t);var e=this.chart;this.canvasDom=e.get("canvas").get("el"),this.clear()}addLegend(t,e,r){var a=this,n=a.legendCfg,s=t.field,o=n[s];if(o===!1)return null;if(o&&o.custom)a.addCustomLegend(s);else{var l=n.position||a.position;o&&o.position&&(l=o.position),t.isCategory&&a._addCategoryLegend(t,e,l,r)}}addCustomLegend(t){var e=this,r=e.legendCfg;t&&r[t]&&(r=r[t]);var a=r.position||e.position,n=e.legends;n[a]=n[a]||[];var s=r.items;if(!s)return null;var o=e.container;C(s,f=>{lt(f.marker)?f.marker.radius=f.marker.radius||ur:f.marker={symbol:f.marker||"circle",fill:f.fill,radius:ur},f.checked=T(f.checked)?!0:f.checked,f.name=f.name||f.value});var l=new pe(Y({},b.legend[a],r,{maxLength:e._getMaxLength(a),items:s,parent:o}));n[a].push(l)}clear(){var t=this.legends;C(t,e=>{C(e,r=>{r.clear()})}),this.legends={},this.unBindEvents()}_isFiltered(t,e,r){var a=!1;return C(e,n=>{if(a=a||t.getText(n)===t.getText(r),a)return!1}),a}_getMaxLength(t){var e=this.chart,r=G(e.get("appendPadding"));return t==="right"||t==="left"?e.get("height")-(r[0]+r[2]):e.get("width")-(r[1]+r[3])}_addCategoryLegend(t,e,r,a){var n=this,{legendCfg:s,legends:o,container:l,chart:f}=n,h=t.field;o[r]=o[r]||[];var u="circle";s[h]&&s[h].marker?u=s[h].marker:s.marker&&(u=s.marker),C(e,p=>{lt(u)?_(p.marker,u):p.marker.symbol=u,a&&(p.checked=!n._isFiltered(t,a,p.dataValue))});var v=f.get("legendItems");v[h]=e;var c=Y({},b.legend[r],s[h]||s,{maxLength:n._getMaxLength(r),items:e,field:h,filteredVals:a,parent:l});c.showTitle&&Y(c,{title:t.alias||t.field});var g=new pe(c);return o[r].push(g),g}_alignLegend(t,e,r){var a=this,{tl:n,bl:s}=a.plotRange,o=a.chart,l=t.offsetX||0,f=t.offsetY||0,h=o.get("width"),u=o.get("height"),v=G(o.get("appendPadding")),c=t.getHeight(),g=t.getWidth(),p=0,y=0;if(r==="left"||r==="right"){var x=t.verticalAlign||"middle",S=Math.abs(n.y-s.y);p=r==="left"?v[3]:h-g-v[1],y=(S-c)/2+n.y,x==="top"?y=n.y:x==="bottom"&&(y=s.y-c),e&&(y=e.get("y")-c-fr)}else{var d=t.align||"left";if(p=v[3],d==="center"?p=h/2-g/2:d==="right"&&(p=h-(g+v[1])),y=r==="top"?v[0]+Math.abs(t.container.getBBox().minY):u-c,e){var m=e.getWidth();p=e.x+m+fr}}r==="bottom"&&f>0&&(f=0),r==="right"&&l>0&&(l=0),t.moveTo(p+l,y+f)}alignLegends(){var t=this,e=t.legends;return C(e,(r,a)=>{C(r,(n,s)=>{var o=r[s-1];t._alignLegend(n,o,a)})}),t}bindEvents(){var t=this.legendCfg,e=t.triggerOn||"touchstart";Dr(this.canvasDom,e,this.handleEvent)}unBindEvents(){var t=this.legendCfg,e=t.triggerOn||"touchstart";Ar(this.canvasDom,e,this.handleEvent)}}function ra(i){var t=new yo({container:i.get("backPlot"),plotRange:i.get("plotRange"),chart:i});i.set("legendController",t),i.legend=function(e,r){var a=t.legendCfg;return t.enable=!0,yr(e)?(t.enable=e,a=r||{}):$(e)?a=e:a[e]=r,t.legendCfg=a,this}}function aa(i){var t=i.get("legendController");if(!t.enable)return null;var e=t.legendCfg;if(e&&e.custom)t.addCustomLegend();else{var r=i.getLegendItems(),a=i.get("scales"),n=i.get("filters");C(r,(l,f)=>{var h=a[f],u=h.values,v;n&&n[f]?v=u.filter(c=>!n[f](c)):v=[],t.addLegend(h,l,v)})}e&&e.clickable!==!1&&t.bindEvents();var s=t.legends,o={top:0,right:0,bottom:0,left:0};C(s,(l,f)=>{var h=0;C(l,u=>{var v=u.getWidth(),c=u.getHeight();f==="top"||f==="bottom"?(h=Math.max(h,c),u.offsetY>0&&(h+=u.offsetY)):(h=Math.max(h,v),u.offsetX>0&&(h+=u.offsetX))}),o[f]=h+mo(f,i.get("appendPadding"))}),i.set("legendRange",o)}function ia(i){var t=i.get("legendController");t.alignLegends()}function na(i){var t=i.get("legendController");t.clear(),i.set("legendRange",null)}const xo={init:ra,beforeGeomDraw:aa,afterGeomDraw:ia,clearInner:na},_o=Object.freeze(Object.defineProperty({__proto__:null,afterGeomDraw:ia,beforeGeomDraw:aa,clearInner:na,default:xo,init:ra},Symbol.toStringTag,{value:"Module"}));var re=typeof performance=="object"&&performance.now?performance:Date;class So{constructor(){this.anims=[],this.time=null,this.playing=!1,this.canvas=[]}play(){var t=this;t.time=re.now(),t.playing=!0;function e(){t.playing&&(ve(e),t.update())}ve(e)}stop(){this.playing=!1,this.time=null,this.canvas=[]}update(){var t=re.now();this.canvas=[];for(var e=0;e<this.anims.length;e++){var r=this.anims[e];if(!(t<r.startTime||r.hasEnded)){var a=r.shape;if(a.get("destroyed")){this.anims.splice(e,1),e--;continue}var{startState:n,endState:s,interpolate:o,duration:l}=r;t>=r.startTime&&!r.hasStarted&&(r.hasStarted=!0,r.onStart&&r.onStart());var f=(t-r.startTime)/l;if(f=Math.max(0,Math.min(f,1)),f=r.easing(f),r.onFrame)r.onFrame(f);else for(var h in o){var u=o[h],v=u(f),c=void 0;if(h==="points"){c=[];for(var g=Math.max(n.points.length,s.points.length),p=0;p<g;p+=2)c.push({x:v[p],y:v[p+1]})}else c=v;a._attrs.attrs[h]=c,a._attrs.bbox=null}var y=a.get("canvas");this.canvas.indexOf(y)===-1&&this.canvas.push(y),r.onUpdate&&r.onUpdate(f),t>=r.endTime&&!r.hasEnded&&(r.hasEnded=!0,r.onEnd&&r.onEnd()),f===1&&(this.anims.splice(e,1),e--)}}this.canvas.map(x=>(x.draw(),x)),this.time=re.now()}}function sa(i){return i}function Co(i){return i*i}function Po(i){return i*(2-i)}function Mo(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}function wo(i){return i*i*i}function To(i){return--i*i*i+1}function bo(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}function Do(i){var t,e=.1,r=.4;return i===0?0:i===1?1:(!e||e<1?(e=1,t=r/4):t=r/(2*Math.PI)*Math.asin(1/e),-(e*Math.pow(2,10*(i-=1))*Math.sin((i-t)*(2*Math.PI)/r)))}function Ao(i){var t,e=.1,r=.4;return i===0?0:i===1?1:(!e||e<1?(e=1,t=r/4):t=r/(2*Math.PI)*Math.asin(1/e),e*Math.pow(2,-10*i)*Math.sin((i-t)*(2*Math.PI)/r)+1)}function Io(i){var t,e=.1,r=.4;return i===0?0:i===1?1:(!e||e<1?(e=1,t=r/4):t=r/(2*Math.PI)*Math.asin(1/e),(i*=2)<1?-.5*(e*Math.pow(2,10*(i-=1))*Math.sin((i-t)*(2*Math.PI)/r)):e*Math.pow(2,-10*(i-=1))*Math.sin((i-t)*(2*Math.PI)/r)*.5+1)}function Eo(i){var t=1.70158;return i*i*((t+1)*i-t)}function Oo(i){var t=1.70158;return(i=i-1)*i*((t+1)*i+t)+1}function Fo(i){var t=2.5949095;return(i*=2)<1?.5*(i*i*((t+1)*i-t)):.5*((i-=2)*i*((t+1)*i+t)+2)}function oa(i){return 1-Ee(1-i)}function Ee(i){return(i/=1)<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375}function No(i){return i<.5?oa(i*2)*.5:Ee(i*2-1)*.5+.5}const Yo=Object.freeze(Object.defineProperty({__proto__:null,backIn:Eo,backInOut:Fo,backOut:Oo,bounceIn:oa,bounceInOut:No,bounceOut:Ee,cubicIn:wo,cubicInOut:bo,cubicOut:To,elasticIn:Do,elasticInOut:Io,elasticOut:Ao,linear:sa,quadraticIn:Co,quadraticInOut:Mo,quadraticOut:Po},Symbol.toStringTag,{value:"Module"}));function vr(i){for(var t=[],e=0,r=i.length;e<r;e++)i[e]&&(t.push(i[e].x),t.push(i[e].y));return t}function la(i,t){return i=+i,t-=i,function(e){return i+t*e}}function cr(i,t){var e=t?t.length:0,r=i?Math.min(e,i.length):0,a=new Array(r),n=new Array(e),s;for(s=0;s<r;++s)a[s]=la(i[s],t[s]);for(;s<e;++s)n[s]=t[s];return function(o){for(s=0;s<r;++s)n[s]=a[s](o);return n}}class Bo{constructor(t,e,r){this.hasStarted=!1,this.hasEnded=!1,this.shape=t,this.source=e,this.timeline=r,this.animate=null}to(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=t.delay||0,r=t.attrs||{},a=t.duration||1e3,n;typeof t.easing=="function"?n=t.easing:n=Yo[t.easing]||sa;var s={shape:this.shape,startTime:this.timeline.time+e,duration:a,easing:n},o={};for(var l in r){var f=this.source[l],h=r[l];l==="points"?(f=vr(f),h=vr(h),o.points=cr(f,h),this.source.points=f,r.points=h):l==="matrix"?o.matrix=cr(f,h):o[l]=la(f,h)}return s.interpolate=o,s.startState=this.source,s.endState=r,s.endTime=s.startTime+a,this.timeline.anims.push(s),this.animate=s,this}onFrame(t){return this.animate&&(this.animate.onFrame=function(e){t(e)}),this}onStart(t){return this.animate&&(this.animate.onStart=function(){t()}),this}onUpdate(t){return this.animate&&(this.animate.onUpdate=function(e){t(e)}),this}onEnd(t){return this.animate&&(this.animate.onEnd=function(){t()}),this}}var Ro={appear:{duration:450,easing:"quadraticOut"},update:{duration:300,easing:"quadraticOut"},enter:{duration:300,easing:"quadraticOut"},leave:{duration:350,easing:"quadraticIn"}},it={defaultCfg:{},Action:{},getAnimation(i,t,e){var r=this.defaultCfg[i];if(r){var a=r[e];if(F(a))return a(t)}return!1},getAnimateCfg(i,t){var e=Ro[t],r=this.defaultCfg[i];return r&&r.cfg&&r.cfg[t]?Y({},e,r.cfg[t]):e},registerAnimation(i,t){this.Action||(this.Action={}),this.Action[i]=t}};function ko(i){var t=i.start,e=i.end;return{start:t,end:e,width:e.x-t.x,height:Math.abs(e.y-t.y)}}function ha(i,t,e){var r;i.apply(t);var a=t[0],n=t[1];if(e==="x"){i.transform([["t",a,n],["s",.01,1],["t",-a,-n]]);var s=i.getMatrix();r=k.transform(s,[["t",a,n],["s",100,1],["t",-a,-n]])}else if(e==="y"){i.transform([["t",a,n],["s",1,.01],["t",-a,-n]]);var o=i.getMatrix();r=k.transform(o,[["t",a,n],["s",1,100],["t",-a,-n]])}else if(e==="xy"){i.transform([["t",a,n],["s",.01,.01],["t",-a,-n]]);var l=i.getMatrix();r=k.transform(l,[["t",a,n],["s",100,100],["t",-a,-n]])}return r}function Lo(i,t,e){var r={};return i.delay&&(r.delay=F(i.delay)?i.delay(t,e):i.delay),r.easing=i.easing,r.duration=i.duration,r.delay=i.delay,r}function $t(i,t,e,r){var a=i._id,n=i.get("index"),{easing:s,delay:o,duration:l}=Lo(e,n,a),f=i.animate().to({attrs:t,duration:l,delay:o,easing:s});r&&f.onEnd(()=>{r()})}function dt(i,t){var e=T(i.attr("fillOpacity"))?1:i.attr("fillOpacity"),r=T(i.attr("strokeOpacity"))?1:i.attr("strokeOpacity");i.attr("fillOpacity",0),i.attr("strokeOpacity",0);var a={fillOpacity:e,strokeOpacity:r};$t(i,a,t)}const zo=Object.freeze(Object.defineProperty({__proto__:null,fadeIn:dt},Symbol.toStringTag,{value:"Module"}));function Oe(i,t,e,r,a){var{start:n,end:s,width:o,height:l}=ko(e),f,h,u=new O.Rect({attrs:{x:n.x,y:s.y,width:o,height:l}});a==="y"?(f=n.x+o/2,h=r.y<n.y?r.y:n.y):a==="x"?(f=r.x>n.x?r.x:n.x,h=n.y+l/2):a==="xy"&&(e.isPolar?(f=e.center.x,h=e.center.y):(f=(n.x+s.x)/2,h=(n.y+s.y)/2));var v=ha(u,[f,h],a);u.isClip=!0,u.endState={matrix:v},u.set("canvas",i.get("canvas")),i.attr("clip",u);var c=function(){i.attr("clip",null),u.remove(!0)};$t(u,u.endState,t,c)}function Fe(i,t,e){for(var r=i.get("children"),a,n,s,o=0,l=r.length;o<l;o++){var f=r[o],h=f.getBBox();a=(h.minX+h.maxX)/2,n=(h.minY+h.maxY)/2,s=ha(f,[a,n],e),$t(f,{matrix:s},t)}}function fa(i,t,e,r){Oe(i,t,e,r,"x")}function ua(i,t,e,r){Oe(i,t,e,r,"y")}function pt(i,t,e,r){Oe(i,t,e,r,"xy")}function Xo(i,t){Fe(i,t,"x")}function Go(i,t){Fe(i,t,"y")}function va(i,t){Fe(i,t,"xy")}function ot(i,t,e){var r=Ae(e);r.set("canvas",i.get("canvas")),i.attr("clip",r);var a=function(){i.attr("clip",null),r.remove(!0)},n={};if(e.isPolar){var{startAngle:s,endAngle:o}=e;n.endAngle=o,r.attr("endAngle",s)}else{var{start:l,end:f}=e,h=Math.abs(l.x-f.x),u=Math.abs(l.y-f.y);e.isTransposed?(r.attr("height",0),n.height=u):(r.attr("width",0),n.width=h)}$t(r,n,t,a)}const $o=Object.freeze(Object.defineProperty({__proto__:null,groupScaleInX:fa,groupScaleInXY:pt,groupScaleInY:ua,groupWaveIn:ot,shapesScaleInX:Xo,shapesScaleInXY:va,shapesScaleInY:Go},Symbol.toStringTag,{value:"Module"}));var Rt;Te.prototype.animate=function(){var i=_({},this.get("attrs"));return new Bo(this,i,Rt)};E.prototype.animate=function(i){return this.set("animate",i),this};it.Action=zo;it.defaultCfg={interval:{enter(i){return i.isPolar&&i.transposed?function(t){t.set("zIndex",-1);var e=t.get("parent");e.sort()}:dt}},area:{enter(i){return i.isPolar?null:dt}},line:{enter(i){return i.isPolar?null:dt}},path:{enter(i){return i.isPolar?null:dt}}};var gr={line(i){return i.isPolar?pt:ot},area(i){return i.isPolar?pt:ot},path(i){return i.isPolar?pt:ot},point(){return va},interval(i){var t;return i.isPolar?(t=pt,i.transposed&&(t=ot)):t=i.transposed?fa:ua,t},schema(){return ot}};function Ho(i,t){var e={};for(var r in t)(Q(i[r])&&i[r]!==t[r]||A(i[r])&&JSON.stringify(i[r])!==JSON.stringify(t[r]))&&(e[r]=t[r]);return e}function Vo(i,t,e){var r=i.get("type"),a="geom"+e+"-"+r,n=i.getXScale(),s=i.getYScale(),o=n.field||"x",l=s.field||"y",f=t[l],h;n.isIdentity?h=n.value:h=t[o],r==="interval"||r==="schema"?a+="-"+h:r==="line"||r==="area"||r==="path"?a+="-"+r:a+=n.isCategory?"-"+h:"-"+h+"-"+f;var u=i._getGroupScales();return C(u,v=>{var c=v.field;v.type!=="identity"&&(a+="-"+t[c])}),a}function Wo(i,t,e){var r=[];return C(i,(a,n)=>{var s=a.get("container"),o=s.get("children"),l=a.get("type"),f=T(a.get("animateCfg"))?me(l,t):a.get("animateCfg");f!==!1&&C(o,(h,u)=>{h.get("className")===l&&(h._id=Vo(a,h.get("origin")._origin,n),h.set("coord",e),h.set("animateCfg",f),h.set("index",u),r.push(h))}),a.set("shapes",o)}),r}function jo(i){for(var t={},e=0,r=i.length;e<r;e++){var a=i[e];if(!(!a._id||a.isClip)){var n=a._id;t[n]={_id:n,type:a.get("type"),attrs:_({},a._attrs.attrs),className:a.get("className"),geomType:a.get("className"),index:a.get("index"),coord:a.get("coord"),animateCfg:a.get("animateCfg")}}}return t}function yt(i,t,e,r){var a;return F(r)?a=r:R(r)?a=it.Action[r]:a=it.getAnimation(i,t,e),a}function Ft(i,t,e){if(e===!1||$(e)&&e[t]===!1)return!1;var r=it.getAnimateCfg(i,t);return e&&e[t]?Y({},r,e[t]):r}function Uo(i,t,e){var r,a,n=[],s=[];C(t,o=>{var l=i[o._id];l?(o.set("cacheShape",l),n.push(o),delete i[o._id]):s.push(o)}),C(i,o=>{var{className:l,coord:f,_id:h,attrs:u,index:v,type:c}=o;if(a=Ft(l,"leave",o.animateCfg),a===!1)return!0;if(r=yt(l,f,"leave",a.animation),F(r)){var g=e.addShape(c,{attrs:u,index:v,canvas:e,className:l});g._id=h,r(g,a,f)}}),C(n,o=>{var l=o.get("className");if(a=Ft(l,"update",o.get("animateCfg")),a===!1)return!0;var f=o.get("coord"),h=o.get("cacheShape").attrs,u=Ho(h,o._attrs.attrs);Object.keys(u).length&&(r=yt(l,f,"update",a.animation),F(r)?r(o,a,f):(o.attr(h),o.animate().to({attrs:u,duration:a.duration,easing:a.easing,delay:a.delay}).onEnd(function(){o.set("cacheShape",null)})))}),C(s,o=>{var l=o.get("className"),f=o.get("coord");if(a=Ft(l,"enter",o.get("animateCfg")),a===!1)return!0;if(r=yt(l,f,"enter",a.animation),F(r))if(l==="interval"&&f.isPolar&&f.transposed){var h=o.get("index"),u=n[h-1];r(o,a,u)}else r(o,a,f)})}function me(i,t){if(!i)return null;var e=t.get("animate");return i.indexOf("guide-tag")>-1&&(i="guide-tag"),$(e)?e[i]:e===!1?!1:null}function ca(){Rt=new So,Rt.play()}function ga(i){if(i.get("animate")!==!1){var t=i.get("isUpdate"),e=i.get("canvas"),r=i.get("coord"),a=i.get("geoms"),n=e.get("caches")||[];n.length===0&&(t=!1);var s=Wo(a,i,r),{frontPlot:o,backPlot:l}=i.get("axisController"),f=o.get("children").concat(l.get("children")),h=[];i.get("guideController")&&(h=i.get("guideController").guideShapes);var u=[];if(f.concat(h).forEach(g=>{var p=g.get("className"),y=me(p,i);g.set("coord",r),g.set("animateCfg",y),u.push(g),s.push(g)}),e.set("caches",jo(s)),t)Uo(n,s,e);else{var v,c;C(a,g=>{var p=g.get("type"),y=T(g.get("animateCfg"))?me(p,i):g.get("animateCfg");if(y!==!1){if(v=Ft(p,"appear",y),c=yt(p,r,"appear",v.animation),F(c)){var x=g.get("shapes");C(x,P=>{c(P,v,r)})}else if(gr[p]){c=$o[v.animation]||gr[p](r);var S=g.getYScale(),d=r.convertPoint({x:0,y:S.scale(g.getYMinValue())}),m=g.get("container");c&&c(m,v,r,d)}}}),C(u,g=>{var p=g.get("animateCfg"),y=g.get("className");if(p&&p.appear){var x=it.getAnimateCfg(y,"appear"),S=Y({},x,p.appear),d=yt(y,r,"appear",S.animation);F(d)&&d(g,S,r)}})}}}function da(){Rt.stop()}const qo={afterCanvasInit:ca,beforeCanvasDraw:ga,afterCanvasDestroyed:da},Zo=Object.freeze(Object.defineProperty({__proto__:null,afterCanvasDestroyed:da,afterCanvasInit:ca,beforeCanvasDraw:ga,default:qo},Symbol.toStringTag,{value:"Module"}));E._Interactions={};E.registerInteraction=function(i,t){E._Interactions[i]=t};E.getInteraction=function(i){return E._Interactions[i]};E.prototype.interaction=function(i,t){var e=this._interactions||{};e[i]&&e[i].destroy();var r=E.getInteraction(i),a=new r(t,this);return e[i]=a,this._interactions=e,this};E.prototype.clearInteraction=function(i){var t=this._interactions;if(t)return i?(t[i]&&t[i].destroy(),delete t[i]):C(t,(e,r)=>{e.destroy(),delete t[r]}),this};function rt(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}function Jo(i,t){if(i.length!==t.length)return!1;var e=i.length-1;return i[0]===t[0]&&i[e]===t[e]}var ae=[0,1];class Ko{constructor(t){rt(this,"chart",null),rt(this,"values",null),rt(this,"range",ae),rt(this,"startRange",ae),rt(this,"minCount",10),rt(this,"_afterinit",()=>{var e=this.getPinchScale(),r=[].concat(e.values);this.values=r,this.minScale||(this.minScale=this.minCount/r.length),this.range!==ae&&(this.updateRange(this.range),this.updateTicks())}),rt(this,"_afterdatachange",()=>{this.updateRange(this.range)}),this.chart=t,this._initEvent(t)}_initEvent(t){t.on(le,this._afterinit),t.on(mt,this._afterdatachange)}getPinchScale(){var{chart:t}=this,e=t.getXScale();return e}getFollowScale(){var{chart:t}=this,e=t.getYScales()||[];return e[0]}start(){var{range:t}=this,e=this.getPinchScale(),[r,a]=t;this.startRange=[r,a],this.lastTickCount=e.tickCount}doZoom(t,e,r){var{startRange:a,minScale:n}=this,[s,o]=a,l=1-r,f=o-s,h=f*l,u=h*t,v=h*e,c=Math.max(0,s-u),g=Math.min(1,o+v),p=[c,g];g-c<n||this.updateRange(p)}doMove(t){if(t){var{startRange:e}=this,[r,a]=e,n=a-r,s=n*t,o=r-s,l=a-s,f;o<0?f=[0,n]:l>1?f=[1-n,1]:f=[o,l],this.updateRange(f)}}updateRange(t){var{values:e}=this,[r,a]=t;r=Math.max(0,r),a=Math.min(1,a),this.range=[r,a];var n=e.length,s=r*n,o=a*n,l=e.slice(s,o);this.repaint(l)}repaint(t){var{chart:e}=this,r=this.getPinchScale(),{values:a,ticks:n}=r;Jo(a,t)||(this.updateScale(r,{ticks:n,values:t}),this.updateFollowScale(r,t),e.repaint())}updateFollowScale(t,e){var{chart:r}=this,a=this.getFollowScale(),{field:n,type:s}=t,{field:o}=a,l=[],f={};e.forEach(c=>{f[c]=!0});var h=r.get("data");h.forEach(c=>{if(s==="timeCat"){var g=t._toTimeStamp(c[n]);f[g]&&l.push(c[o])}});var{min:u,max:v}=ye(l);this.updateScale(a,{min:u,max:v,nice:!0})}updateScale(t,e){t&&t.change(e)}updateTicks(){var{chart:t,values:e}=this,r=this.getPinchScale(),{values:a,tickCount:n,isRounding:s}=r,o=Math.round(n*e.length/a.length),l=Me({maxCount:o,data:e,isRounding:s}),f=l.ticks;this.updateScale(r,{ticks:f,values:a}),t.repaint()}destroy(){var{chart:t}=this;t.off(le,this._afterinit),t.off(mt,this._afterdatachange)}}function q(i,t,e){return t in i?Object.defineProperty(i,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):i[t]=e,i}class pa{getDefaultCfg(){return{}}getInteractionContext(t){var e=t.get("interactionContext");return e||(e=new Ko(t),t.set("interactionContext",e),e)}constructor(t,e){q(this,"type",""),q(this,"startEvent","touchstart"),q(this,"processEvent","touchmove"),q(this,"endEvent","touchend"),q(this,"resetEvent",null),q(this,"context",null),q(this,"_start",a=>{this.preStart&&this.preStart(a),this.start(a),this.onStart&&this.onStart(a)}),q(this,"_process",a=>{this.preProcess&&this.preProcess(a),this.process(a),this.onProcess&&this.onProcess(a)}),q(this,"_end",a=>{this.preEnd&&this.preEnd(a),this.end(a),this.onEnd&&this.onEnd(a)}),q(this,"_reset",a=>{this.preReset&&this.preReset(a),this.reset(a),this.onReset&&this.onReset(a)}),_(this,this.getDefaultCfg(),t),this.context=this.getInteractionContext(e),this.chart=e;var{range:r}=this;r&&(this.context.range=r),this._bindEvents(e)}_bindEvents(t){var{startEvent:e,processEvent:r,endEvent:a,resetEvent:n}=this,s=t.get("canvas");s.on(e,this._start),s.on(r,this._process),s.on(a,this._end),s.on(n,this._reset)}_clearEvents(){var{chart:t,startEvent:e,processEvent:r,endEvent:a,resetEvent:n}=this,s=t.get("canvas");s.off(e,this._start),s.off(r,this._process),s.off(a,this._end),s.off(n,this._start)}start(){}process(){}end(){}reset(){}destroy(){this.context.destroy(),this._clearEvents()}}class Qo extends pa{getDefaultCfg(){return{type:"pan",startEvent:"panstart",processEvent:"pan",endEvent:"panend"}}start(){var{context:t}=this;t.start()}process(t){var{direction:e,deltaX:r}=t;if(!(e==="up"||e==="down")){t.preventDefault&&t.preventDefault();var{context:a}=this,n=a.chart,s=n.get("coord"),{start:o,end:l}=s,f=l.x-o.x,h=r/f;a.doMove(h)}}}class tl extends pa{getDefaultCfg(){return{type:"pinch",startEvent:"pinchstart",processEvent:"pinch",endEvent:"pinchend"}}constructor(t,e){super(t,e);var{context:r}=this;_(r,t)}start(){var{context:t}=this;t.start()}process(t){t.preventDefault&&t.preventDefault();var{zoom:e,center:r}=t,{context:a}=this,{chart:n}=a,s=n.get("coord"),{start:o,end:l}=s,f=l.x-o.x,h=Math.abs(r.x-o.x),u=Math.abs(l.x-r.x),v=h/f,c=u/f;a.doZoom(v,c,e)}end(){var{context:t}=this;t.updateTicks()}}E.registerInteraction("pan",Qo);E.registerInteraction("pinch",tl);var el={Marker:Ie};E.plugins.register([uo,_o,go,Zo]);const pl={Component:el,Global:b,Chart:E,Shape:N,G:Fn,Util:Ba,Helper:Bn,track:kn,Animate:it};export{pl as F};
