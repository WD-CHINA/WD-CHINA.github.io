import{f as V,n as O,aj as A,ar as E,t as U,bI as H,d as W,q as F,aw as q,bL as X,aS as L,j as c,aD as J,ao as z,w as K,m as T,b as Q,N as Y,u as Z,o as tt,c as i,e as r,v as e,A as l,y as k,L as G,P as D,C as B,a2 as P,B as M,bM as et,x as st,X as at,H as nt,a5 as ot,D as lt,E as it,G as rt,z as ct,a7 as ut,_ as dt}from"./h5-ai-sport.v0.0.0.index.eb36d521.1684379358906.js";import{A as vt}from"./h5-ai-sport.v0.0.0.index.af0a64c2.1684379358906.js";import{f as _t}from"./h5-ai-sport.v0.0.0.unit.7fbf2605.1684379358906.js";import{f as mt,h as ht}from"./h5-ai-sport.v0.0.0.teacher.940aef37.1684379358906.js";import{I as pt}from"./h5-ai-sport.v0.0.0.index.1a7b6993.1684379358906.js";const[ft,S]=V("circle");let yt=0;const j=n=>Math.min(Math.max(+n,0),100);function kt(n,h){const p=n?1:0;return`M ${h/2} ${h/2} m 0, -500 a 500, 500 0 1, ${p} 0, 1000 a 500, 500 0 1, ${p} 0, -1000`}const gt={text:String,size:O,fill:A("none"),rate:E(100),speed:E(0),color:[String,Object],clockwise:U,layerColor:String,currentRate:H(0),strokeWidth:E(40),strokeLinecap:String,startPosition:A("top")};var xt=W({name:ft,props:gt,emits:["update:currentRate"],setup(n,{emit:h,slots:p}){const I=`van-circle-${yt++}`,_=F(()=>+n.strokeWidth+1e3),g=F(()=>kt(n.clockwise,_.value)),x=F(()=>{const s={top:0,right:90,bottom:180,left:270}[n.startPosition];if(s)return{transform:`rotate(${s}deg)`}});q(()=>n.rate,v=>{let s;const a=Date.now(),u=n.currentRate,d=j(v),f=Math.abs((u-d)*1e3/+n.speed),y=()=>{const C=Date.now(),m=Math.min((C-a)/f,1)*(d-u)+u;h("update:currentRate",j(parseFloat(m.toFixed(1)))),(d>u?m<d:m>d)&&(s=L(y))};n.speed?(s&&X(s),s=L(y)):h("update:currentRate",d)},{immediate:!0});const w=()=>{const{strokeWidth:s,currentRate:a,strokeLinecap:u}=n,d=3140*a/100,f=z(n.color)?`url(#${I})`:n.color,y={stroke:f,strokeWidth:`${+s+1}px`,strokeLinecap:u,strokeDasharray:`${d}px ${3140}px`};return c("path",{d:g.value,style:y,class:S("hover"),stroke:f},null)},t=()=>{const v={fill:n.fill,stroke:n.layerColor,strokeWidth:`${n.strokeWidth}px`};return c("path",{class:S("layer"),style:v,d:g.value},null)},R=()=>{const{color:v}=n;if(!z(v))return;const s=Object.keys(v).sort((a,u)=>parseFloat(a)-parseFloat(u)).map((a,u)=>c("stop",{key:u,offset:a,"stop-color":v[a]},null));return c("defs",null,[c("linearGradient",{id:I,x1:"100%",y1:"0%",x2:"0%",y2:"0%"},[s])])},b=()=>{if(p.default)return p.default();if(n.text)return c("div",{class:S("text")},[n.text])};return()=>c("div",{class:S(),style:J(n.size)},[c("svg",{viewBox:`0 0 ${_.value} ${_.value}`,style:x.value},[R(),t(),w()]),b()])}});const Dt=K(xt);const $=n=>(it("data-v-084011e9"),n=n(),rt(),n),It={class:"projectDetail"},Rt={class:"detailTop"},St={class:"detailTopCont"},$t={class:"content_name"},wt={class:"ellipsis"},bt={class:"detailInfo"},Ct={class:"detailInfoItem"},Et={style:{"margin-right":"0.4rem"}},Ft={class:"detailInfoItem sb"},Tt={class:"itemItem"},Bt={key:0,class:"noDoingIcon"},Pt={key:1,class:"noDoingIcon"},Mt={key:2,class:"dateTip"},Nt={class:"sportListBox"},At={key:0,class:"SoirtText"},Lt={key:1,class:"SoirtText"},zt={class:"overView"},Gt={class:"column2"},jt={class:"column2_item"},Wt={class:"num"},Vt=$(()=>e("text",null,"人",-1)),Ot=$(()=>e("div",null,"已完成计划",-1)),Ut={class:"column2_item"},Ht={class:"num"},qt=$(()=>e("text",null,"%",-1)),Xt=$(()=>e("div",{class:"cloumn_text"},"完成人数",-1)),Jt={class:"column1_left"},Kt={key:0,class:"column1_right"},Qt={class:"column1_right_avatar_box"},Yt={key:1,class:"column1_right"},Zt={class:"column1_left"},te={class:"column1_right"},ee={style:{"margin-right":"0.13rem"}},se={class:"progressTitle"},ae={key:0,class:"progressBox"},ne={class:"progressBoxContent clearfix"},oe=["onClick"],le={class:"progressItemText"},ie={key:1,class:"nostart"},re={key:2,class:"bottombtn"},ce=W({__name:"details",setup(n){const h=document.body.clientWidth,p=parseFloat((h/750).toFixed(3)),I=[{name:"删除计划",status:"del"}],_=T(!1),g=Q(),x=Y(),w=Z(),t=T({}),R=T(10);tt(()=>{mt({id:x.params.taskId}).then(s=>{s.result.startDate=s.result.startDate.slice(0,10).replace(/-/g,"."),s.result.endDate=s.result.endDate.slice(0,10).replace(/-/g,"."),s.result.finishPercent=s.result.total?parseFloat((s.result.finishCount/s.result.total*100).toFixed(1)):0,s.result.finishRanks&&s.result.finishRanks.length&&(s.result.finishRanks=s.result.finishRanks.slice(0,3)),s.result.itemFinishSummary&&s.result.itemFinishSummary.forEach(a=>{a.percent=parseFloat((a.finishGoalCount/s.result.total*100).toFixed(2))}),t.value=s.result})});const b=()=>{at({message:"确定删当前计划"}).then(()=>{ht({id:t.value.id}).then(()=>{_.value=!1,nt("删除成功"),g.back()})}).catch(()=>{})},v=(s,a)=>{g.push(`/taskdetails/list/${s}/${a}/${x.params.taskId}`)};return(s,a)=>{const u=ot,d=pt,f=Dt,y=vt,C=lt;return i(),r("div",It,[e("div",Rt,[e("div",St,[e("div",$t,[e("div",wt,l(t.value.name),1),k(w).userInfo.id===t.value.creatorId?(i(),G(u,{key:0,onClick:a[0]||(a[0]=o=>_.value=!0),size:".427rem",color:"#0074E8",name:"https://yunketang-file.dream-sports.cn/static/delete.png"})):D("",!0)]),e("div",bt,[e("div",Ct,[c(d,{src:"https://yunketang-file.dream-sports.cn/static/%E7%BB%84%204190%402x.png"}),e("div",Et,l(t.value.gradeName||t.value.grade+"年级")+" "+l(t.value.numberName||t.value.number+"班"),1),e("div",null,l(t.value.total)+"人",1)]),e("div",Ft,[e("div",Tt,[c(d,{src:"https://yunketang-file.dream-sports.cn/static/%E7%BB%84%204192%402x.png"}),e("div",null,l(t.value.startDate)+"——"+l(t.value.endDate),1)]),t.value.currentDays?t.value.finishRate||t.value.finishRate==0?(i(),r("div",Pt,"已结束")):(i(),r("div",Mt,"已进行"+l(t.value.currentDays)+"/"+l(t.value.days)+"天",1)):(i(),r("div",Bt,"未开始"))])]),e("div",Nt,[(i(!0),r(B,null,P(t.value.taskGames,(o,m)=>(i(),r("div",{class:"sportlistItem",key:m},[e("div",{class:"sportIcon",style:ct("background-image:url(https://yunketang-file.dream-sports.cn/static/"+o.code+".png)")},null,4),o.type=="1"?(i(),r("div",At,l(o.name)+" "+l(k(ut)(o.goal).m)+"分钟",1)):D("",!0),o.type!="1"?(i(),r("div",Lt,l(o.name)+" "+l(o.goal)+l(k(_t)(o.code))+l(o.type=="0"?"/天":o.type==1?"/分钟":o.type=="week"?"/周":""),1)):D("",!0)]))),128))])])]),e("div",zt,[e("div",Gt,[e("div",jt,[e("div",null,[e("div",Wt,[M(l(t.value.finishCount?t.value.finishCount:0)+" ",1),Vt]),Ot])]),e("div",Ut,[e("div",null,[e("div",Ht,[M(l(t.value.currentDays?t.value.finishRate||t.value.finishRate==0?k(et)(t.value.finishRate):t.value.finishPercent:0)+" ",1),qt]),Xt])])]),e("div",{class:"column1",onClick:a[1]||(a[1]=o=>s.$router.push(`/taskdetails/rank/${k(x).params.taskId}/${t.value.type}`))},[e("div",Jt,[c(d,{class:"column1_left_icon",src:"https://yunketang-file.dream-sports.cn/static/%E7%BB%84%203411%402x.png"}),e("div",null,"完成"+l(t.value.type==="day"?"天":"周")+"数排行榜",1)]),t.value.currentDays||t.value.finishRate||t.value.finishRate==0?(i(),r("div",Kt,[e("div",Qt,[(i(!0),r(B,null,P(t.value.finishRanks,(o,m)=>(i(),G(d,{fit:"cover",src:o.avatar||"https://yunketang-file.dream-sports.cn/avatar/defaultAvatar.jpg",key:m},null,8,["src"]))),128))]),c(u,{color:"#D0D0D0",name:"arrow"})])):(i(),r("div",Yt,"暂未开始"))]),t.value.currentDays&&!t.value.finishRate&&t.value.finishRate!=0?(i(),r("div",{key:0,class:"column1",onClick:a[2]||(a[2]=o=>v(t.value.currentDays,t.value.itemFinishSummary[t.value.currentDays-1].taskItemId))},[e("div",Zt,[c(d,{class:"column1_left_icon",src:"https://yunketang-file.dream-sports.cn/static/%E7%BB%84%204197%402x.png"}),e("div",null,l(t.value.type==="day"?"今日":"本周")+"计划已完成",1)]),e("div",te,[e("div",ee,l(t.value.currentItemFinishCount)+"/"+l(t.value.total)+"人",1),c(u,{color:"#D0D0D0",name:"arrow"})])])):D("",!0)]),e("div",se,"每"+l(t.value.type==="day"?"日":"周")+"计划完成人数",1),t.value.currentDays?(i(),r("div",ae,[e("div",ne,[(i(!0),r(B,null,P(t.value.itemFinishSummary,(o,m)=>(i(),r("div",{class:"progressItem",onClick:N=>v(o.number,o.taskItemId),key:m},[c(f,{"stroke-width":90,size:90*k(p),text:`${o.finishGoalCount}`,"layer-color":"#FDD429",color:"#0074E8","current-rate":R.value,"onUpdate:currentRate":a[3]||(a[3]=N=>R.value=N),clockwise:!1},null,8,["size","text","current-rate"]),e("div",le,l(t.value.type==="day"?o.startDay:"第"+o.number+"周"),1)],8,oe))),128))])])):(i(),r("div",ie,"运动计划暂未开始")),c(y,{"cancel-text":"取消",onCancel:a[4]||(a[4]=o=>_.value=!1),show:_.value,actions:I,onClose:a[5]||(a[5]=o=>_.value=!1),onSelect:b},null,8,["show"]),t.value.currentDays?(i(),r("div",re,[c(C,{round:"",block:"",type:"primary",size:"large",onClick:a[6]||(a[6]=o=>v(t.value.currentDays,t.value.itemFinishSummary[t.value.currentDays-1].taskItemId))},{default:st(()=>[M(" 批改作业 ")]),_:1})])):D("",!0)])}}});const he=dt(ce,[["__scopeId","data-v-084011e9"]]);export{he as default};
