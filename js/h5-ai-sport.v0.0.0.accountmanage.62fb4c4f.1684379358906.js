var N=(d,C,o)=>new Promise((c,l)=>{var v=n=>{try{r(o.next(n))}catch(h){l(h)}},_=n=>{try{r(o.throw(n))}catch(h){l(h)}},r=n=>n.done?c(n.value):Promise.resolve(n.value).then(v,_);r((o=o.apply(d,C)).next())});import{d as j,b as z,u as G,m as u,o as K,aa as M,c as i,e as f,v as e,B as R,A as m,C as P,a2 as q,j as p,P as g,x,L as b,T as S,ab as J,H as $,U as A,K as Q,ac as W,a5 as X,ad as Y,E as Z,G as ee,V as te,y as E,_ as se}from"./h5-ai-sport.v0.0.0.index.eb36d521.1684379358906.js";import{I as oe}from"./h5-ai-sport.v0.0.0.index.1a7b6993.1684379358906.js";const y=d=>(Z("data-v-2d267c1f"),d=d(),ee(),d),ae={style:{height:"100%"}},ne={class:"codeLogin"},le={class:"codeTitle"},ce={class:"select"},re=["onClick"],ie={class:"select-item-left"},ue={class:"select-item-center"},de={class:"select-item-center-t"},ve={class:"name"},_e={class:"roles"},he={class:"select-item-center-b"},fe={class:"select-item-center-b"},me={key:0,class:"currentAcc"},pe={key:1,class:"select-item-right"},ge=y(()=>e("text",null,"添加账号",-1)),Ce=y(()=>e("div",{class:"vant-container delete"},[e("div",{class:"delete-title"},"确定删除当前账号吗？")],-1)),we=y(()=>e("div",{class:"vant-container"},[e("div",{class:"delete-title"},"当前账号数量已满，请去账号管理中删除后再添加认证")],-1)),ke=y(()=>e("div",{class:"vant-container delete"},[e("div",{class:"delete-title"},"确认切换账号吗？")],-1)),ye=j({__name:"accountmanage",setup(d){const C=z(),o=G(),c=u(!0),l=u([]),v=u(!1),_=u(!1),r=u(!1),n=u(""),h=u("");K(()=>{T()});const U=s=>{c.value&&s!==o.userInfo.id&&s!==o.userInfo.id&&(v.value=!0,n.value=s)},B=()=>{S("切换中"),J({userId:n.value}).then(s=>N(this,null,function*(){v.value=!1,$("切换成功"),A(),o.setToken(s.result.token),o.setUserInfo().then(()=>N(this,null,function*(){yield Q(),C.replace("/")}))}))},D=s=>{_.value=!0,h.value=s},F=()=>{S("删除中"),W({userId:h.value}).then(()=>{_.value=!1,A(),$("删除成功"),T()})},L=(s,a)=>{var w=s.filter(function(k){return k.roleCode==a});return w.length},V=()=>{let s=L(l.value,"ROLE_TEACHER"),a=L(l.value,"ROLE_USER");l.value.length<6?C.push(`/info/chooserole/add/${s}/${a}`):r.value=!0},T=()=>{M({}).then(s=>{l.value=s.result})};return(s,a)=>{const w=oe,k=X,I=Y;return i(),f("div",ae,[e("div",ne,[e("div",le,[R(" 账号管理 "),e("div",{onClick:a[0]||(a[0]=t=>c.value=!c.value)},m(c.value?"管理":"取消"),1)]),e("div",ce,[(i(!0),f(P,null,q(l.value,(t,O)=>(i(),f("div",{class:te("select-item "+(t.id===E(o).userInfo.id?"active":"")),key:O,onClick:H=>U(t.id)},[e("div",ie,[p(w,{round:"",fit:"cover",src:t.avatar||"https://yunketang-file.dream-sports.cn/avatar/defaultAvatar.jpg"},null,8,["src"])]),e("div",ue,[e("div",de,[e("div",ve,m(t.nickName),1),e("div",_e,m(t.roleCode==="ROLE_STUDENT"?"学生用户":t.roleCode==="ROLE_TEACHER"?"认证教师":"体验用户"),1)]),e("div",he,m(t.schoolName),1),e("div",fe,m(t.gradeName)+m(t.teamNumerName),1)]),t.id===E(o).userInfo.id?(i(),f("div",me,[p(w,{fit:"cover",src:"https://yunketang-file.dream-sports.cn/static/current-role-account.png",mode:"widthFix",class:"current-img"}),R(" 当前账号 ")])):g("",!0),t.id!==E(o).userInfo.id?(i(),f("div",pe,[c.value?g("",!0):(i(),b(k,{key:0,name:"delete-o",style:{display:"flex","align-items":"center"},onClick:H=>D(t.id),color:"#ee0a24"},null,8,["onClick"]))])):g("",!0)],10,re))),128))]),l.value.length>=1&&c.value?(i(),f("div",{key:0,class:"add",onClick:V},[p(k,{name:"add",color:"#0091FF",size:"0.85rem"}),ge])):g("",!0)]),p(I,{"use-slot":"",title:"账号管理",width:"84%",show:_.value,"show-cancel-button":"",onCancel:a[1]||(a[1]=t=>_.value=!1),onConfirm:F},{default:x(()=>[Ce]),_:1},8,["show"]),r.value?(i(),b(I,{key:0,"use-slot":"",title:"身份认证",show:r.value,"cancel-button-text":"账号管理","show-cancel-button":"","show-confirm-button":!1,onCancel:a[2]||(a[2]=t=>r.value=!1)},{default:x(()=>[we]),_:1},8,["show"])):g("",!0),p(I,{"use-slot":"",title:"切换账号",width:"84%",show:v.value,"show-cancel-button":"",onCancel:a[3]||(a[3]=t=>v.value=!1),onConfirm:B},{default:x(()=>[ke]),_:1},8,["show"])])}}});const Ee=se(ye,[["__scopeId","data-v-2d267c1f"]]);export{Ee as default};
