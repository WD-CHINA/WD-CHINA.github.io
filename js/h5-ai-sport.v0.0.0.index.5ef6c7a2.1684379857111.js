var ae=(r,O,c)=>new Promise((p,d)=>{var v=l=>{try{n(c.next(l))}catch(u){d(u)}},g=l=>{try{n(c.throw(l))}catch(u){d(u)}},n=l=>l.done?p(l.value):Promise.resolve(l.value).then(v,g);n((c=c.apply(r,O)).next())});import{m as e,o as _e,M as le,N as pe,O as ge,d as he,c as E,e as q,j as ne,y as a,L as K,P as V,Q as ye,z as H,V as oe,b as Se,_ as Ie}from"./h5-ai-sport.v0.0.0.index.a6c8dc0f.1684379857111.js";import{_ as be}from"./h5-ai-sport.v0.0.0.GameOverDialog.c9df0113.1684379857111.js";import{_ as we,a as xe}from"./h5-ai-sport.v0.0.0.GameCounter.7a2beafd.1684379857111.js";import{s as Me,c as ke,_ as De}from"./h5-ai-sport.v0.0.0.utils.de482c22.1684379857111.js";import{v as Z,s as ue,a as X,b as Te}from"./h5-ai-sport.v0.0.0.bgAudio.47f05ebc.1684379857111.js";import{u as Be}from"./h5-ai-sport.v0.0.0.Setting.b13cabb0.1684379857111.js";import{I as Ce}from"./h5-ai-sport.v0.0.0.index.92382d81.1684379857111.js";const Ee=(r,O,c,p,d,v,g,n,l,u,h,o,y)=>{d.value===0&&(v.value=(r[15].y+r[16].y)/2),l.value?o([r[15],r[16]],g.value,v.value)&&y()&&p.value&&(d.value+=1,Z("https://go-ran-pic.lovedabai.com/sound/Sport_Ball_appear.mp3"),l.value=!1,u.value=!0,h.value=!1,v.value=(r[15].y+r[16].y)/2,p.value=!0):o([r[15],r[16]],n.value,v.value)&&y()&&p.value&&(d.value+=1,d.value&&Z("https://go-ran-pic.lovedabai.com/sound/Sport_Ball_appear.mp3"),l.value=!0,u.value=!1,h.value=!0,v.value=(r[15].y+r[16].y)/2,p.value=!0)};function Oe(){const r=Be(),O=pe(),c=60,p=["appear","tooClose","start","timeOut","comeOn","5","4","3","2","1","keepMoving","endsoon","adjustAngle"],d={};let v=[];const g=[1,2,3],n=e(!0),l=e(0),u=e(0),h=e(3),o=e(c),y=e(0),w=e(!1),P=e(!1),I=e(),M=e(),k=e(),i=e(),m=e(),b=e(),D=e(),R=e(10),U=e(0),W=e(0),x=e([!1]),T=e(!0),F=e(!0),B=e(0),N=e(0),z=e(0),A=e(!0),G=e(!1),J=e(!1);_e(()=>{z.value=document.body.clientWidth/2+document.body.clientWidth*.25,N.value=document.body.clientWidth*.25,p.forEach(t=>{const _=t==="appear"?"Sport_Ball_appear":t;d[t]=`https://go-ran-pic.lovedabai.com/sound/${_}.mp3`})}),le(()=>{$(),ue(),X()}),le(()=>{$(),ue(),X()});const S=t=>{Z(d[`${t}`])},re=(t,_,f)=>{v=Me(t),ke(t,_,f)&&(!w.value&&!I.value?(u.value=3,h.value=g.at(-1),se()):u.value||(n.value=!1,Ee(t,x,T,F,l,B,z,N,A,G,J,de,me),j()))},se=()=>{let t=3;n.value=!1,clearInterval(M.value),M.value=setInterval(()=>ae(this,null,function*(){t>0?(yield S(t),yield t--):(S("start"),clearInterval(M.value),r.bgMusic&&Te("https://yunketang-file.dream-sports.cn/sound/sport_background_music_03.mp3"))}),1e3),I.value=setInterval(()=>{u.value>0?(u.value--,h.value=g[u.value===2?1:0]):(clearInterval(I.value),I.value=void 0,u.value=0,w.value=!0,ce())},1e3)},ce=()=>{k.value=setInterval(()=>{o.value>0?(o.value===21&&S("comeOn"),o.value--,o.value==0?S("timeOut"):o.value<=5&&S(o.value)):(clearInterval(k.value),L())},1e3)},ve=()=>{D.value=setInterval(()=>{R.value>1?R.value-=1:(clearInterval(D.value),$())},1e3)},L=()=>{clearInterval(M.value),clearInterval(I.value),clearInterval(k.value),clearInterval(i.value),clearInterval(m.value),clearInterval(b.value),clearInterval(D.value),M.value=void 0,I.value=void 0,k.value=void 0,i.value=0,m.value=void 0,b.value=void 0,D.value=void 0};function $(){v=[],n.value=!0,l.value=0,o.value=c,u.value=0,h.value=3,y.value=0,w.value=!1,P.value=!1,R.value=10,x.value=[!1],T.value=!0,F.value=!0,B.value=0,A.value=!0,G.value=!1,J.value=!1,L(),X()}const ie=()=>{l.value>=1&&ge({code:O.name,score:l.value>0?l.value-1:0,time:c-o.value,photos:[]}).then(t=>{U.value=t.result.exceedRate?Number((t.result.exceedRate*100).toFixed(2)):0,W.value=t.result.integral})};function fe(t){if(l.value===0)return!0;let _=0;const f=v.slice(-5);return f.length===5?(f.forEach((s,C)=>{if(C!==0){let Y=!1;t.forEach(Q=>{const ee=Math.abs(s[Q].x-f[C-1][Q].x),te=Math.abs(s[Q].y-f[C-1][Q].y);(ee>te?ee:te)>2&&(Y=!0)}),Y&&_++}}),_>=3):!1}function j(t=!1){const f=fe([13,14]);if(P.value){L();return}y.value!==o.value&&(y.value=o.value,!f||t?m.value||(m.value=setInterval(()=>{if(i.value=i.value?i.value+1:1,i.value===3)S("keepMoving");else if(i.value===6)S("keepMoving");else if(i.value===9&&o.value>10){let s=5;clearInterval(b.value),b.value=setInterval(()=>{s>0?(s<=3?S(s):s===5&&S("endsoon"),s--):(S("timeOut"),clearInterval(m.value),clearInterval(b.value),P.value=!0,w.value=!1,i.value=0,m.value=void 0,ie(),L(),ve())},1e3)}},1e3)):(clearInterval(m.value),clearInterval(b.value),i.value=0,m.value=void 0))}function de(t,_,f){let s=!0;return t.forEach(C=>{(Math.abs(C.x-_)>70||Math.abs(C.y-f)>70)&&(s=!1)}),s}function me(){if(l.value===0)return!0;let t=0;const _=v.slice(-5);return _.length===5?(_.forEach(f=>{let s=!0;Math.abs(f[15].x-f[16].x)>20&&(s=!1),s&&t++}),t>=3):!1}return{num:l,time:o,countDownSrc:h,countDown:u,gameStart:w,gameEnd:P,showTip:n,startSport:re,isOutScreen:j,reStartTimer:D,reStartCountDown:R,resetSport:$,notMovingTimerInt:m,notMovingTimer:i,timer:I,rate:U,integral:W,jumpY:B,doBefore:A,left_mid:G,right_mid:J,left_point_pos:N,right_point_pos:z}}const Pe={id:"sport-model"},Re=he({__name:"index",setup(r){const O=Se(),{num:c,time:p,countDownSrc:d,countDown:v,gameStart:g,gameEnd:n,showTip:l,startSport:u,isOutScreen:h,reStartTimer:o,reStartCountDown:y,resetSport:w,rate:P,integral:I,doBefore:M,left_mid:k,right_mid:i,left_point_pos:m,right_point_pos:b}=Oe(),D=x=>{if(x.length>0){let T=x[0].keypoints,F=.2,B=[0,1,5,6,11,15,12,16];if(p.value<=0&&(n.value=!0,o.value=setInterval(()=>{y.value>1?y.value-=1:(clearInterval(o.value),w())})),n.value)return;u(T,F,B)}else g.value&&!n.value&&h(!0)},R=x=>{x&&g.value&&!n.value&&h(!0),l.value=!0},U=()=>{O.back()},W=()=>{w()};return(x,T)=>{const F=De,B=we,N=xe,z=be,A=Ce;return E(),q("div",Pe,[ne(F,{onUpdate:D,onError:R}),ne(B,{score:a(c),"game-duration":a(p)},null,8,["score","game-duration"]),a(v)?(E(),K(N,{key:0,"start-count-down":a(d)},null,8,["start-count-down"])):V("",!0),a(n)?(E(),K(z,{key:1,modelValue:a(c),"onUpdate:modelValue":T[0]||(T[0]=G=>ye(c)?c.value=G:null),rate:a(P),integral:a(I),reStartCountDown:a(y),onBack:U,onRestart:W},null,8,["modelValue","rate","integral","reStartCountDown"])):V("",!0),!a(g)||a(l)?(E(),q("div",{key:2,class:"fetch-box",style:H("left: "+(a(k)?"25%":"75%")+" !important; display: "+(a(n)?"none":"block")+";")},null,4)):V("",!0),a(l)&&!a(n)?(E(),K(A,{key:3,src:"https://yunketang-file.dream-sports.cn/static/ready_tips_side.png",class:"img_tips",style:H("left:"+(a(g)?a(M)?"75%":"25%":"75%"))},null,8,["style"])):V("",!0),!a(n)&&a(m)?(E(),q("div",{key:4,class:oe("blue point left_mid "+(a(k)?"green":"")),style:H("left:"+a(m)+"px;width:"+70+"px; height:"+70+"px;")},null,6)):V("",!0),!a(n)&&a(b)?(E(),q("div",{key:5,class:oe("blue point right_mid "+(a(i)?"green":"")),style:H("left:"+a(b)+"px;width:"+70+"px; height:"+70+"px;")},null,6)):V("",!0)])}}});const $e=Ie(Re,[["__scopeId","data-v-d5377e7a"]]);export{$e as default};
