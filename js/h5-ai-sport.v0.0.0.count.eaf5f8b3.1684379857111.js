import{d as Fe,c as n,e as r,_ as Le,N as Ze,b as je,u as qe,m as t,o as Je,ax as Ke,v as s,C as N,j as l,x as g,B as d,A as i,P as u,y as de,bE as Oe,bF as Qe,L as ve,a2 as me,z as Xe,a5 as et,a9 as tt,E as at,G as st,bG as ot}from"./h5-ai-sport.v0.0.0.index.a6c8dc0f.1684379857111.js";import{a as lt,T as nt,S as rt}from"./h5-ai-sport.v0.0.0.index.345ad689.1684379857111.js";import"./h5-ai-sport.v0.0.0.index.e39a7d8b.1684379857111.js";import{L as it}from"./h5-ai-sport.v0.0.0.index.1056f7a0.1684379857111.js";import{F as ct}from"./h5-ai-sport.v0.0.0.index.c04d08cb.1684379857111.js";import{P as ut}from"./h5-ai-sport.v0.0.0.index.fe8b4d0e.1684379857111.js";import{E as dt}from"./h5-ai-sport.v0.0.0.index.4ece4835.1684379857111.js";import{D as $}from"./h5-ai-sport.v0.0.0.date.49659523.1684379857111.js";import{g as vt,f as mt,h as pt,i as ht,j as _t,k as ft}from"./h5-ai-sport.v0.0.0.report.8a28115d.1684379857111.js";import{P as gt}from"./h5-ai-sport.v0.0.0.index.64b9d1a2.1684379857111.js";import{I as Dt}from"./h5-ai-sport.v0.0.0.index.92382d81.1684379857111.js";import"./h5-ai-sport.v0.0.0.use-id.97250c6b.1684379857111.js";import"./h5-ai-sport.v0.0.0.use-tab-status.3d0b1871.1684379857111.js";import"./h5-ai-sport.v0.0.0.index.a150fdf4.1684379857111.js";const yt={id:"my-chart"},xt=Fe({__name:"ChartPolarCricle",props:{data:null},setup(y,{expose:c}){const Y=y;return c({init:()=>{const m=new ct.Chart({el:document.getElementById("my-chart"),pixelRatio:window.devicePixelRatio});m.source(Y.data,{percent:{formatter:function(_){return(_*100).toFixed(0)+"%"}}});let x={};return Y.data.forEach(function(h){h.percent?x[h.name]=(h.percent*100).toFixed(0)+"%":x[h.name]="0%"}),m.coord("polar",{transposed:!0,innerRadius:.7,radius:.85}),m.axis(!1),m.legend({position:"right",clickable:!1,itemMarginBottom:28,itemFormatter:function(_){return _+"   "+x[_]}}),m.interval().position("a*percent").color("name",["#415DC8","#F9869D","#80D1F0","#48C97A"]).adjust("stack"),m.render(),m}}),(m,x)=>(n(),r("canvas",yt))}});const kt=Le(xt,[["__scopeId","data-v-d554d1ce"]]),D=y=>(at("data-v-8c3d2e8e"),y=y(),st(),y),wt={style:{"min-height":"100vh","background-color":"#e4e4e4"}},St={class:"page"},Tt={class:"score-con"},It={class:"flex top"},Ct={style:{display:"flex","align-items":"center"}},Nt={class:"flex data"},$t={class:"item"},Yt={class:"num"},bt=D(()=>s("div",{class:"title"},"总锻炼分钟",-1)),Et={class:"item"},Ot={class:"num"},Ft=D(()=>s("div",{class:"title"},"日均锻炼分钟",-1)),Lt={class:"item"},zt={key:0,class:"num"},Rt={key:1,class:"num"},Pt=D(()=>s("text",{style:{color:"#666666"}},"k",-1)),Bt=D(()=>s("div",{class:"title"},"总消耗大卡",-1)),Mt={class:"score-con-top"},At={class:"flex top1"},Ut={style:{display:"flex","align-items":"center"}},Vt={class:"avater"},Gt={class:"progress"},Ht={class:"flex"},Wt={class:"sport-name"},Zt={class:"sport-time"},jt={class:"score-con-top"},qt={class:"flex top1"},Jt={style:{display:"flex","align-items":"center"}},Kt={key:1,class:"content"},Qt=D(()=>s("div",{class:"flex-title1"},"班级排名",-1)),Xt=D(()=>s("div",{class:"flex-title2"},"项目",-1)),ea=D(()=>s("div",{class:"flex-title3"},"成绩",-1)),ta=[Qt,Xt,ea],aa={class:"flex-title1"},sa={class:"flex-title2"},oa={class:"flex-title3"},la={class:"score-con-chart"},na={class:"flex top2"},ra={style:{display:"flex","align-items":"center"}},ia={class:"f2-container"},ca={key:1,class:"score-con-top1"},ua={class:"flex top2 top3"},da={style:{display:"flex","align-items":"center"}},va={key:0,class:"score-datime",style:{"border-top-left-radius":"0","border-top-right-radius":"0"}},ma={class:"content1 time"},pa={class:"flex-title4"},ha={class:"flex-title3"},_a={class:"flex-title3"},fa={class:"flex-title3"},ga=Fe({__name:"count",setup(y){const c=Ze(),Y=je(),Se=qe(),m=t(c.params.startDate),x=t(c.params.endDate),h=t(c.params.schoolYear),_=t(c.params.currentFlag),b=t(!1),E=t(!1),O=t(!1),F=t(!1),L=t(!1),X=t([]),ee=t(""),z=t(""),pe=t(""),R=t(""),te=t([]),P=t(""),k=t(""),he=t(""),w=t(""),ae=t([]),B=t(""),S=t(""),_e=t(""),T=t(""),se=t([]),oe=t(""),M=t(""),Te=t(""),A=t(""),le=t([]),ne=t(""),U=t(""),Ie=t(""),V=t(""),ze=t(!1),re=t(0),p=t({}),ie=t([]),G=t([]),I=t([]),Ce=t([]),Ne=t(0),H={text:"dateName",value:"dateName"},ce=t(1),fe=t(10),ge=t(!1),$e=t(!1),De=t(!1),Ye=t(""),be=t(),Re=a=>{a===1&&(I.value=[],ce.value=1,fe.value=10,j())};Je(()=>{be.value=document.getElementsByClassName("van-nav-bar--fixed")[0].getBoundingClientRect().height,Pe()});const Pe=()=>{vt({testerId:Se.userInfo.schoolInnerId,timeType:"2"}).then(a=>{let e=[];_.value==="false"?(e.push({startDate:m.value,endDate:x.value,schoolYear:h.value,dateName:"全部"}),X.value=e,ee.value=e[0].startDate,z.value=e[0].endDate,z.value=e[0].endDate,R.value=e[0].dateName,pe.value=e[0].schoolYear,te.value=e,P.value=e[0].startDate,k.value=e[0].endDate,k.value=e[0].endDate,w.value=e[0].dateName,ae.value=e,B.value=e[0].startDate,S.value=e[0].endDate,S.value=e[0].endDate,T.value=e[0].dateName,se.value=e,oe.value=e[0].startDate,M.value=e[0].endDate,M.value=e[0].endDate,A.value=e[0].dateName,le.value=e,ne.value=e[0].startDate,U.value=e[0].endDate,U.value=e[0].endDate,V.value=e[0].dateName,ye(),xe(),ke(),we(),j()):(e.push({startDate:a.result[0].startDate,endDate:a.result[0].endDate,schoolYear:c.params.schoolYear,dateName:"全部"},{startDate:$.get3MonthBefor(),endDate:$.getNowDay(),schoolYear:c.params.schoolYear,dateName:"近三月"},{startDate:$.getStartDayOfMonth(),endDate:$.getNowDay(),schoolYear:c.params.schoolYear,dateName:"本月"},{startDate:$.getStartDayOfWeek(),endDate:$.getNowDay(),schoolYear:c.params.schoolYear,dateName:"本周"}),X.value=e,ee.value=e[e.length-2].startDate,z.value=e[e.length-2].endDate,R.value=e[e.length-2].dateName,pe.value=e[e.length-2].schoolYear,te.value=e,P.value=e[e.length-2].startDate,k.value=e[e.length-2].endDate,w.value=e[e.length-2].dateName,he.value=e[e.length-2].schoolYear,ae.value=e,B.value=e[e.length-2].startDate,S.value=e[e.length-2].endDate,T.value=e[e.length-2].dateName,_e.value=e[e.length-2].schoolYear,se.value=e,oe.value=e[e.length-2].startDate,M.value=e[e.length-2].endDate,A.value=e[e.length-2].dateName,Te.value=e[e.length-2].schoolYear,le.value=e,ne.value=e[e.length-2].startDate,U.value=e[e.length-2].endDate,V.value=e[e.length-2].dateName,Ie.value=e[e.length-2].schoolYear,ye(),xe(),ke(),we(),j())}).catch(()=>{})},W=a=>{a.target.id&&(a.target.id==="1"&&(b.value=!0),a.target.id==="2"&&(E.value=!0),a.target.id==="3"&&(O.value=!0),a.target.id==="4"&&(F.value=!0),a.target.id==="5"&&(L.value=!0))},Z=(a,e)=>{e.tagId==="1"&&(b.value=!1,ee.value=a.selectedOptions[0].startDate,z.value=a.selectedOptions[0].endDate,R.value=a.selectedOptions[0].dateName,ye()),e.tagId==="2"&&(E.value=!1,P.value=a.selectedOptions[0].startDate,k.value=a.selectedOptions[0].endDate,w.value=a.selectedOptions[0].dateName,xe()),e.tagId==="3"&&(O.value=!1,B.value=a.selectedOptions[0].startDate,S.value=a.selectedOptions[0].endDate,T.value=a.selectedOptions[0].dateName,ke()),e.tagId==="4"&&(F.value=!1,oe.value=a.selectedOptions[0].startDate,M.value=a.selectedOptions[0].endDate,A.value=a.selectedOptions[0].dateName,we()),e.tagId==="5"&&(L.value=!1,ne.value=a.selectedOptions[0].startDate,U.value=a.selectedOptions[0].endDate,V.value=a.selectedOptions[0].dateName,I.value=[],ce.value=1,fe.value=10,j())},ye=()=>{mt({testerId:c.params.schoolInnerId,startTime:ee.value,endTime:z.value,schoolYear:pe.value}).then(a=>{p.value=a.result}).catch(()=>{})},xe=()=>{pt({testerId:c.params.schoolInnerId,startTime:P.value,endTime:k.value,schoolYear:he.value,pageNo:1,pageSize:5}).then(a=>{ie.value=a.result.rows,Ne.value=Ee(a.result.rows,"testTimeSum")}).catch(()=>{})},ke=()=>{ht({testerId:c.params.schoolInnerId,startTime:B.value,endTime:S.value,schoolYear:_e.value,pageNo:1,pageSize:5,scoreType:1}).then(a=>{G.value=a.result.rows})},we=()=>{_t({testerId:c.params.schoolInnerId,startTime:oe.value,endTime:M.value,schoolYear:Te.value}).then(a=>{Ce.value=a.result,Ee(a.result,"percent")>0?(De.value=!0,a.result.filter(e=>{e.a="1",e.percent==0&&delete e.percent,Ke(()=>{var f;(f=Ye.value)==null||f.init()})})):De.value=!1})};function Ee(a,e){for(var f=0,q=a.length-1;q>=0;q--)f+=a[q][e];return f}const j=()=>{ft({testerId:c.params.schoolInnerId,startTime:ne.value,endTime:U.value,pageNo:ce.value,pageSize:fe.value,schoolYear:Ie.value}).then(a=>{I.value.length>=a.result.total?$e.value=!0:(I.value.push(...a.result.rows),ce.value+=1,ge.value=!1)}).catch(()=>{})},Be=()=>{Y.push(`/sport/report/data/${P.value}/${k.value}/${w.value}/${he.value}/exercise/${_.value}`)},Me=()=>{Y.push(`/sport/report/data/${B.value}/${S.value}/${T.value}/${_e.value}/score/${_.value}`)};return(a,e)=>{const f=lt,q=nt,Ae=rt,v=et,ue=dt,Ue=Dt,Ve=ut,Ge=kt,He=it,J=gt,K=tt;return n(),r("div",wt,[s("div",St,[ze.value?u("",!0):(n(),r(N,{key:0},[l(Ae,{"offset-top":be.value},{default:g(()=>[l(q,{active:re.value,"onUpdate:active":e[0]||(e[0]=o=>re.value=o),color:"#0074E8",onChange:Re},{default:g(()=>[l(f,{title:"运动概览",name:0}),l(f,{title:"运动记录",name:1})]),_:1},8,["active"])]),_:1},8,["offset-top"]),re.value===0?(n(),r(N,{key:0},[s("div",Tt,[s("div",It,[s("div",Ct,[l(v,{name:"star"}),d(" 运动数据 ")]),R.value?(n(),r("div",{key:0,class:"all",onClick:W,id:"1"},[d(i(R.value)+" ",1),l(v,{name:"arrow-down",color:"#666",size:".24rem"})])):u("",!0)]),s("div",Nt,[s("div",$t,[s("div",Yt,i(p.value.testDurationSum?de(Oe)(p.value.testDurationSum):"0"),1),bt]),s("div",Et,[s("div",Ot,i(p.value.testDurationAvgDay?de(Oe)(p.value.testDurationAvgDay):"0"),1),Ft]),s("div",Lt,[p.value.caloriesSum<1e3?(n(),r("div",zt,i(p.value.caloriesSum||"0"),1)):(n(),r("div",Rt,[d(i(p.value.caloriesSum?de(Qe)(p.value.caloriesSum):"0")+" ",1),Pt])),Bt])])]),s("div",Mt,[s("div",At,[s("div",Ut,[l(v,{name:"star"}),d(" 运动时长TOP5 ")]),w.value?(n(),r("div",{key:0,class:"all",onClick:W,id:"2"},[d(i(w.value)+" ",1),l(v,{name:"arrow-down",color:"#666",size:".24rem"})])):u("",!0)]),ie.value.length==0?(n(),ve(ue,{key:0,class:"custom-image",image:"https://yunketang-file.dream-sports.cn/static/cernosearch.png",description:"暂无运动记录"})):u("",!0),(n(!0),r(N,null,me(ie.value,(o,C)=>(n(),r("div",{class:"progress-con",key:C},[s("div",Vt,[l(Ue,{round:"",width:".96rem",height:".96rem",fit:"cover",src:o.coverExercise},null,8,["src"])]),s("div",Gt,[s("div",Ht,[s("div",Wt,i(o.item),1),s("div",Zt,i(o.testTimeSum?de(ot)(o.testTimeSum):0)+"min",1)]),l(Ve,{percentage:o.testTimeSum/Ne.value*100,color:"#FDD429","show-pivot":!1,"stroke-width":"5"},null,8,["percentage"])])]))),128)),ie.value.length>0?(n(),r("div",{key:1,class:"seemore",onClick:Be},[d(" 查看更多 "),l(v,{name:"arrow",color:"#666666",size:".293rem"})])):u("",!0)]),s("div",jt,[s("div",qt,[s("div",Jt,[l(v,{name:"star"}),d(" 运动成绩TOP5 ")]),T.value?(n(),r("div",{key:0,class:"all",onClick:W,id:"3"},[d(i(T.value)+" ",1),l(v,{name:"arrow-down",color:"#666",size:".24rem"})])):u("",!0)]),G.value.length==0?(n(),ve(ue,{key:0,class:"custom-image",image:"https://yunketang-file.dream-sports.cn/static/cernosearch.png",description:"暂无运动记录"})):u("",!0),G.value.length>0?(n(),r("div",Kt,ta)):u("",!0),(n(!0),r(N,null,me(G.value,(o,C)=>(n(),r("div",{class:"content1",key:C},[s("div",aa,"No."+i(o.rank),1),s("div",sa,i(o.item),1),s("div",oa,i(o.sportScore)+i(o.unit),1)]))),128)),G.value.length>0?(n(),r("div",{key:2,class:"seemore",onClick:Me},[d(" 查看更多 "),l(v,{name:"arrow",color:"#666666",size:".293rem"})])):u("",!0)]),s("div",la,[s("div",na,[s("div",ra,[l(v,{name:"star"}),d(" 运动类型分布 ")]),A.value?(n(),r("div",{key:0,class:"all",onClick:W,id:"4"},[d(i(A.value)+" ",1),l(v,{name:"arrow-down",color:"#666",size:".24rem"})])):u("",!0)]),s("div",ia,[De.value?(n(),ve(Ge,{key:0,data:Ce.value,ref_key:"chart",ref:Ye},null,8,["data"])):(n(),ve(ue,{key:1,class:"custom-image",image:"https://yunketang-file.dream-sports.cn/static/cernosearch.png",description:"暂无运动记录"}))])])],64)):u("",!0),re.value===1?(n(),r("div",ca,[s("div",ua,[s("div",da,[l(v,{name:"star"}),d(" 运动记录 ")]),V.value?(n(),r("div",{key:0,class:"all",onClick:W,id:"5"},[d(i(V.value)+" ",1),l(v,{name:"arrow-down",color:"#666",size:".24rem"})])):u("",!0)]),I.value.length==0?(n(),r("div",va,[l(ue,{class:"custom-image1",image:"https://yunketang-file.dream-sports.cn/static/cernosearch.png",description:"暂无运动记录"})])):u("",!0),l(He,{"immediate-check":!1,loading:ge.value,"onUpdate:loading":e[1]||(e[1]=o=>ge.value=o),finished:$e.value,"finished-text":"",onLoad:j},{default:g(()=>[(n(!0),r(N,null,me(I.value,(o,C)=>(n(),r("div",{class:"score-datime",style:Xe(C==0?"border-top-left-radius:0;border-top-right-radius:0;":"border-radius: 14px;"),key:C},[s("div",ma,i(o.sportTime),1),(n(!0),r(N,null,me(o.timeDateExerciseList,(Q,We)=>(n(),r("div",{class:"content1",key:We},[s("div",pa,i(Q.item),1),s("div",ha,i(Q.sportDate),1),s("div",_a,i(Q.score)+i(Q.unit),1),s("div",fa,i(Q.testDuration)+"s",1)]))),128))],4))),128))]),_:1},8,["loading","finished"])])):u("",!0)],64))]),l(K,{show:b.value,position:"bottom",onClose:e[4]||(e[4]=o=>b.value=!1)},{default:g(()=>[l(J,{columns:X.value,"columns-field-names":H,"show-toolbar":"","default-index":X.value.length-2,onCancel:e[2]||(e[2]=o=>b.value=!1),onConfirm:e[3]||(e[3]=o=>Z(o,{tagId:"1"}))},null,8,["columns","default-index"])]),_:1},8,["show"]),l(K,{show:E.value,position:"bottom",onClose:e[7]||(e[7]=o=>E.value=!1)},{default:g(()=>[l(J,{columns:te.value,"default-index":te.value.length-2,"columns-field-names":H,"show-toolbar":"",onCancel:e[5]||(e[5]=o=>E.value=!1),onConfirm:e[6]||(e[6]=o=>Z(o,{tagId:"2"}))},null,8,["columns","default-index"])]),_:1},8,["show"]),l(K,{show:O.value,position:"bottom",onClose:e[10]||(e[10]=o=>O.value=!1)},{default:g(()=>[l(J,{columns:ae.value,"default-index":ae.value.length-2,"columns-field-names":H,"show-toolbar":"",onCancel:e[8]||(e[8]=o=>O.value=!1),onConfirm:e[9]||(e[9]=o=>Z(o,{tagId:"3"}))},null,8,["columns","default-index"])]),_:1},8,["show"]),l(K,{show:F.value,position:"bottom",onClose:e[13]||(e[13]=o=>F.value=!1)},{default:g(()=>[l(J,{columns:se.value,"default-index":se.value.length-2,"columns-field-names":H,"show-toolbar":"",onCancel:e[11]||(e[11]=o=>F.value=!1),onConfirm:e[12]||(e[12]=o=>Z(o,{tagId:"4"}))},null,8,["columns","default-index"])]),_:1},8,["show"]),l(K,{show:L.value,position:"bottom",onClose:e[16]||(e[16]=o=>L.value=!1)},{default:g(()=>[l(J,{columns:le.value,"default-index":le.value.length-2,"columns-field-names":H,"show-toolbar":"",onCancel:e[14]||(e[14]=o=>L.value=!1),onConfirm:e[15]||(e[15]=o=>Z(o,{tagId:"5"}))},null,8,["columns","default-index"])]),_:1},8,["show"])])}}});const Oa=Le(ga,[["__scopeId","data-v-8c3d2e8e"]]);export{Oa as default};
