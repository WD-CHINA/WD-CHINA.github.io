import{f as X,d as j,b0 as J,bI as we,q as C,j as u,bJ as ke,m as N,bK as Se,at as _e,i as ye,n as se,a_ as re,aU as Te,b2 as K,aj as me,t as p,ar as xe,be as le,aw as ae,aW as Me,a9 as Re,aS as ne,aT as Ie,ae as Ce,H as he,D as De,w as Oe,b as Be,a3 as H,c as Ae,e as Pe,v as _,y as z,A as oe,B as ve,x as pe,a5 as $e,E as He,G as Fe,_ as Ne}from"./h5-ai-sport.v0.0.0.index.95bda2e2.1684318478178.js";import{u as Ye}from"./h5-ai-sport.v0.0.0.index.c132801b.1684318478178.js";import"./h5-ai-sport.v0.0.0.index.383d5f05.1684318478178.js";import"./h5-ai-sport.v0.0.0.index.250d1fd0.1684318478178.js";import{F as We}from"./h5-ai-sport.v0.0.0.index.dd2c3934.1684318478178.js";import{u as Ve}from"./h5-ai-sport.v0.0.0.Task.bb83b96b.1684318478178.js";import{a as ze}from"./h5-ai-sport.v0.0.0.utils.f3c515c9.1684318478178.js";import"./h5-ai-sport.v0.0.0.use-id.63b167f5.1684318478178.js";import"./h5-ai-sport.v0.0.0.use-tab-status.b97a6de6.1684318478178.js";import"./h5-ai-sport.v0.0.0.index.1828ee52.1684318478178.js";const[je,m,F]=X("calendar"),Ee=e=>F("monthTitle",e.getFullYear(),e.getMonth()+1);function ie(e,i){const o=e.getFullYear(),d=i.getFullYear();if(o===d){const h=e.getMonth(),T=i.getMonth();return h===T?0:h>T?1:-1}return o>d?1:-1}function O(e,i){const o=ie(e,i);if(o===0){const d=e.getDate(),h=i.getDate();return d===h?0:d>h?1:-1}return o}const Q=e=>new Date(e),ge=e=>Array.isArray(e)?e.map(Q):Q(e);function de(e,i){const o=Q(e);return o.setDate(o.getDate()+i),o}const ce=e=>de(e,-1),be=e=>de(e,1),ue=()=>{const e=new Date;return e.setHours(0,0,0,0),e};function Le(e){const i=e[0].getTime();return(e[1].getTime()-i)/(1e3*60*60*24)+1}const[Ue]=X("calendar-day");var qe=j({name:Ue,props:{item:J(Object),color:String,index:Number,offset:we(0),rowHeight:String},emits:["click"],setup(e,{emit:i,slots:o}){const d=C(()=>{var n;const{item:s,index:g,color:R,offset:x,rowHeight:$}=e,y={height:$};if(s.type==="placeholder")return y.width="100%",y;if(g===0&&(y.marginLeft=`${100*x/7}%`),R)switch(s.type){case"end":case"start":case"start-end":case"multiple-middle":case"multiple-selected":y.background=R;break;case"middle":y.color=R;break}return x+(((n=s.date)==null?void 0:n.getDate())||1)>28&&(y.marginBottom=0),y}),h=()=>{e.item.type!=="disabled"&&i("click",e.item)},T=()=>{const{topInfo:n}=e.item;if(n||o["top-info"])return u("div",{class:m("top-info")},[o["top-info"]?o["top-info"](e.item):n])},M=()=>{const{bottomInfo:n}=e.item;if(n||o["bottom-info"])return u("div",{class:m("bottom-info")},[o["bottom-info"]?o["bottom-info"](e.item):n])},v=()=>{const{item:n,color:s,rowHeight:g}=e,{type:R,text:x}=n,$=[T(),x,M()];return R==="selected"?u("div",{class:m("selected-day"),style:{width:g,height:g,background:s}},[$]):$};return()=>{const{type:n,className:s}=e.item;return n==="placeholder"?u("div",{class:m("day"),style:d.value},null):u("div",{role:"gridcell",style:d.value,class:[m("day",n),s],tabindex:n==="disabled"?void 0:-1,onClick:h},[v()])}}});const[Ge]=X("calendar-month"),Je={date:J(Date),type:String,color:String,minDate:J(Date),maxDate:J(Date),showMark:Boolean,rowHeight:se,formatter:Function,lazyRender:Boolean,currentDate:[Date,Array],allowSameDay:Boolean,showSubtitle:Boolean,showMonthTitle:Boolean,firstDayOfWeek:Number};var Ke=j({name:Ge,props:Je,emits:["click"],setup(e,{emit:i,slots:o}){const[d,h]=ke(),T=N(),M=N(),v=Se(M),n=C(()=>Ee(e.date)),s=C(()=>_e(e.rowHeight)),g=C(()=>{const r=e.date.getDay();return e.firstDayOfWeek?(r+7-e.firstDayOfWeek)%7:r}),R=C(()=>ze(e.date.getFullYear(),e.date.getMonth()+1)),x=C(()=>d.value||!e.lazyRender),$=()=>n.value,y=r=>{const D=w=>e.currentDate.some(f=>O(f,w)===0);if(D(r)){const w=ce(r),f=be(r),k=D(w),t=D(f);return k&&t?"multiple-middle":k?"end":t?"start":"multiple-selected"}return""},Y=r=>{const[D,w]=e.currentDate;if(!D)return"";const f=O(r,D);if(!w)return f===0?"start":"";const k=O(r,w);return e.allowSameDay&&f===0&&k===0?"start-end":f===0?"start":k===0?"end":f>0&&k<0?"middle":""},L=r=>{const{type:D,minDate:w,maxDate:f,currentDate:k}=e;if(O(r,w)<0||O(r,f)>0)return"disabled";if(k===null)return"";if(Array.isArray(k)){if(D==="multiple")return y(r);if(D==="range")return Y(r)}else if(D==="single")return O(r,k)===0?"selected":"";return""},W=r=>{if(e.type==="range"){if(r==="start"||r==="end")return F(r);if(r==="start-end")return`${F("start")}/${F("end")}`}},U=()=>{if(e.showMonthTitle)return u("div",{class:m("month-title")},[o["month-title"]?o["month-title"]({date:e.date,text:n.value}):n.value])},q=()=>{if(e.showMark&&x.value)return u("div",{class:m("month-mark")},[e.date.getMonth()+1])},G=C(()=>{const r=Math.ceil((R.value+g.value)/7);return Array(r).fill({type:"placeholder"})}),V=C(()=>{const r=[],D=e.date.getFullYear(),w=e.date.getMonth();for(let f=1;f<=R.value;f++){const k=new Date(D,w,f),t=L(k);let a={date:k,type:t,text:f,bottomInfo:W(t)};e.formatter&&(a=e.formatter(a)),r.push(a)}return r}),B=C(()=>V.value.filter(r=>r.type==="disabled")),Z=(r,D)=>{if(T.value){const w=re(T.value),f=G.value.length,t=(Math.ceil((D.getDate()+g.value)/7)-1)*w.height/f;Te(r,w.top+t+r.scrollTop-re(r).top)}},ee=(r,D)=>u(qe,{item:r,index:D,color:e.color,offset:g.value,rowHeight:s.value,onClick:w=>i("click",w)},K(o,["top-info","bottom-info"])),te=()=>u("div",{ref:T,role:"grid",class:m("days")},[q(),(x.value?V:G).value.map(ee)]);return ye({getTitle:$,getHeight:()=>v.value,setVisible:h,scrollToDate:Z,disabledDays:B}),()=>u("div",{class:m("month"),ref:M},[U(),te()])}});const[Qe]=X("calendar-header");var Xe=j({name:Qe,props:{date:Date,title:String,subtitle:String,showTitle:Boolean,showSubtitle:Boolean,firstDayOfWeek:Number},emits:["clickSubtitle"],setup(e,{slots:i,emit:o}){const d=()=>{if(e.showTitle){const v=e.title||F("title"),n=i.title?i.title():v;return u("div",{class:m("header-title")},[n])}},h=v=>o("clickSubtitle",v),T=()=>{if(e.showSubtitle){const v=i.subtitle?i.subtitle({date:e.date,text:e.subtitle}):e.subtitle;return u("div",{class:m("header-subtitle"),onClick:h},[v])}},M=()=>{const{firstDayOfWeek:v}=e,n=F("weekdays"),s=[...n.slice(v,7),...n.slice(0,v)];return u("div",{class:m("weekdays")},[s.map(g=>u("span",{class:m("weekday")},[g]))])};return()=>u("div",{class:m("header")},[d(),T(),M()])}});const Ze={show:Boolean,type:me("single"),title:String,color:String,round:p,readonly:Boolean,poppable:p,maxRange:xe(null),position:me("bottom"),teleport:[String,Object],showMark:p,showTitle:p,formatter:Function,rowHeight:se,confirmText:String,rangePrompt:String,lazyRender:p,showConfirm:p,defaultDate:[Date,Array],allowSameDay:Boolean,showSubtitle:p,closeOnPopstate:p,showRangePrompt:p,confirmDisabledText:String,closeOnClickOverlay:p,safeAreaInsetTop:Boolean,safeAreaInsetBottom:p,minDate:{type:Date,validator:le,default:ue},maxDate:{type:Date,validator:le,default:()=>{const e=ue();return new Date(e.getFullYear(),e.getMonth()+6,e.getDate())}},firstDayOfWeek:{type:se,default:0,validator:e=>e>=0&&e<=6}};var et=j({name:je,props:Ze,emits:["select","confirm","unselect","monthShow","overRange","update:show","clickSubtitle"],setup(e,{emit:i,slots:o}){const d=(t,a=e.minDate,l=e.maxDate)=>O(t,a)===-1?a:O(t,l)===1?l:t,h=(t=e.defaultDate)=>{const{type:a,minDate:l,maxDate:c,allowSameDay:I}=e;if(t===null)return t;const S=ue();if(a==="range"){Array.isArray(t)||(t=[]);const A=d(t[0]||S,l,I?c:ce(c)),b=d(t[1]||S,I?l:be(l));return[A,b]}return a==="multiple"?Array.isArray(t)?t.map(A=>d(A)):[d(S)]:((!t||Array.isArray(t))&&(t=S),d(t))};let T;const M=N(),v=N({text:"",date:void 0}),n=N(h()),[s,g]=Ye(),R=C(()=>e.firstDayOfWeek?+e.firstDayOfWeek%7:0),x=C(()=>{const t=[],a=new Date(e.minDate);a.setDate(1);do t.push(new Date(a)),a.setMonth(a.getMonth()+1);while(ie(a,e.maxDate)!==1);return t}),$=C(()=>{if(n.value){if(e.type==="range")return!n.value[0]||!n.value[1];if(e.type==="multiple")return!n.value.length}return!n.value}),y=()=>n.value,Y=()=>{const t=Ie(M.value),a=t+T,l=x.value.map((b,P)=>s.value[P].getHeight()),c=l.reduce((b,P)=>b+P,0);if(a>c&&t>0)return;let I=0,S;const A=[-1,-1];for(let b=0;b<x.value.length;b++){const P=s.value[b];I<=a&&I+l[b]>=t&&(A[1]=b,S||(S=P,A[0]=b),s.value[b].showed||(s.value[b].showed=!0,i("monthShow",{date:P.date,title:P.getTitle()}))),I+=l[b]}x.value.forEach((b,P)=>{const fe=P>=A[0]-1&&P<=A[1]+1;s.value[P].setVisible(fe)}),S&&(v.value={text:S.getTitle(),date:S.date})},L=t=>{ne(()=>{x.value.some((a,l)=>ie(a,t)===0?(M.value&&s.value[l].scrollToDate(M.value,t),!0):!1),Y()})},W=()=>{if(!(e.poppable&&!e.show))if(n.value){const t=e.type==="single"?n.value:n.value[0];le(t)&&L(t)}else ne(Y)},U=()=>{e.poppable&&!e.show||(ne(()=>{T=Math.floor(re(M).height)}),W())},q=(t=h())=>{n.value=t,W()},G=t=>{const{maxRange:a,rangePrompt:l,showRangePrompt:c}=e;return a&&Le(t)>a?(c&&he(l||F("rangePrompt",a)),i("overRange"),!1):!0},V=()=>{var t;return i("confirm",(t=n.value)!=null?t:ge(n.value))},B=(t,a)=>{const l=c=>{n.value=c,i("select",ge(c))};if(a&&e.type==="range"&&!G(t)){l([t[0],de(t[0],+e.maxRange-1)]);return}l(t),a&&!e.showConfirm&&V()},Z=(t,a,l)=>{var c;return(c=t.find(I=>O(a,I.date)===-1&&O(I.date,l)===-1))==null?void 0:c.date},ee=C(()=>s.value.reduce((t,a)=>{var l,c;return t.push(...(c=(l=a.disabledDays)==null?void 0:l.value)!=null?c:[]),t},[])),te=t=>{if(e.readonly||!t.date)return;const{date:a}=t,{type:l}=e;if(l==="range"){if(!n.value){B([a]);return}const[c,I]=n.value;if(c&&!I){const S=O(a,c);if(S===1){const A=Z(ee.value,c,a);if(A){const b=ce(A);O(c,b)===-1?B([c,b]):B([a])}else B([c,a],!0)}else S===-1?B([a]):e.allowSameDay&&B([a,a],!0)}else B([a])}else if(l==="multiple"){if(!n.value){B([a]);return}const c=n.value,I=c.findIndex(S=>O(S,a)===0);if(I!==-1){const[S]=c.splice(I,1);i("unselect",Q(S))}else e.maxRange&&c.length>=e.maxRange?he(e.rangePrompt||F("rangePrompt",e.maxRange)):B([...c,a])}else B(a,!0)},r=t=>i("update:show",t),D=(t,a)=>{const l=a!==0||!e.showSubtitle;return u(Ke,Ce({ref:g(a),date:t,currentDate:n.value,showMonthTitle:l,firstDayOfWeek:R.value},K(e,["type","color","minDate","maxDate","showMark","formatter","rowHeight","lazyRender","showSubtitle","allowSameDay"]),{onClick:te}),K(o,["top-info","bottom-info","month-title"]))},w=()=>{if(o.footer)return o.footer();if(e.showConfirm){const t=o["confirm-text"],a=$.value,l=a?e.confirmDisabledText:e.confirmText;return u(De,{round:!0,block:!0,type:"primary",color:e.color,class:m("confirm"),disabled:a,nativeType:"button",onClick:V},{default:()=>[t?t({disabled:a}):l||F("confirm")]})}},f=()=>u("div",{class:[m("footer"),{"van-safe-area-bottom":e.safeAreaInsetBottom}]},[w()]),k=()=>u("div",{class:m()},[u(Xe,{date:v.value.date,title:e.title,subtitle:v.value.text,showTitle:e.showTitle,showSubtitle:e.showSubtitle,firstDayOfWeek:R.value,onClickSubtitle:t=>i("clickSubtitle",t)},K(o,["title","subtitle"])),u("div",{ref:M,class:m("body"),onScroll:Y},[x.value.map(D)]),f()]);return ae(()=>e.show,U),ae(()=>[e.type,e.minDate,e.maxDate],()=>q(h(n.value))),ae(()=>e.defaultDate,(t=null)=>{n.value=t,W()}),ye({reset:q,scrollToDate:L,getSelectedDate:y}),Me(U),()=>e.poppable?u(Re,{show:e.show,class:m("popup"),round:e.round,position:e.position,closeable:e.showTitle||e.showSubtitle,teleport:e.teleport,closeOnPopstate:e.closeOnPopstate,safeAreaInsetTop:e.safeAreaInsetTop,closeOnClickOverlay:e.closeOnClickOverlay,"onUpdate:show":r},{default:k}):k()}});const tt=Oe(et);const E=e=>(He("data-v-6dd03a2c"),e=e(),Fe(),e),at={class:"form"},nt=E(()=>_("div",{class:"checkTitle"},"创建运动计划",-1)),ot={class:"checkFormBody"},st={class:"formItem"},rt=E(()=>_("div",{class:"formItemLabel"},"计划名称",-1)),lt={class:"formItemValue ellipsis"},it=E(()=>_("div",{class:"formItemLabel"},"选择班级",-1)),ct={class:"formItemValue ellipsis"},ut=E(()=>_("div",{class:"formItemLabel"},"日期选择",-1)),dt={class:"formItemValue ellipsis"},ft={class:"formItem"},mt=E(()=>_("div",{class:"formItemLabel"},"共计",-1)),ht={class:"formItemValue ellipsis",style:{width:"100%","padding-right":"0"}},vt={class:"bottomBtnbox"},gt=j({__name:"task",setup(e){const i=Be(),o=Ve(),d=N(!1),h=N(!1),T=N([H().startOf("date").add(1,"day").toDate(),H().endOf("date").add(7,"day").toDate()]),M=n=>{d.value=!1;let[s,g]=n;o.setStartTimeStr(`${H(s).format("YYYY/MM/DD")} - ${H(g).format("YYYY/MM/DD")}`),o.setDateTotal(Math.ceil(H(H(g)).diff(H(s),"day",!0))),o.setStartTimeStamp(H(s).unix()),o.setEndTimeStamp(H(g).unix())},v=()=>{i.push("/create/list")};return(n,s)=>{const g=We,R=$e,x=tt,$=De;return Ae(),Pe("div",at,[nt,_("div",ot,[_("div",st,[rt,_("div",lt,[u(g,{maxlength:14,modelValue:z(o).name,"onUpdate:modelValue":s[0]||(s[0]=y=>z(o).name=y),type:"text"},null,8,["modelValue"])])]),_("div",{class:"formItem",onClick:s[1]||(s[1]=y=>n.$router.push("/create/clazz"))},[it,_("div",ct,[_("span",null,oe(z(o).teamNames),1),u(R,{color:"#D0D0D0",size:".47rem",class:"rightArrow",name:"arrow"})])]),u(x,{show:d.value,"show-confirm":d.value,onUnselect:s[2]||(s[2]=y=>h.value=!0),onSelect:s[3]||(s[3]=y=>h.value=!0),"default-date":T.value,"allow-same-day":!0,"max-range":180,"range-prompt":"最多可选180天","confirm-disabled-text":"确定",type:"range",color:"rgb(25, 137, 250)",onConfirm:M,onClose:s[4]||(s[4]=y=>d.value=!1)},null,8,["show","show-confirm","default-date"]),_("div",{class:"formItem",onClick:s[5]||(s[5]=y=>d.value=!0)},[ut,_("div",dt,[ve(oe(z(o).startTimeStr)+" ",1),u(R,{color:"#D0D0D0",size:".47rem",class:"rightArrow",name:"arrow"})])]),_("div",ft,[mt,_("div",ht,oe(z(o).dateTotal)+"天 ",1)]),_("div",vt,[u($,{onClick:v,icon:"https://yunketang-file.dream-sports.cn/static/btnRigArr.png",type:"primary",class:"project_nextBtn",round:""},{default:pe(()=>[ve(" 选择运动 ")]),_:1})])])])}}});const Rt=Ne(gt,[["__scopeId","data-v-6dd03a2c"]]);export{Rt as default};
